(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Co(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const ke={},Rs=[],xt=()=>{},Xc=()=>!1,ur=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),xo=t=>t.startsWith("onUpdate:"),Ue=Object.assign,Eo=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Zc=Object.prototype.hasOwnProperty,_e=(t,e)=>Zc.call(t,e),X=Array.isArray,Is=t=>Pn(t)==="[object Map]",Js=t=>Pn(t)==="[object Set]",ri=t=>Pn(t)==="[object Date]",oe=t=>typeof t=="function",Oe=t=>typeof t=="string",ft=t=>typeof t=="symbol",Ce=t=>t!==null&&typeof t=="object",Ma=t=>(Ce(t)||oe(t))&&oe(t.then)&&oe(t.catch),Ua=Object.prototype.toString,Pn=t=>Ua.call(t),eu=t=>Pn(t).slice(8,-1),Fa=t=>Pn(t)==="[object Object]",To=t=>Oe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,on=Co(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),dr=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},tu=/-(\w)/g,ct=dr(t=>t.replace(tu,(e,s)=>s?s.toUpperCase():"")),su=/\B([A-Z])/g,Yt=dr(t=>t.replace(su,"-$1").toLowerCase()),hr=dr(t=>t.charAt(0).toUpperCase()+t.slice(1)),Tr=dr(t=>t?`on${hr(t)}`:""),Gt=(t,e)=>!Object.is(t,e),Wn=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Va=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},er=t=>{const e=parseFloat(t);return isNaN(e)?t:e},nu=t=>{const e=Oe(t)?Number(t):NaN;return isNaN(e)?t:e};let oi;const fr=()=>oi||(oi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Et(t){if(X(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],r=Oe(n)?au(n):Et(n);if(r)for(const o in r)e[o]=r[o]}return e}else if(Oe(t)||Ce(t))return t}const ru=/;(?![^(]*\))/g,ou=/:([^]+)/,iu=/\/\*[^]*?\*\//g;function au(t){const e={};return t.replace(iu,"").split(ru).forEach(s=>{if(s){const n=s.split(ou);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Se(t){let e="";if(Oe(t))e=t;else if(X(t))for(let s=0;s<t.length;s++){const n=Se(t[s]);n&&(e+=n+" ")}else if(Ce(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const lu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cu=Co(lu);function Ba(t){return!!t||t===""}function uu(t,e){if(t.length!==e.length)return!1;let s=!0;for(let n=0;s&&n<t.length;n++)s=On(t[n],e[n]);return s}function On(t,e){if(t===e)return!0;let s=ri(t),n=ri(e);if(s||n)return s&&n?t.getTime()===e.getTime():!1;if(s=ft(t),n=ft(e),s||n)return t===e;if(s=X(t),n=X(e),s||n)return s&&n?uu(t,e):!1;if(s=Ce(t),n=Ce(e),s||n){if(!s||!n)return!1;const r=Object.keys(t).length,o=Object.keys(e).length;if(r!==o)return!1;for(const i in t){const a=t.hasOwnProperty(i),l=e.hasOwnProperty(i);if(a&&!l||!a&&l||!On(t[i],e[i]))return!1}}return String(t)===String(e)}function Ao(t,e){return t.findIndex(s=>On(s,e))}const Ha=t=>!!(t&&t.__v_isRef===!0),P=t=>Oe(t)?t:t==null?"":X(t)||Ce(t)&&(t.toString===Ua||!oe(t.toString))?Ha(t)?P(t.value):JSON.stringify(t,qa,2):String(t),qa=(t,e)=>Ha(e)?qa(t,e.value):Is(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,r],o)=>(s[Ar(n,o)+" =>"]=r,s),{})}:Js(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>Ar(s))}:ft(e)?Ar(e):Ce(e)&&!X(e)&&!Fa(e)?String(e):e,Ar=(t,e="")=>{var s;return ft(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ot;class du{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ot,!e&&ot&&(this.index=(ot.scopes||(ot.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=ot;try{return ot=this,e()}finally{ot=s}}}on(){ot=this}off(){ot=this.parent}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function hu(){return ot}let Ae;const $r=new WeakSet;class Ja{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ot&&ot.active&&ot.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,$r.has(this)&&($r.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||za(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ii(this),Wa(this);const e=Ae,s=ht;Ae=this,ht=!0;try{return this.fn()}finally{Ga(this),Ae=e,ht=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Oo(e);this.deps=this.depsTail=void 0,ii(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?$r.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Wr(this)&&this.run()}get dirty(){return Wr(this)}}let Ka=0,an,ln;function za(t,e=!1){if(t.flags|=8,e){t.next=ln,ln=t;return}t.next=an,an=t}function $o(){Ka++}function Po(){if(--Ka>0)return;if(ln){let e=ln;for(ln=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;an;){let e=an;for(an=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function Wa(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ga(t){let e,s=t.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),Oo(n),fu(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}t.deps=e,t.depsTail=s}function Wr(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Qa(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Qa(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===_n))return;t.globalVersion=_n;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Wr(t)){t.flags&=-3;return}const s=Ae,n=ht;Ae=t,ht=!0;try{Wa(t);const r=t.fn(t._value);(e.version===0||Gt(r,t._value))&&(t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Ae=s,ht=n,Ga(t),t.flags&=-3}}function Oo(t,e=!1){const{dep:s,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)Oo(o,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function fu(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let ht=!0;const Ya=[];function Xt(){Ya.push(ht),ht=!1}function Zt(){const t=Ya.pop();ht=t===void 0?!0:t}function ii(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=Ae;Ae=void 0;try{e()}finally{Ae=s}}}let _n=0;class pu{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ro{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ae||!ht||Ae===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Ae)s=this.activeLink=new pu(Ae,this),Ae.deps?(s.prevDep=Ae.depsTail,Ae.depsTail.nextDep=s,Ae.depsTail=s):Ae.deps=Ae.depsTail=s,Xa(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Ae.depsTail,s.nextDep=void 0,Ae.depsTail.nextDep=s,Ae.depsTail=s,Ae.deps===s&&(Ae.deps=n)}return s}trigger(e){this.version++,_n++,this.notify(e)}notify(e){$o();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Po()}}}function Xa(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Xa(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Gr=new WeakMap,ds=Symbol(""),Qr=Symbol(""),yn=Symbol("");function Be(t,e,s){if(ht&&Ae){let n=Gr.get(t);n||Gr.set(t,n=new Map);let r=n.get(s);r||(n.set(s,r=new Ro),r.map=n,r.key=s),r.track()}}function Rt(t,e,s,n,r,o){const i=Gr.get(t);if(!i){_n++;return}const a=l=>{l&&l.trigger()};if($o(),e==="clear")i.forEach(a);else{const l=X(t),c=l&&To(s);if(l&&s==="length"){const d=Number(n);i.forEach((h,f)=>{(f==="length"||f===yn||!ft(f)&&f>=d)&&a(h)})}else switch((s!==void 0||i.has(void 0))&&a(i.get(s)),c&&a(i.get(yn)),e){case"add":l?c&&a(i.get("length")):(a(i.get(ds)),Is(t)&&a(i.get(Qr)));break;case"delete":l||(a(i.get(ds)),Is(t)&&a(i.get(Qr)));break;case"set":Is(t)&&a(i.get(ds));break}}Po()}function vs(t){const e=me(t);return e===t?e:(Be(e,"iterate",yn),lt(t)?e:e.map(He))}function pr(t){return Be(t=me(t),"iterate",yn),t}const mu={__proto__:null,[Symbol.iterator](){return Pr(this,Symbol.iterator,He)},concat(...t){return vs(this).concat(...t.map(e=>X(e)?vs(e):e))},entries(){return Pr(this,"entries",t=>(t[1]=He(t[1]),t))},every(t,e){return Tt(this,"every",t,e,void 0,arguments)},filter(t,e){return Tt(this,"filter",t,e,s=>s.map(He),arguments)},find(t,e){return Tt(this,"find",t,e,He,arguments)},findIndex(t,e){return Tt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Tt(this,"findLast",t,e,He,arguments)},findLastIndex(t,e){return Tt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Tt(this,"forEach",t,e,void 0,arguments)},includes(...t){return Or(this,"includes",t)},indexOf(...t){return Or(this,"indexOf",t)},join(t){return vs(this).join(t)},lastIndexOf(...t){return Or(this,"lastIndexOf",t)},map(t,e){return Tt(this,"map",t,e,void 0,arguments)},pop(){return Ys(this,"pop")},push(...t){return Ys(this,"push",t)},reduce(t,...e){return ai(this,"reduce",t,e)},reduceRight(t,...e){return ai(this,"reduceRight",t,e)},shift(){return Ys(this,"shift")},some(t,e){return Tt(this,"some",t,e,void 0,arguments)},splice(...t){return Ys(this,"splice",t)},toReversed(){return vs(this).toReversed()},toSorted(t){return vs(this).toSorted(t)},toSpliced(...t){return vs(this).toSpliced(...t)},unshift(...t){return Ys(this,"unshift",t)},values(){return Pr(this,"values",He)}};function Pr(t,e,s){const n=pr(t),r=n[e]();return n!==t&&!lt(t)&&(r._next=r.next,r.next=()=>{const o=r._next();return o.value&&(o.value=s(o.value)),o}),r}const gu=Array.prototype;function Tt(t,e,s,n,r,o){const i=pr(t),a=i!==t&&!lt(t),l=i[e];if(l!==gu[e]){const h=l.apply(t,o);return a?He(h):h}let c=s;i!==t&&(a?c=function(h,f){return s.call(this,He(h),f,t)}:s.length>2&&(c=function(h,f){return s.call(this,h,f,t)}));const d=l.call(i,c,n);return a&&r?r(d):d}function ai(t,e,s,n){const r=pr(t);let o=s;return r!==t&&(lt(t)?s.length>3&&(o=function(i,a,l){return s.call(this,i,a,l,t)}):o=function(i,a,l){return s.call(this,i,He(a),l,t)}),r[e](o,...n)}function Or(t,e,s){const n=me(t);Be(n,"iterate",yn);const r=n[e](...s);return(r===-1||r===!1)&&Do(s[0])?(s[0]=me(s[0]),n[e](...s)):r}function Ys(t,e,s=[]){Xt(),$o();const n=me(t)[e].apply(t,s);return Po(),Zt(),n}const vu=Co("__proto__,__v_isRef,__isVue"),Za=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ft));function _u(t){ft(t)||(t=String(t));const e=me(this);return Be(e,"has",t),e.hasOwnProperty(t)}class el{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const r=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return o;if(s==="__v_raw")return n===(r?o?Au:rl:o?nl:sl).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const i=X(e);if(!r){let l;if(i&&(l=mu[s]))return l;if(s==="hasOwnProperty")return _u}const a=Reflect.get(e,s,qe(e)?e:n);return(ft(s)?Za.has(s):vu(s))||(r||Be(e,"get",s),o)?a:qe(a)?i&&To(s)?a:a.value:Ce(a)?r?il(a):Ks(a):a}}class tl extends el{constructor(e=!1){super(!1,e)}set(e,s,n,r){let o=e[s];if(!this._isShallow){const l=hs(o);if(!lt(n)&&!hs(n)&&(o=me(o),n=me(n)),!X(e)&&qe(o)&&!qe(n))return l?!1:(o.value=n,!0)}const i=X(e)&&To(s)?Number(s)<e.length:_e(e,s),a=Reflect.set(e,s,n,qe(e)?e:r);return e===me(r)&&(i?Gt(n,o)&&Rt(e,"set",s,n):Rt(e,"add",s,n)),a}deleteProperty(e,s){const n=_e(e,s);e[s];const r=Reflect.deleteProperty(e,s);return r&&n&&Rt(e,"delete",s,void 0),r}has(e,s){const n=Reflect.has(e,s);return(!ft(s)||!Za.has(s))&&Be(e,"has",s),n}ownKeys(e){return Be(e,"iterate",X(e)?"length":ds),Reflect.ownKeys(e)}}class yu extends el{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const bu=new tl,wu=new yu,ku=new tl(!0);const Yr=t=>t,Ln=t=>Reflect.getPrototypeOf(t);function Su(t,e,s){return function(...n){const r=this.__v_raw,o=me(r),i=Is(o),a=t==="entries"||t===Symbol.iterator&&i,l=t==="keys"&&i,c=r[t](...n),d=s?Yr:e?Xr:He;return!e&&Be(o,"iterate",l?Qr:ds),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[d(h[0]),d(h[1])]:d(h),done:f}},[Symbol.iterator](){return this}}}}function Nn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Cu(t,e){const s={get(r){const o=this.__v_raw,i=me(o),a=me(r);t||(Gt(r,a)&&Be(i,"get",r),Be(i,"get",a));const{has:l}=Ln(i),c=e?Yr:t?Xr:He;if(l.call(i,r))return c(o.get(r));if(l.call(i,a))return c(o.get(a));o!==i&&o.get(r)},get size(){const r=this.__v_raw;return!t&&Be(me(r),"iterate",ds),Reflect.get(r,"size",r)},has(r){const o=this.__v_raw,i=me(o),a=me(r);return t||(Gt(r,a)&&Be(i,"has",r),Be(i,"has",a)),r===a?o.has(r):o.has(r)||o.has(a)},forEach(r,o){const i=this,a=i.__v_raw,l=me(a),c=e?Yr:t?Xr:He;return!t&&Be(l,"iterate",ds),a.forEach((d,h)=>r.call(o,c(d),c(h),i))}};return Ue(s,t?{add:Nn("add"),set:Nn("set"),delete:Nn("delete"),clear:Nn("clear")}:{add(r){!e&&!lt(r)&&!hs(r)&&(r=me(r));const o=me(this);return Ln(o).has.call(o,r)||(o.add(r),Rt(o,"add",r,r)),this},set(r,o){!e&&!lt(o)&&!hs(o)&&(o=me(o));const i=me(this),{has:a,get:l}=Ln(i);let c=a.call(i,r);c||(r=me(r),c=a.call(i,r));const d=l.call(i,r);return i.set(r,o),c?Gt(o,d)&&Rt(i,"set",r,o):Rt(i,"add",r,o),this},delete(r){const o=me(this),{has:i,get:a}=Ln(o);let l=i.call(o,r);l||(r=me(r),l=i.call(o,r)),a&&a.call(o,r);const c=o.delete(r);return l&&Rt(o,"delete",r,void 0),c},clear(){const r=me(this),o=r.size!==0,i=r.clear();return o&&Rt(r,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=Su(r,t,e)}),s}function Io(t,e){const s=Cu(t,e);return(n,r,o)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(_e(s,r)&&r in n?s:n,r,o)}const xu={get:Io(!1,!1)},Eu={get:Io(!1,!0)},Tu={get:Io(!0,!1)};const sl=new WeakMap,nl=new WeakMap,rl=new WeakMap,Au=new WeakMap;function $u(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pu(t){return t.__v_skip||!Object.isExtensible(t)?0:$u(eu(t))}function Ks(t){return hs(t)?t:jo(t,!1,bu,xu,sl)}function ol(t){return jo(t,!1,ku,Eu,nl)}function il(t){return jo(t,!0,wu,Tu,rl)}function jo(t,e,s,n,r){if(!Ce(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=r.get(t);if(o)return o;const i=Pu(t);if(i===0)return t;const a=new Proxy(t,i===2?n:s);return r.set(t,a),a}function js(t){return hs(t)?js(t.__v_raw):!!(t&&t.__v_isReactive)}function hs(t){return!!(t&&t.__v_isReadonly)}function lt(t){return!!(t&&t.__v_isShallow)}function Do(t){return t?!!t.__v_raw:!1}function me(t){const e=t&&t.__v_raw;return e?me(e):t}function Ou(t){return!_e(t,"__v_skip")&&Object.isExtensible(t)&&Va(t,"__v_skip",!0),t}const He=t=>Ce(t)?Ks(t):t,Xr=t=>Ce(t)?il(t):t;function qe(t){return t?t.__v_isRef===!0:!1}function V(t){return al(t,!1)}function Ru(t){return al(t,!0)}function al(t,e){return qe(t)?t:new Iu(t,e)}class Iu{constructor(e,s){this.dep=new Ro,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:me(e),this._value=s?e:He(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||lt(e)||hs(e);e=n?e:me(e),Gt(e,s)&&(this._rawValue=e,this._value=n?e:He(e),this.dep.trigger())}}function Ds(t){return qe(t)?t.value:t}const ju={get:(t,e,s)=>e==="__v_raw"?t:Ds(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const r=t[e];return qe(r)&&!qe(s)?(r.value=s,!0):Reflect.set(t,e,s,n)}};function ll(t){return js(t)?t:new Proxy(t,ju)}class Du{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Ro(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=_n-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Ae!==this)return za(this,!0),!0}get value(){const e=this.dep.track();return Qa(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Lu(t,e,s=!1){let n,r;return oe(t)?n=t:(n=t.get,r=t.set),new Du(n,r,s)}const Mn={},tr=new WeakMap;let as;function Nu(t,e=!1,s=as){if(s){let n=tr.get(s);n||tr.set(s,n=[]),n.push(t)}}function Mu(t,e,s=ke){const{immediate:n,deep:r,once:o,scheduler:i,augmentJob:a,call:l}=s,c=w=>r?w:lt(w)||r===!1||r===0?It(w,1):It(w);let d,h,f,p,g=!1,y=!1;if(qe(t)?(h=()=>t.value,g=lt(t)):js(t)?(h=()=>c(t),g=!0):X(t)?(y=!0,g=t.some(w=>js(w)||lt(w)),h=()=>t.map(w=>{if(qe(w))return w.value;if(js(w))return c(w);if(oe(w))return l?l(w,2):w()})):oe(t)?e?h=l?()=>l(t,2):t:h=()=>{if(f){Xt();try{f()}finally{Zt()}}const w=as;as=d;try{return l?l(t,3,[p]):t(p)}finally{as=w}}:h=xt,e&&r){const w=h,T=r===!0?1/0:r;h=()=>It(w(),T)}const E=hu(),C=()=>{d.stop(),E&&E.active&&Eo(E.effects,d)};if(o&&e){const w=e;e=(...T)=>{w(...T),C()}}let _=y?new Array(t.length).fill(Mn):Mn;const k=w=>{if(!(!(d.flags&1)||!d.dirty&&!w))if(e){const T=d.run();if(r||g||(y?T.some((R,j)=>Gt(R,_[j])):Gt(T,_))){f&&f();const R=as;as=d;try{const j=[T,_===Mn?void 0:y&&_[0]===Mn?[]:_,p];l?l(e,3,j):e(...j),_=T}finally{as=R}}}else d.run()};return a&&a(k),d=new Ja(h),d.scheduler=i?()=>i(k,!1):k,p=w=>Nu(w,!1,d),f=d.onStop=()=>{const w=tr.get(d);if(w){if(l)l(w,4);else for(const T of w)T();tr.delete(d)}},e?n?k(!0):_=d.run():i?i(k.bind(null,!0),!0):d.run(),C.pause=d.pause.bind(d),C.resume=d.resume.bind(d),C.stop=C,C}function It(t,e=1/0,s){if(e<=0||!Ce(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,qe(t))It(t.value,e,s);else if(X(t))for(let n=0;n<t.length;n++)It(t[n],e,s);else if(Js(t)||Is(t))t.forEach(n=>{It(n,e,s)});else if(Fa(t)){for(const n in t)It(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&It(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Rn(t,e,s,n){try{return n?t(...n):t()}catch(r){mr(r,e,s)}}function pt(t,e,s,n){if(oe(t)){const r=Rn(t,e,s,n);return r&&Ma(r)&&r.catch(o=>{mr(o,e,s)}),r}if(X(t)){const r=[];for(let o=0;o<t.length;o++)r.push(pt(t[o],e,s,n));return r}}function mr(t,e,s,n=!0){const r=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=e&&e.appContext.config||ke;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const d=a.ec;if(d){for(let h=0;h<d.length;h++)if(d[h](t,l,c)===!1)return}a=a.parent}if(o){Xt(),Rn(o,null,10,[t,l,c]),Zt();return}}Uu(t,s,r,n,i)}function Uu(t,e,s,n=!0,r=!1){if(r)throw t;console.error(t)}const ze=[];let St=-1;const Ls=[];let Bt=null,As=0;const cl=Promise.resolve();let sr=null;function jt(t){const e=sr||cl;return t?e.then(this?t.bind(this):t):e}function Fu(t){let e=St+1,s=ze.length;for(;e<s;){const n=e+s>>>1,r=ze[n],o=bn(r);o<t||o===t&&r.flags&2?e=n+1:s=n}return e}function Lo(t){if(!(t.flags&1)){const e=bn(t),s=ze[ze.length-1];!s||!(t.flags&2)&&e>=bn(s)?ze.push(t):ze.splice(Fu(e),0,t),t.flags|=1,ul()}}function ul(){sr||(sr=cl.then(hl))}function Vu(t){X(t)?Ls.push(...t):Bt&&t.id===-1?Bt.splice(As+1,0,t):t.flags&1||(Ls.push(t),t.flags|=1),ul()}function li(t,e,s=St+1){for(;s<ze.length;s++){const n=ze[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;ze.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function dl(t){if(Ls.length){const e=[...new Set(Ls)].sort((s,n)=>bn(s)-bn(n));if(Ls.length=0,Bt){Bt.push(...e);return}for(Bt=e,As=0;As<Bt.length;As++){const s=Bt[As];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Bt=null,As=0}}const bn=t=>t.id==null?t.flags&2?-1:1/0:t.id;function hl(t){try{for(St=0;St<ze.length;St++){const e=ze[St];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Rn(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;St<ze.length;St++){const e=ze[St];e&&(e.flags&=-2)}St=-1,ze.length=0,dl(),sr=null,(ze.length||Ls.length)&&hl()}}let Me=null,fl=null;function nr(t){const e=Me;return Me=t,fl=t&&t.type.__scopeId||null,e}function re(t,e=Me,s){if(!e||t._n)return t;const n=(...r)=>{n._d&&Si(-1);const o=nr(e);let i;try{i=t(...r)}finally{nr(o),n._d&&Si(1)}return i};return n._n=!0,n._c=!0,n._d=!0,n}function ge(t,e){if(Me===null)return t;const s=wr(Me),n=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[o,i,a,l=ke]=e[r];o&&(oe(o)&&(o={mounted:o,updated:o}),o.deep&&It(i),n.push({dir:o,instance:s,value:i,oldValue:void 0,arg:a,modifiers:l}))}return t}function ss(t,e,s,n){const r=t.dirs,o=e&&e.dirs;for(let i=0;i<r.length;i++){const a=r[i];o&&(a.oldValue=o[i].value);let l=a.dir[n];l&&(Xt(),pt(l,s,8,[t.el,a,t,e]),Zt())}}const pl=Symbol("_vte"),ml=t=>t.__isTeleport,cn=t=>t&&(t.disabled||t.disabled===""),ci=t=>t&&(t.defer||t.defer===""),ui=t=>typeof SVGElement<"u"&&t instanceof SVGElement,di=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Zr=(t,e)=>{const s=t&&t.to;return Oe(s)?e?e(s):null:s},gl={name:"Teleport",__isTeleport:!0,process(t,e,s,n,r,o,i,a,l,c){const{mc:d,pc:h,pbc:f,o:{insert:p,querySelector:g,createText:y,createComment:E}}=c,C=cn(e.props);let{shapeFlag:_,children:k,dynamicChildren:w}=e;if(t==null){const T=e.el=y(""),R=e.anchor=y("");p(T,s,n),p(R,s,n);const j=(U,Q)=>{_&16&&(r&&r.isCE&&(r.ce._teleportTarget=U),d(k,U,Q,r,o,i,a,l))},ee=()=>{const U=e.target=Zr(e.props,g),Q=vl(U,e,y,p);U&&(i!=="svg"&&ui(U)?i="svg":i!=="mathml"&&di(U)&&(i="mathml"),C||(j(U,Q),Gn(e,!1)))};C&&(j(s,R),Gn(e,!0)),ci(e.props)?Ke(()=>{ee(),e.el.__isMounted=!0},o):ee()}else{if(ci(e.props)&&!t.el.__isMounted){Ke(()=>{gl.process(t,e,s,n,r,o,i,a,l,c),delete t.el.__isMounted},o);return}e.el=t.el,e.targetStart=t.targetStart;const T=e.anchor=t.anchor,R=e.target=t.target,j=e.targetAnchor=t.targetAnchor,ee=cn(t.props),U=ee?s:R,Q=ee?T:j;if(i==="svg"||ui(R)?i="svg":(i==="mathml"||di(R))&&(i="mathml"),w?(f(t.dynamicChildren,w,U,r,o,i,a),Uo(t,e,!0)):l||h(t,e,U,Q,r,o,i,a,!1),C)ee?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Un(e,s,T,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const se=e.target=Zr(e.props,g);se&&Un(e,se,null,c,0)}else ee&&Un(e,R,j,c,1);Gn(e,C)}},remove(t,e,s,{um:n,o:{remove:r}},o){const{shapeFlag:i,children:a,anchor:l,targetStart:c,targetAnchor:d,target:h,props:f}=t;if(h&&(r(c),r(d)),o&&r(l),i&16){const p=o||!cn(f);for(let g=0;g<a.length;g++){const y=a[g];n(y,e,s,p,!!y.dynamicChildren)}}},move:Un,hydrate:Bu};function Un(t,e,s,{o:{insert:n},m:r},o=2){o===0&&n(t.targetAnchor,e,s);const{el:i,anchor:a,shapeFlag:l,children:c,props:d}=t,h=o===2;if(h&&n(i,e,s),(!h||cn(d))&&l&16)for(let f=0;f<c.length;f++)r(c[f],e,s,2);h&&n(a,e,s)}function Bu(t,e,s,n,r,o,{o:{nextSibling:i,parentNode:a,querySelector:l,insert:c,createText:d}},h){const f=e.target=Zr(e.props,l);if(f){const p=cn(e.props),g=f._lpa||f.firstChild;if(e.shapeFlag&16)if(p)e.anchor=h(i(t),e,a(t),s,n,r,o),e.targetStart=g,e.targetAnchor=g&&i(g);else{e.anchor=i(t);let y=g;for(;y;){if(y&&y.nodeType===8){if(y.data==="teleport start anchor")e.targetStart=y;else if(y.data==="teleport anchor"){e.targetAnchor=y,f._lpa=e.targetAnchor&&i(e.targetAnchor);break}}y=i(y)}e.targetAnchor||vl(f,e,d,c),h(g&&i(g),e,f,s,n,r,o)}Gn(e,p)}return e.anchor&&i(e.anchor)}const Hu=gl;function Gn(t,e){const s=t.ctx;if(s&&s.ut){let n,r;for(e?(n=t.el,r=t.anchor):(n=t.targetStart,r=t.targetAnchor);n&&n!==r;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function vl(t,e,s,n){const r=e.targetStart=s(""),o=e.targetAnchor=s("");return r[pl]=o,t&&(n(r,t),n(o,t)),o}const Ht=Symbol("_leaveCb"),Fn=Symbol("_enterCb");function qu(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return es(()=>{t.isMounted=!0}),xl(()=>{t.isUnmounting=!0}),t}const at=[Function,Array],_l={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:at,onEnter:at,onAfterEnter:at,onEnterCancelled:at,onBeforeLeave:at,onLeave:at,onAfterLeave:at,onLeaveCancelled:at,onBeforeAppear:at,onAppear:at,onAfterAppear:at,onAppearCancelled:at},yl=t=>{const e=t.subTree;return e.component?yl(e.component):e},Ju={name:"BaseTransition",props:_l,setup(t,{slots:e}){const s=Ud(),n=qu();return()=>{const r=e.default&&kl(e.default(),!0);if(!r||!r.length)return;const o=bl(r),i=me(t),{mode:a}=i;if(n.isLeaving)return Rr(o);const l=hi(o);if(!l)return Rr(o);let c=eo(l,i,n,s,h=>c=h);l.type!==We&&wn(l,c);let d=s.subTree&&hi(s.subTree);if(d&&d.type!==We&&!cs(l,d)&&yl(s).type!==We){let h=eo(d,i,n,s);if(wn(d,h),a==="out-in"&&l.type!==We)return n.isLeaving=!0,h.afterLeave=()=>{n.isLeaving=!1,s.job.flags&8||s.update(),delete h.afterLeave,d=void 0},Rr(o);a==="in-out"&&l.type!==We?h.delayLeave=(f,p,g)=>{const y=wl(n,d);y[String(d.key)]=d,f[Ht]=()=>{p(),f[Ht]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return o}}};function bl(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==We){e=s;break}}return e}const Ku=Ju;function wl(t,e){const{leavingVNodes:s}=t;let n=s.get(e.type);return n||(n=Object.create(null),s.set(e.type,n)),n}function eo(t,e,s,n,r){const{appear:o,mode:i,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:h,onBeforeLeave:f,onLeave:p,onAfterLeave:g,onLeaveCancelled:y,onBeforeAppear:E,onAppear:C,onAfterAppear:_,onAppearCancelled:k}=e,w=String(t.key),T=wl(s,t),R=(U,Q)=>{U&&pt(U,n,9,Q)},j=(U,Q)=>{const se=Q[1];R(U,Q),X(U)?U.every(H=>H.length<=1)&&se():U.length<=1&&se()},ee={mode:i,persisted:a,beforeEnter(U){let Q=l;if(!s.isMounted)if(o)Q=E||l;else return;U[Ht]&&U[Ht](!0);const se=T[w];se&&cs(t,se)&&se.el[Ht]&&se.el[Ht](),R(Q,[U])},enter(U){let Q=c,se=d,H=h;if(!s.isMounted)if(o)Q=C||c,se=_||d,H=k||h;else return;let N=!1;const G=U[Fn]=we=>{N||(N=!0,we?R(H,[U]):R(se,[U]),ee.delayedLeave&&ee.delayedLeave(),U[Fn]=void 0)};Q?j(Q,[U,G]):G()},leave(U,Q){const se=String(t.key);if(U[Fn]&&U[Fn](!0),s.isUnmounting)return Q();R(f,[U]);let H=!1;const N=U[Ht]=G=>{H||(H=!0,Q(),G?R(y,[U]):R(g,[U]),U[Ht]=void 0,T[se]===t&&delete T[se])};T[se]=t,p?j(p,[U,N]):N()},clone(U){const Q=eo(U,e,s,n,r);return r&&r(Q),Q}};return ee}function Rr(t){if(gr(t))return t=Qt(t),t.children=null,t}function hi(t){if(!gr(t))return ml(t.type)&&t.children?bl(t.children):t;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&oe(s.default))return s.default()}}function wn(t,e){t.shapeFlag&6&&t.component?(t.transition=e,wn(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function kl(t,e=!1,s){let n=[],r=0;for(let o=0;o<t.length;o++){let i=t[o];const a=s==null?i.key:String(s)+String(i.key!=null?i.key:o);i.type===ue?(i.patchFlag&128&&r++,n=n.concat(kl(i.children,e,a))):(e||i.type!==We)&&n.push(a!=null?Qt(i,{key:a}):i)}if(r>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function No(t,e){return oe(t)?Ue({name:t.name},e,{setup:t}):t}function Sl(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function rr(t,e,s,n,r=!1){if(X(t)){t.forEach((g,y)=>rr(g,e&&(X(e)?e[y]:e),s,n,r));return}if(Ns(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&rr(t,e,s,n.component.subTree);return}const o=n.shapeFlag&4?wr(n.component):n.el,i=r?null:o,{i:a,r:l}=t,c=e&&e.r,d=a.refs===ke?a.refs={}:a.refs,h=a.setupState,f=me(h),p=h===ke?()=>!1:g=>_e(f,g);if(c!=null&&c!==l&&(Oe(c)?(d[c]=null,p(c)&&(h[c]=null)):qe(c)&&(c.value=null)),oe(l))Rn(l,a,12,[i,d]);else{const g=Oe(l),y=qe(l);if(g||y){const E=()=>{if(t.f){const C=g?p(l)?h[l]:d[l]:l.value;r?X(C)&&Eo(C,o):X(C)?C.includes(o)||C.push(o):g?(d[l]=[o],p(l)&&(h[l]=d[l])):(l.value=[o],t.k&&(d[t.k]=l.value))}else g?(d[l]=i,p(l)&&(h[l]=i)):y&&(l.value=i,t.k&&(d[t.k]=i))};i?(E.id=-1,Ke(E,s)):E()}}}fr().requestIdleCallback;fr().cancelIdleCallback;const Ns=t=>!!t.type.__asyncLoader,gr=t=>t.type.__isKeepAlive;function zu(t,e){Cl(t,"a",e)}function Wu(t,e){Cl(t,"da",e)}function Cl(t,e,s=Fe){const n=t.__wdc||(t.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(vr(e,n,s),s){let r=s.parent;for(;r&&r.parent;)gr(r.parent.vnode)&&Gu(n,e,s,r),r=r.parent}}function Gu(t,e,s,n){const r=vr(e,t,n,!0);_r(()=>{Eo(n[e],r)},s)}function vr(t,e,s=Fe,n=!1){if(s){const r=s[t]||(s[t]=[]),o=e.__weh||(e.__weh=(...i)=>{Xt();const a=In(s),l=pt(e,s,t,i);return a(),Zt(),l});return n?r.unshift(o):r.push(o),o}}const Nt=t=>(e,s=Fe)=>{(!Cn||t==="sp")&&vr(t,(...n)=>e(...n),s)},Qu=Nt("bm"),es=Nt("m"),Yu=Nt("bu"),Xu=Nt("u"),xl=Nt("bum"),_r=Nt("um"),Zu=Nt("sp"),ed=Nt("rtg"),td=Nt("rtc");function sd(t,e=Fe){vr("ec",t,e)}const El="components";function Ge(t,e){return Al(El,t,!0,e)||t}const Tl=Symbol.for("v-ndc");function nd(t){return Oe(t)?Al(El,t,!1)||t:t||Tl}function Al(t,e,s=!0,n=!1){const r=Me||Fe;if(r){const o=r.type;{const a=qd(o,!1);if(a&&(a===e||a===ct(e)||a===hr(ct(e))))return o}const i=fi(r[t]||o[t],e)||fi(r.appContext[t],e);return!i&&n?o:i}}function fi(t,e){return t&&(t[e]||t[ct(e)]||t[hr(ct(e))])}function Pe(t,e,s,n){let r;const o=s,i=X(t);if(i||Oe(t)){const a=i&&js(t);let l=!1;a&&(l=!lt(t),t=pr(t)),r=new Array(t.length);for(let c=0,d=t.length;c<d;c++)r[c]=e(l?He(t[c]):t[c],c,void 0,o)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,o)}else if(Ce(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,o));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];r[l]=e(t[d],d,l,o)}}else r=[];return r}function pi(t,e,s={},n,r){if(Me.ce||Me.parent&&Ns(Me.parent)&&Me.parent.ce)return e!=="default"&&(s.name=e),S(),Lt(ue,null,[W("slot",s,n&&n())],64);let o=t[e];o&&o._c&&(o._d=!1),S();const i=o&&$l(o(s)),a=s.key||i&&i.key,l=Lt(ue,{key:(a&&!ft(a)?a:`_${e}`)+(!i&&n?"_fb":"")},i||(n?n():[]),i&&t._===1?64:-2);return o&&o._c&&(o._d=!0),l}function $l(t){return t.some(e=>Sn(e)?!(e.type===We||e.type===ue&&!$l(e.children)):!0)?t:null}const to=t=>t?Gl(t)?wr(t):to(t.parent):null,un=Ue(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>to(t.parent),$root:t=>to(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Ol(t),$forceUpdate:t=>t.f||(t.f=()=>{Lo(t.update)}),$nextTick:t=>t.n||(t.n=jt.bind(t.proxy)),$watch:t=>Cd.bind(t)}),Ir=(t,e)=>t!==ke&&!t.__isScriptSetup&&_e(t,e),rd={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:o,accessCache:i,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const p=i[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return r[e];case 4:return s[e];case 3:return o[e]}else{if(Ir(n,e))return i[e]=1,n[e];if(r!==ke&&_e(r,e))return i[e]=2,r[e];if((c=t.propsOptions[0])&&_e(c,e))return i[e]=3,o[e];if(s!==ke&&_e(s,e))return i[e]=4,s[e];so&&(i[e]=0)}}const d=un[e];let h,f;if(d)return e==="$attrs"&&Be(t.attrs,"get",""),d(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(s!==ke&&_e(s,e))return i[e]=4,s[e];if(f=l.config.globalProperties,_e(f,e))return f[e]},set({_:t},e,s){const{data:n,setupState:r,ctx:o}=t;return Ir(r,e)?(r[e]=s,!0):n!==ke&&_e(n,e)?(n[e]=s,!0):_e(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:r,propsOptions:o}},i){let a;return!!s[i]||t!==ke&&_e(t,i)||Ir(e,i)||(a=o[0])&&_e(a,i)||_e(n,i)||_e(un,i)||_e(r.config.globalProperties,i)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:_e(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function mi(t){return X(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let so=!0;function od(t){const e=Ol(t),s=t.proxy,n=t.ctx;so=!1,e.beforeCreate&&gi(e.beforeCreate,t,"bc");const{data:r,computed:o,methods:i,watch:a,provide:l,inject:c,created:d,beforeMount:h,mounted:f,beforeUpdate:p,updated:g,activated:y,deactivated:E,beforeDestroy:C,beforeUnmount:_,destroyed:k,unmounted:w,render:T,renderTracked:R,renderTriggered:j,errorCaptured:ee,serverPrefetch:U,expose:Q,inheritAttrs:se,components:H,directives:N,filters:G}=e;if(c&&id(c,n,null),i)for(const le in i){const pe=i[le];oe(pe)&&(n[le]=pe.bind(s))}if(r){const le=r.call(s,s);Ce(le)&&(t.data=Ks(le))}if(so=!0,o)for(const le in o){const pe=o[le],ut=oe(pe)?pe.bind(s,s):oe(pe.get)?pe.get.bind(s,s):xt,vt=!oe(pe)&&oe(pe.set)?pe.set.bind(s):xt,tt=je({get:ut,set:vt});Object.defineProperty(n,le,{enumerable:!0,configurable:!0,get:()=>tt.value,set:q=>tt.value=q})}if(a)for(const le in a)Pl(a[le],n,s,le);if(l){const le=oe(l)?l.call(s):l;Reflect.ownKeys(le).forEach(pe=>{Qn(pe,le[pe])})}d&&gi(d,t,"c");function xe(le,pe){X(pe)?pe.forEach(ut=>le(ut.bind(s))):pe&&le(pe.bind(s))}if(xe(Qu,h),xe(es,f),xe(Yu,p),xe(Xu,g),xe(zu,y),xe(Wu,E),xe(sd,ee),xe(td,R),xe(ed,j),xe(xl,_),xe(_r,w),xe(Zu,U),X(Q))if(Q.length){const le=t.exposed||(t.exposed={});Q.forEach(pe=>{Object.defineProperty(le,pe,{get:()=>s[pe],set:ut=>s[pe]=ut})})}else t.exposed||(t.exposed={});T&&t.render===xt&&(t.render=T),se!=null&&(t.inheritAttrs=se),H&&(t.components=H),N&&(t.directives=N),U&&Sl(t)}function id(t,e,s=xt){X(t)&&(t=no(t));for(const n in t){const r=t[n];let o;Ce(r)?"default"in r?o=Qe(r.from||n,r.default,!0):o=Qe(r.from||n):o=Qe(r),qe(o)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):e[n]=o}}function gi(t,e,s){pt(X(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function Pl(t,e,s,n){let r=n.includes(".")?ql(s,n):()=>s[n];if(Oe(t)){const o=e[t];oe(o)&&Ze(r,o)}else if(oe(t))Ze(r,t.bind(s));else if(Ce(t))if(X(t))t.forEach(o=>Pl(o,e,s,n));else{const o=oe(t.handler)?t.handler.bind(s):e[t.handler];oe(o)&&Ze(r,o,t)}}function Ol(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:r,optionsCache:o,config:{optionMergeStrategies:i}}=t.appContext,a=o.get(e);let l;return a?l=a:!r.length&&!s&&!n?l=e:(l={},r.length&&r.forEach(c=>or(l,c,i,!0)),or(l,e,i)),Ce(e)&&o.set(e,l),l}function or(t,e,s,n=!1){const{mixins:r,extends:o}=e;o&&or(t,o,s,!0),r&&r.forEach(i=>or(t,i,s,!0));for(const i in e)if(!(n&&i==="expose")){const a=ad[i]||s&&s[i];t[i]=a?a(t[i],e[i]):e[i]}return t}const ad={data:vi,props:_i,emits:_i,methods:nn,computed:nn,beforeCreate:Je,created:Je,beforeMount:Je,mounted:Je,beforeUpdate:Je,updated:Je,beforeDestroy:Je,beforeUnmount:Je,destroyed:Je,unmounted:Je,activated:Je,deactivated:Je,errorCaptured:Je,serverPrefetch:Je,components:nn,directives:nn,watch:cd,provide:vi,inject:ld};function vi(t,e){return e?t?function(){return Ue(oe(t)?t.call(this,this):t,oe(e)?e.call(this,this):e)}:e:t}function ld(t,e){return nn(no(t),no(e))}function no(t){if(X(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Je(t,e){return t?[...new Set([].concat(t,e))]:e}function nn(t,e){return t?Ue(Object.create(null),t,e):e}function _i(t,e){return t?X(t)&&X(e)?[...new Set([...t,...e])]:Ue(Object.create(null),mi(t),mi(e??{})):e}function cd(t,e){if(!t)return e;if(!e)return t;const s=Ue(Object.create(null),t);for(const n in e)s[n]=Je(t[n],e[n]);return s}function Rl(){return{app:null,config:{isNativeTag:Xc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ud=0;function dd(t,e){return function(n,r=null){oe(n)||(n=Ue({},n)),r!=null&&!Ce(r)&&(r=null);const o=Rl(),i=new WeakSet,a=[];let l=!1;const c=o.app={_uid:ud++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:Kd,get config(){return o.config},set config(d){},use(d,...h){return i.has(d)||(d&&oe(d.install)?(i.add(d),d.install(c,...h)):oe(d)&&(i.add(d),d(c,...h))),c},mixin(d){return o.mixins.includes(d)||o.mixins.push(d),c},component(d,h){return h?(o.components[d]=h,c):o.components[d]},directive(d,h){return h?(o.directives[d]=h,c):o.directives[d]},mount(d,h,f){if(!l){const p=c._ceVNode||W(n,r);return p.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),t(p,d,f),l=!0,c._container=d,d.__vue_app__=c,wr(p.component)}},onUnmount(d){a.push(d)},unmount(){l&&(pt(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(d,h){return o.provides[d]=h,c},runWithContext(d){const h=Ms;Ms=c;try{return d()}finally{Ms=h}}};return c}}let Ms=null;function Qn(t,e){if(Fe){let s=Fe.provides;const n=Fe.parent&&Fe.parent.provides;n===s&&(s=Fe.provides=Object.create(n)),s[t]=e}}function Qe(t,e,s=!1){const n=Fe||Me;if(n||Ms){const r=Ms?Ms._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return s&&oe(e)?e.call(n&&n.proxy):e}}const Il={},jl=()=>Object.create(Il),Dl=t=>Object.getPrototypeOf(t)===Il;function hd(t,e,s,n=!1){const r={},o=jl();t.propsDefaults=Object.create(null),Ll(t,e,r,o);for(const i in t.propsOptions[0])i in r||(r[i]=void 0);s?t.props=n?r:ol(r):t.type.props?t.props=r:t.props=o,t.attrs=o}function fd(t,e,s,n){const{props:r,attrs:o,vnode:{patchFlag:i}}=t,a=me(r),[l]=t.propsOptions;let c=!1;if((n||i>0)&&!(i&16)){if(i&8){const d=t.vnode.dynamicProps;for(let h=0;h<d.length;h++){let f=d[h];if(yr(t.emitsOptions,f))continue;const p=e[f];if(l)if(_e(o,f))p!==o[f]&&(o[f]=p,c=!0);else{const g=ct(f);r[g]=ro(l,a,g,p,t,!1)}else p!==o[f]&&(o[f]=p,c=!0)}}}else{Ll(t,e,r,o)&&(c=!0);let d;for(const h in a)(!e||!_e(e,h)&&((d=Yt(h))===h||!_e(e,d)))&&(l?s&&(s[h]!==void 0||s[d]!==void 0)&&(r[h]=ro(l,a,h,void 0,t,!0)):delete r[h]);if(o!==a)for(const h in o)(!e||!_e(e,h))&&(delete o[h],c=!0)}c&&Rt(t.attrs,"set","")}function Ll(t,e,s,n){const[r,o]=t.propsOptions;let i=!1,a;if(e)for(let l in e){if(on(l))continue;const c=e[l];let d;r&&_e(r,d=ct(l))?!o||!o.includes(d)?s[d]=c:(a||(a={}))[d]=c:yr(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,i=!0)}if(o){const l=me(s),c=a||ke;for(let d=0;d<o.length;d++){const h=o[d];s[h]=ro(r,l,h,c[h],t,!_e(c,h))}}return i}function ro(t,e,s,n,r,o){const i=t[s];if(i!=null){const a=_e(i,"default");if(a&&n===void 0){const l=i.default;if(i.type!==Function&&!i.skipFactory&&oe(l)){const{propsDefaults:c}=r;if(s in c)n=c[s];else{const d=In(r);n=c[s]=l.call(null,e),d()}}else n=l;r.ce&&r.ce._setProp(s,n)}i[0]&&(o&&!a?n=!1:i[1]&&(n===""||n===Yt(s))&&(n=!0))}return n}const pd=new WeakMap;function Nl(t,e,s=!1){const n=s?pd:e.propsCache,r=n.get(t);if(r)return r;const o=t.props,i={},a=[];let l=!1;if(!oe(t)){const d=h=>{l=!0;const[f,p]=Nl(h,e,!0);Ue(i,f),p&&a.push(...p)};!s&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!o&&!l)return Ce(t)&&n.set(t,Rs),Rs;if(X(o))for(let d=0;d<o.length;d++){const h=ct(o[d]);yi(h)&&(i[h]=ke)}else if(o)for(const d in o){const h=ct(d);if(yi(h)){const f=o[d],p=i[h]=X(f)||oe(f)?{type:f}:Ue({},f),g=p.type;let y=!1,E=!0;if(X(g))for(let C=0;C<g.length;++C){const _=g[C],k=oe(_)&&_.name;if(k==="Boolean"){y=!0;break}else k==="String"&&(E=!1)}else y=oe(g)&&g.name==="Boolean";p[0]=y,p[1]=E,(y||_e(p,"default"))&&a.push(h)}}const c=[i,a];return Ce(t)&&n.set(t,c),c}function yi(t){return t[0]!=="$"&&!on(t)}const Ml=t=>t[0]==="_"||t==="$stable",Mo=t=>X(t)?t.map(Ct):[Ct(t)],md=(t,e,s)=>{if(e._n)return e;const n=re((...r)=>Mo(e(...r)),s);return n._c=!1,n},Ul=(t,e,s)=>{const n=t._ctx;for(const r in t){if(Ml(r))continue;const o=t[r];if(oe(o))e[r]=md(r,o,n);else if(o!=null){const i=Mo(o);e[r]=()=>i}}},Fl=(t,e)=>{const s=Mo(e);t.slots.default=()=>s},Vl=(t,e,s)=>{for(const n in e)(s||n!=="_")&&(t[n]=e[n])},gd=(t,e,s)=>{const n=t.slots=jl();if(t.vnode.shapeFlag&32){const r=e._;r?(Vl(n,e,s),s&&Va(n,"_",r,!0)):Ul(e,n)}else e&&Fl(t,e)},vd=(t,e,s)=>{const{vnode:n,slots:r}=t;let o=!0,i=ke;if(n.shapeFlag&32){const a=e._;a?s&&a===1?o=!1:Vl(r,e,s):(o=!e.$stable,Ul(e,r)),i=e}else e&&(Fl(t,e),i={default:1});if(o)for(const a in r)!Ml(a)&&i[a]==null&&delete r[a]},Ke=Od;function _d(t){return yd(t)}function yd(t,e){const s=fr();s.__VUE__=!0;const{insert:n,remove:r,patchProp:o,createElement:i,createText:a,createComment:l,setText:c,setElementText:d,parentNode:h,nextSibling:f,setScopeId:p=xt,insertStaticContent:g}=t,y=(m,v,b,$=null,I=null,O=null,B=void 0,F=null,M=!!v.dynamicChildren)=>{if(m===v)return;m&&!cs(m,v)&&($=A(m),q(m,I,O,!0),m=null),v.patchFlag===-2&&(M=!1,v.dynamicChildren=null);const{type:D,ref:te,shapeFlag:z}=v;switch(D){case br:E(m,v,b,$);break;case We:C(m,v,b,$);break;case Yn:m==null&&_(v,b,$,B);break;case ue:H(m,v,b,$,I,O,B,F,M);break;default:z&1?T(m,v,b,$,I,O,B,F,M):z&6?N(m,v,b,$,I,O,B,F,M):(z&64||z&128)&&D.process(m,v,b,$,I,O,B,F,M,K)}te!=null&&I&&rr(te,m&&m.ref,O,v||m,!v)},E=(m,v,b,$)=>{if(m==null)n(v.el=a(v.children),b,$);else{const I=v.el=m.el;v.children!==m.children&&c(I,v.children)}},C=(m,v,b,$)=>{m==null?n(v.el=l(v.children||""),b,$):v.el=m.el},_=(m,v,b,$)=>{[m.el,m.anchor]=g(m.children,v,b,$,m.el,m.anchor)},k=({el:m,anchor:v},b,$)=>{let I;for(;m&&m!==v;)I=f(m),n(m,b,$),m=I;n(v,b,$)},w=({el:m,anchor:v})=>{let b;for(;m&&m!==v;)b=f(m),r(m),m=b;r(v)},T=(m,v,b,$,I,O,B,F,M)=>{v.type==="svg"?B="svg":v.type==="math"&&(B="mathml"),m==null?R(v,b,$,I,O,B,F,M):U(m,v,I,O,B,F,M)},R=(m,v,b,$,I,O,B,F)=>{let M,D;const{props:te,shapeFlag:z,transition:Z,dirs:ne}=m;if(M=m.el=i(m.type,O,te&&te.is,te),z&8?d(M,m.children):z&16&&ee(m.children,M,null,$,I,jr(m,O),B,F),ne&&ss(m,null,$,"created"),j(M,m,m.scopeId,B,$),te){for(const Ee in te)Ee!=="value"&&!on(Ee)&&o(M,Ee,null,te[Ee],O,$);"value"in te&&o(M,"value",null,te.value,O),(D=te.onVnodeBeforeMount)&&wt(D,$,m)}ne&&ss(m,null,$,"beforeMount");const fe=bd(I,Z);fe&&Z.beforeEnter(M),n(M,v,b),((D=te&&te.onVnodeMounted)||fe||ne)&&Ke(()=>{D&&wt(D,$,m),fe&&Z.enter(M),ne&&ss(m,null,$,"mounted")},I)},j=(m,v,b,$,I)=>{if(b&&p(m,b),$)for(let O=0;O<$.length;O++)p(m,$[O]);if(I){let O=I.subTree;if(v===O||Kl(O.type)&&(O.ssContent===v||O.ssFallback===v)){const B=I.vnode;j(m,B,B.scopeId,B.slotScopeIds,I.parent)}}},ee=(m,v,b,$,I,O,B,F,M=0)=>{for(let D=M;D<m.length;D++){const te=m[D]=F?qt(m[D]):Ct(m[D]);y(null,te,v,b,$,I,O,B,F)}},U=(m,v,b,$,I,O,B)=>{const F=v.el=m.el;let{patchFlag:M,dynamicChildren:D,dirs:te}=v;M|=m.patchFlag&16;const z=m.props||ke,Z=v.props||ke;let ne;if(b&&ns(b,!1),(ne=Z.onVnodeBeforeUpdate)&&wt(ne,b,v,m),te&&ss(v,m,b,"beforeUpdate"),b&&ns(b,!0),(z.innerHTML&&Z.innerHTML==null||z.textContent&&Z.textContent==null)&&d(F,""),D?Q(m.dynamicChildren,D,F,b,$,jr(v,I),O):B||pe(m,v,F,null,b,$,jr(v,I),O,!1),M>0){if(M&16)se(F,z,Z,b,I);else if(M&2&&z.class!==Z.class&&o(F,"class",null,Z.class,I),M&4&&o(F,"style",z.style,Z.style,I),M&8){const fe=v.dynamicProps;for(let Ee=0;Ee<fe.length;Ee++){const be=fe[Ee],st=z[be],Ye=Z[be];(Ye!==st||be==="value")&&o(F,be,st,Ye,I,b)}}M&1&&m.children!==v.children&&d(F,v.children)}else!B&&D==null&&se(F,z,Z,b,I);((ne=Z.onVnodeUpdated)||te)&&Ke(()=>{ne&&wt(ne,b,v,m),te&&ss(v,m,b,"updated")},$)},Q=(m,v,b,$,I,O,B)=>{for(let F=0;F<v.length;F++){const M=m[F],D=v[F],te=M.el&&(M.type===ue||!cs(M,D)||M.shapeFlag&70)?h(M.el):b;y(M,D,te,null,$,I,O,B,!0)}},se=(m,v,b,$,I)=>{if(v!==b){if(v!==ke)for(const O in v)!on(O)&&!(O in b)&&o(m,O,v[O],null,I,$);for(const O in b){if(on(O))continue;const B=b[O],F=v[O];B!==F&&O!=="value"&&o(m,O,F,B,I,$)}"value"in b&&o(m,"value",v.value,b.value,I)}},H=(m,v,b,$,I,O,B,F,M)=>{const D=v.el=m?m.el:a(""),te=v.anchor=m?m.anchor:a("");let{patchFlag:z,dynamicChildren:Z,slotScopeIds:ne}=v;ne&&(F=F?F.concat(ne):ne),m==null?(n(D,b,$),n(te,b,$),ee(v.children||[],b,te,I,O,B,F,M)):z>0&&z&64&&Z&&m.dynamicChildren?(Q(m.dynamicChildren,Z,b,I,O,B,F),(v.key!=null||I&&v===I.subTree)&&Uo(m,v,!0)):pe(m,v,b,te,I,O,B,F,M)},N=(m,v,b,$,I,O,B,F,M)=>{v.slotScopeIds=F,m==null?v.shapeFlag&512?I.ctx.activate(v,b,$,B,M):G(v,b,$,I,O,B,M):we(m,v,M)},G=(m,v,b,$,I,O,B)=>{const F=m.component=Md(m,$,I);if(gr(m)&&(F.ctx.renderer=K),Fd(F,!1,B),F.asyncDep){if(I&&I.registerDep(F,xe,B),!m.el){const M=F.subTree=W(We);C(null,M,v,b)}}else xe(F,m,v,b,I,O,B)},we=(m,v,b)=>{const $=v.component=m.component;if($d(m,v,b))if($.asyncDep&&!$.asyncResolved){le($,v,b);return}else $.next=v,$.update();else v.el=m.el,$.vnode=v},xe=(m,v,b,$,I,O,B)=>{const F=()=>{if(m.isMounted){let{next:z,bu:Z,u:ne,parent:fe,vnode:Ee}=m;{const yt=Bl(m);if(yt){z&&(z.el=Ee.el,le(m,z,B)),yt.asyncDep.then(()=>{m.isUnmounted||F()});return}}let be=z,st;ns(m,!1),z?(z.el=Ee.el,le(m,z,B)):z=Ee,Z&&Wn(Z),(st=z.props&&z.props.onVnodeBeforeUpdate)&&wt(st,fe,z,Ee),ns(m,!0);const Ye=wi(m),_t=m.subTree;m.subTree=Ye,y(_t,Ye,h(_t.el),A(_t),m,I,O),z.el=Ye.el,be===null&&Pd(m,Ye.el),ne&&Ke(ne,I),(st=z.props&&z.props.onVnodeUpdated)&&Ke(()=>wt(st,fe,z,Ee),I)}else{let z;const{el:Z,props:ne}=v,{bm:fe,m:Ee,parent:be,root:st,type:Ye}=m,_t=Ns(v);ns(m,!1),fe&&Wn(fe),!_t&&(z=ne&&ne.onVnodeBeforeMount)&&wt(z,be,v),ns(m,!0);{st.ce&&st.ce._injectChildStyle(Ye);const yt=m.subTree=wi(m);y(null,yt,b,$,m,I,O),v.el=yt.el}if(Ee&&Ke(Ee,I),!_t&&(z=ne&&ne.onVnodeMounted)){const yt=v;Ke(()=>wt(z,be,yt),I)}(v.shapeFlag&256||be&&Ns(be.vnode)&&be.vnode.shapeFlag&256)&&m.a&&Ke(m.a,I),m.isMounted=!0,v=b=$=null}};m.scope.on();const M=m.effect=new Ja(F);m.scope.off();const D=m.update=M.run.bind(M),te=m.job=M.runIfDirty.bind(M);te.i=m,te.id=m.uid,M.scheduler=()=>Lo(te),ns(m,!0),D()},le=(m,v,b)=>{v.component=m;const $=m.vnode.props;m.vnode=v,m.next=null,fd(m,v.props,$,b),vd(m,v.children,b),Xt(),li(m),Zt()},pe=(m,v,b,$,I,O,B,F,M=!1)=>{const D=m&&m.children,te=m?m.shapeFlag:0,z=v.children,{patchFlag:Z,shapeFlag:ne}=v;if(Z>0){if(Z&128){vt(D,z,b,$,I,O,B,F,M);return}else if(Z&256){ut(D,z,b,$,I,O,B,F,M);return}}ne&8?(te&16&&$e(D,I,O),z!==D&&d(b,z)):te&16?ne&16?vt(D,z,b,$,I,O,B,F,M):$e(D,I,O,!0):(te&8&&d(b,""),ne&16&&ee(z,b,$,I,O,B,F,M))},ut=(m,v,b,$,I,O,B,F,M)=>{m=m||Rs,v=v||Rs;const D=m.length,te=v.length,z=Math.min(D,te);let Z;for(Z=0;Z<z;Z++){const ne=v[Z]=M?qt(v[Z]):Ct(v[Z]);y(m[Z],ne,b,null,I,O,B,F,M)}D>te?$e(m,I,O,!0,!1,z):ee(v,b,$,I,O,B,F,M,z)},vt=(m,v,b,$,I,O,B,F,M)=>{let D=0;const te=v.length;let z=m.length-1,Z=te-1;for(;D<=z&&D<=Z;){const ne=m[D],fe=v[D]=M?qt(v[D]):Ct(v[D]);if(cs(ne,fe))y(ne,fe,b,null,I,O,B,F,M);else break;D++}for(;D<=z&&D<=Z;){const ne=m[z],fe=v[Z]=M?qt(v[Z]):Ct(v[Z]);if(cs(ne,fe))y(ne,fe,b,null,I,O,B,F,M);else break;z--,Z--}if(D>z){if(D<=Z){const ne=Z+1,fe=ne<te?v[ne].el:$;for(;D<=Z;)y(null,v[D]=M?qt(v[D]):Ct(v[D]),b,fe,I,O,B,F,M),D++}}else if(D>Z)for(;D<=z;)q(m[D],I,O,!0),D++;else{const ne=D,fe=D,Ee=new Map;for(D=fe;D<=Z;D++){const nt=v[D]=M?qt(v[D]):Ct(v[D]);nt.key!=null&&Ee.set(nt.key,D)}let be,st=0;const Ye=Z-fe+1;let _t=!1,yt=0;const Qs=new Array(Ye);for(D=0;D<Ye;D++)Qs[D]=0;for(D=ne;D<=z;D++){const nt=m[D];if(st>=Ye){q(nt,I,O,!0);continue}let bt;if(nt.key!=null)bt=Ee.get(nt.key);else for(be=fe;be<=Z;be++)if(Qs[be-fe]===0&&cs(nt,v[be])){bt=be;break}bt===void 0?q(nt,I,O,!0):(Qs[bt-fe]=D+1,bt>=yt?yt=bt:_t=!0,y(nt,v[bt],b,null,I,O,B,F,M),st++)}const si=_t?wd(Qs):Rs;for(be=si.length-1,D=Ye-1;D>=0;D--){const nt=fe+D,bt=v[nt],ni=nt+1<te?v[nt+1].el:$;Qs[D]===0?y(null,bt,b,ni,I,O,B,F,M):_t&&(be<0||D!==si[be]?tt(bt,b,ni,2):be--)}}},tt=(m,v,b,$,I=null)=>{const{el:O,type:B,transition:F,children:M,shapeFlag:D}=m;if(D&6){tt(m.component.subTree,v,b,$);return}if(D&128){m.suspense.move(v,b,$);return}if(D&64){B.move(m,v,b,K);return}if(B===ue){n(O,v,b);for(let z=0;z<M.length;z++)tt(M[z],v,b,$);n(m.anchor,v,b);return}if(B===Yn){k(m,v,b);return}if($!==2&&D&1&&F)if($===0)F.beforeEnter(O),n(O,v,b),Ke(()=>F.enter(O),I);else{const{leave:z,delayLeave:Z,afterLeave:ne}=F,fe=()=>n(O,v,b),Ee=()=>{z(O,()=>{fe(),ne&&ne()})};Z?Z(O,fe,Ee):Ee()}else n(O,v,b)},q=(m,v,b,$=!1,I=!1)=>{const{type:O,props:B,ref:F,children:M,dynamicChildren:D,shapeFlag:te,patchFlag:z,dirs:Z,cacheIndex:ne}=m;if(z===-2&&(I=!1),F!=null&&rr(F,null,b,m,!0),ne!=null&&(v.renderCache[ne]=void 0),te&256){v.ctx.deactivate(m);return}const fe=te&1&&Z,Ee=!Ns(m);let be;if(Ee&&(be=B&&B.onVnodeBeforeUnmount)&&wt(be,v,m),te&6)Ve(m.component,b,$);else{if(te&128){m.suspense.unmount(b,$);return}fe&&ss(m,null,v,"beforeUnmount"),te&64?m.type.remove(m,v,b,K,$):D&&!D.hasOnce&&(O!==ue||z>0&&z&64)?$e(D,v,b,!1,!0):(O===ue&&z&384||!I&&te&16)&&$e(M,v,b),$&&Y(m)}(Ee&&(be=B&&B.onVnodeUnmounted)||fe)&&Ke(()=>{be&&wt(be,v,m),fe&&ss(m,null,v,"unmounted")},b)},Y=m=>{const{type:v,el:b,anchor:$,transition:I}=m;if(v===ue){Re(b,$);return}if(v===Yn){w(m);return}const O=()=>{r(b),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(m.shapeFlag&1&&I&&!I.persisted){const{leave:B,delayLeave:F}=I,M=()=>B(b,O);F?F(m.el,O,M):M()}else O()},Re=(m,v)=>{let b;for(;m!==v;)b=f(m),r(m),m=b;r(v)},Ve=(m,v,b)=>{const{bum:$,scope:I,job:O,subTree:B,um:F,m:M,a:D}=m;bi(M),bi(D),$&&Wn($),I.stop(),O&&(O.flags|=8,q(B,m,v,b)),F&&Ke(F,v),Ke(()=>{m.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&m.asyncDep&&!m.asyncResolved&&m.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},$e=(m,v,b,$=!1,I=!1,O=0)=>{for(let B=O;B<m.length;B++)q(m[B],v,b,$,I)},A=m=>{if(m.shapeFlag&6)return A(m.component.subTree);if(m.shapeFlag&128)return m.suspense.next();const v=f(m.anchor||m.el),b=v&&v[pl];return b?f(b):v};let J=!1;const L=(m,v,b)=>{m==null?v._vnode&&q(v._vnode,null,null,!0):y(v._vnode||null,m,v,null,null,null,b),v._vnode=m,J||(J=!0,li(),dl(),J=!1)},K={p:y,um:q,m:tt,r:Y,mt:G,mc:ee,pc:pe,pbc:Q,n:A,o:t};return{render:L,hydrate:void 0,createApp:dd(L)}}function jr({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function ns({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function bd(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Uo(t,e,s=!1){const n=t.children,r=e.children;if(X(n)&&X(r))for(let o=0;o<n.length;o++){const i=n[o];let a=r[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[o]=qt(r[o]),a.el=i.el),!s&&a.patchFlag!==-2&&Uo(i,a)),a.type===br&&(a.el=i.el)}}function wd(t){const e=t.slice(),s=[0];let n,r,o,i,a;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(r=s[s.length-1],t[r]<c){e[n]=r,s.push(n);continue}for(o=0,i=s.length-1;o<i;)a=o+i>>1,t[s[a]]<c?o=a+1:i=a;c<t[s[o]]&&(o>0&&(e[n]=s[o-1]),s[o]=n)}}for(o=s.length,i=s[o-1];o-- >0;)s[o]=i,i=e[i];return s}function Bl(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Bl(e)}function bi(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const kd=Symbol.for("v-scx"),Sd=()=>Qe(kd);function Ze(t,e,s){return Hl(t,e,s)}function Hl(t,e,s=ke){const{immediate:n,deep:r,flush:o,once:i}=s,a=Ue({},s),l=e&&n||!e&&o!=="post";let c;if(Cn){if(o==="sync"){const p=Sd();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=xt,p.resume=xt,p.pause=xt,p}}const d=Fe;a.call=(p,g,y)=>pt(p,d,g,y);let h=!1;o==="post"?a.scheduler=p=>{Ke(p,d&&d.suspense)}:o!=="sync"&&(h=!0,a.scheduler=(p,g)=>{g?p():Lo(p)}),a.augmentJob=p=>{e&&(p.flags|=4),h&&(p.flags|=2,d&&(p.id=d.uid,p.i=d))};const f=Mu(t,e,a);return Cn&&(c?c.push(f):l&&f()),f}function Cd(t,e,s){const n=this.proxy,r=Oe(t)?t.includes(".")?ql(n,t):()=>n[t]:t.bind(n,n);let o;oe(e)?o=e:(o=e.handler,s=e);const i=In(this),a=Hl(r,o.bind(n),s);return i(),a}function ql(t,e){const s=e.split(".");return()=>{let n=t;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const xd=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ct(e)}Modifiers`]||t[`${Yt(e)}Modifiers`];function Ed(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||ke;let r=s;const o=e.startsWith("update:"),i=o&&xd(n,e.slice(7));i&&(i.trim&&(r=s.map(d=>Oe(d)?d.trim():d)),i.number&&(r=s.map(er)));let a,l=n[a=Tr(e)]||n[a=Tr(ct(e))];!l&&o&&(l=n[a=Tr(Yt(e))]),l&&pt(l,t,6,r);const c=n[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,pt(c,t,6,r)}}function Jl(t,e,s=!1){const n=e.emitsCache,r=n.get(t);if(r!==void 0)return r;const o=t.emits;let i={},a=!1;if(!oe(t)){const l=c=>{const d=Jl(c,e,!0);d&&(a=!0,Ue(i,d))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!a?(Ce(t)&&n.set(t,null),null):(X(o)?o.forEach(l=>i[l]=null):Ue(i,o),Ce(t)&&n.set(t,i),i)}function yr(t,e){return!t||!ur(e)?!1:(e=e.slice(2).replace(/Once$/,""),_e(t,e[0].toLowerCase()+e.slice(1))||_e(t,Yt(e))||_e(t,e))}function wi(t){const{type:e,vnode:s,proxy:n,withProxy:r,propsOptions:[o],slots:i,attrs:a,emit:l,render:c,renderCache:d,props:h,data:f,setupState:p,ctx:g,inheritAttrs:y}=t,E=nr(t);let C,_;try{if(s.shapeFlag&4){const w=r||n,T=w;C=Ct(c.call(T,w,d,h,p,f,g)),_=a}else{const w=e;C=Ct(w.length>1?w(h,{attrs:a,slots:i,emit:l}):w(h,null)),_=e.props?a:Td(a)}}catch(w){dn.length=0,mr(w,t,1),C=W(We)}let k=C;if(_&&y!==!1){const w=Object.keys(_),{shapeFlag:T}=k;w.length&&T&7&&(o&&w.some(xo)&&(_=Ad(_,o)),k=Qt(k,_,!1,!0))}return s.dirs&&(k=Qt(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(s.dirs):s.dirs),s.transition&&wn(k,s.transition),C=k,nr(E),C}const Td=t=>{let e;for(const s in t)(s==="class"||s==="style"||ur(s))&&((e||(e={}))[s]=t[s]);return e},Ad=(t,e)=>{const s={};for(const n in t)(!xo(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function $d(t,e,s){const{props:n,children:r,component:o}=t,{props:i,children:a,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?ki(n,i,c):!!i;if(l&8){const d=e.dynamicProps;for(let h=0;h<d.length;h++){const f=d[h];if(i[f]!==n[f]&&!yr(c,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===i?!1:n?i?ki(n,i,c):!0:!!i;return!1}function ki(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const o=n[r];if(e[o]!==t[o]&&!yr(s,o))return!0}return!1}function Pd({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const Kl=t=>t.__isSuspense;function Od(t,e){e&&e.pendingBranch?X(t)?e.effects.push(...t):e.effects.push(t):Vu(t)}const ue=Symbol.for("v-fgt"),br=Symbol.for("v-txt"),We=Symbol.for("v-cmt"),Yn=Symbol.for("v-stc"),dn=[];let it=null;function S(t=!1){dn.push(it=t?null:[])}function Rd(){dn.pop(),it=dn[dn.length-1]||null}let kn=1;function Si(t,e=!1){kn+=t,t<0&&it&&e&&(it.hasOnce=!0)}function zl(t){return t.dynamicChildren=kn>0?it||Rs:null,Rd(),kn>0&&it&&it.push(t),t}function x(t,e,s,n,r,o){return zl(u(t,e,s,n,r,o,!0))}function Lt(t,e,s,n,r){return zl(W(t,e,s,n,r,!0))}function Sn(t){return t?t.__v_isVNode===!0:!1}function cs(t,e){return t.type===e.type&&t.key===e.key}const Wl=({key:t})=>t??null,Xn=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?Oe(t)||qe(t)||oe(t)?{i:Me,r:t,k:e,f:!!s}:t:null);function u(t,e=null,s=null,n=0,r=null,o=t===ue?0:1,i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Wl(e),ref:e&&Xn(e),scopeId:fl,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Me};return a?(Vo(l,s),o&128&&t.normalize(l)):s&&(l.shapeFlag|=Oe(s)?8:16),kn>0&&!i&&it&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&it.push(l),l}const W=Id;function Id(t,e=null,s=null,n=0,r=null,o=!1){if((!t||t===Tl)&&(t=We),Sn(t)){const a=Qt(t,e,!0);return s&&Vo(a,s),kn>0&&!o&&it&&(a.shapeFlag&6?it[it.indexOf(t)]=a:it.push(a)),a.patchFlag=-2,a}if(Jd(t)&&(t=t.__vccOpts),e){e=jd(e);let{class:a,style:l}=e;a&&!Oe(a)&&(e.class=Se(a)),Ce(l)&&(Do(l)&&!X(l)&&(l=Ue({},l)),e.style=Et(l))}const i=Oe(t)?1:Kl(t)?128:ml(t)?64:Ce(t)?4:oe(t)?2:0;return u(t,e,s,n,r,i,o,!0)}function jd(t){return t?Do(t)||Dl(t)?Ue({},t):t:null}function Qt(t,e,s=!1,n=!1){const{props:r,ref:o,patchFlag:i,children:a,transition:l}=t,c=e?Dd(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Wl(c),ref:e&&e.ref?s&&o?X(o)?o.concat(Xn(e)):[o,Xn(e)]:Xn(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ue?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qt(t.ssContent),ssFallback:t.ssFallback&&Qt(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&wn(d,l.clone(d)),d}function he(t=" ",e=0){return W(br,null,t,e)}function Fo(t,e){const s=W(Yn,null,t);return s.staticCount=e,s}function ae(t="",e=!1){return e?(S(),Lt(We,null,t)):W(We,null,t)}function Ct(t){return t==null||typeof t=="boolean"?W(We):X(t)?W(ue,null,t.slice()):Sn(t)?qt(t):W(br,null,String(t))}function qt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Qt(t)}function Vo(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(X(e))s=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),Vo(t,r()),r._c&&(r._d=!0));return}else{s=32;const r=e._;!r&&!Dl(e)?e._ctx=Me:r===3&&Me&&(Me.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else oe(e)?(e={default:e,_ctx:Me},s=32):(e=String(e),n&64?(s=16,e=[he(e)]):s=8);t.children=e,t.shapeFlag|=s}function Dd(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=Se([e.class,n.class]));else if(r==="style")e.style=Et([e.style,n.style]);else if(ur(r)){const o=e[r],i=n[r];i&&o!==i&&!(X(o)&&o.includes(i))&&(e[r]=o?[].concat(o,i):i)}else r!==""&&(e[r]=n[r])}return e}function wt(t,e,s,n=null){pt(t,e,7,[s,n])}const Ld=Rl();let Nd=0;function Md(t,e,s){const n=t.type,r=(e?e.appContext:t.appContext)||Ld,o={uid:Nd++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new du(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Nl(n,r),emitsOptions:Jl(n,r),emit:null,emitted:null,propsDefaults:ke,inheritAttrs:n.inheritAttrs,ctx:ke,data:ke,props:ke,attrs:ke,slots:ke,refs:ke,setupState:ke,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Ed.bind(null,o),t.ce&&t.ce(o),o}let Fe=null;const Ud=()=>Fe||Me;let ir,oo;{const t=fr(),e=(s,n)=>{let r;return(r=t[s])||(r=t[s]=[]),r.push(n),o=>{r.length>1?r.forEach(i=>i(o)):r[0](o)}};ir=e("__VUE_INSTANCE_SETTERS__",s=>Fe=s),oo=e("__VUE_SSR_SETTERS__",s=>Cn=s)}const In=t=>{const e=Fe;return ir(t),t.scope.on(),()=>{t.scope.off(),ir(e)}},Ci=()=>{Fe&&Fe.scope.off(),ir(null)};function Gl(t){return t.vnode.shapeFlag&4}let Cn=!1;function Fd(t,e=!1,s=!1){e&&oo(e);const{props:n,children:r}=t.vnode,o=Gl(t);hd(t,n,o,e),gd(t,r,s);const i=o?Vd(t,e):void 0;return e&&oo(!1),i}function Vd(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,rd);const{setup:n}=s;if(n){Xt();const r=t.setupContext=n.length>1?Hd(t):null,o=In(t),i=Rn(n,t,0,[t.props,r]),a=Ma(i);if(Zt(),o(),(a||t.sp)&&!Ns(t)&&Sl(t),a){if(i.then(Ci,Ci),e)return i.then(l=>{xi(t,l)}).catch(l=>{mr(l,t,0)});t.asyncDep=i}else xi(t,i)}else Ql(t)}function xi(t,e,s){oe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ce(e)&&(t.setupState=ll(e)),Ql(t)}function Ql(t,e,s){const n=t.type;t.render||(t.render=n.render||xt);{const r=In(t);Xt();try{od(t)}finally{Zt(),r()}}}const Bd={get(t,e){return Be(t,"get",""),t[e]}};function Hd(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Bd),slots:t.slots,emit:t.emit,expose:e}}function wr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ll(Ou(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in un)return un[s](t)},has(e,s){return s in e||s in un}})):t.proxy}function qd(t,e=!0){return oe(t)?t.displayName||t.name:t.name||e&&t.__name}function Jd(t){return oe(t)&&"__vccOpts"in t}const je=(t,e)=>Lu(t,e,Cn);function Bo(t,e,s){const n=arguments.length;return n===2?Ce(e)&&!X(e)?Sn(e)?W(t,null,[e]):W(t,e):W(t,null,e):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Sn(s)&&(s=[s]),W(t,e,s))}const Kd="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let io;const Ei=typeof window<"u"&&window.trustedTypes;if(Ei)try{io=Ei.createPolicy("vue",{createHTML:t=>t})}catch{}const Yl=io?t=>io.createHTML(t):t=>t,zd="http://www.w3.org/2000/svg",Wd="http://www.w3.org/1998/Math/MathML",Pt=typeof document<"u"?document:null,Ti=Pt&&Pt.createElement("template"),Gd={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const r=e==="svg"?Pt.createElementNS(zd,t):e==="mathml"?Pt.createElementNS(Wd,t):s?Pt.createElement(t,{is:s}):Pt.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>Pt.createTextNode(t),createComment:t=>Pt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Pt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,r,o){const i=s?s.previousSibling:e.lastChild;if(r&&(r===o||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),s),!(r===o||!(r=r.nextSibling)););else{Ti.innerHTML=Yl(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=Ti.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[i?i.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Mt="transition",Xs="animation",xn=Symbol("_vtc"),Xl={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Qd=Ue({},_l,Xl),Yd=t=>(t.displayName="Transition",t.props=Qd,t),Xd=Yd((t,{slots:e})=>Bo(Ku,Zd(t),e)),rs=(t,e=[])=>{X(t)?t.forEach(s=>s(...e)):t&&t(...e)},Ai=t=>t?X(t)?t.some(e=>e.length>1):t.length>1:!1;function Zd(t){const e={};for(const H in t)H in Xl||(e[H]=t[H]);if(t.css===!1)return e;const{name:s="v",type:n,duration:r,enterFromClass:o=`${s}-enter-from`,enterActiveClass:i=`${s}-enter-active`,enterToClass:a=`${s}-enter-to`,appearFromClass:l=o,appearActiveClass:c=i,appearToClass:d=a,leaveFromClass:h=`${s}-leave-from`,leaveActiveClass:f=`${s}-leave-active`,leaveToClass:p=`${s}-leave-to`}=t,g=eh(r),y=g&&g[0],E=g&&g[1],{onBeforeEnter:C,onEnter:_,onEnterCancelled:k,onLeave:w,onLeaveCancelled:T,onBeforeAppear:R=C,onAppear:j=_,onAppearCancelled:ee=k}=e,U=(H,N,G,we)=>{H._enterCancelled=we,os(H,N?d:a),os(H,N?c:i),G&&G()},Q=(H,N)=>{H._isLeaving=!1,os(H,h),os(H,p),os(H,f),N&&N()},se=H=>(N,G)=>{const we=H?j:_,xe=()=>U(N,H,G);rs(we,[N,xe]),$i(()=>{os(N,H?l:o),At(N,H?d:a),Ai(we)||Pi(N,n,y,xe)})};return Ue(e,{onBeforeEnter(H){rs(C,[H]),At(H,o),At(H,i)},onBeforeAppear(H){rs(R,[H]),At(H,l),At(H,c)},onEnter:se(!1),onAppear:se(!0),onLeave(H,N){H._isLeaving=!0;const G=()=>Q(H,N);At(H,h),H._enterCancelled?(At(H,f),Ii()):(Ii(),At(H,f)),$i(()=>{H._isLeaving&&(os(H,h),At(H,p),Ai(w)||Pi(H,n,E,G))}),rs(w,[H,G])},onEnterCancelled(H){U(H,!1,void 0,!0),rs(k,[H])},onAppearCancelled(H){U(H,!0,void 0,!0),rs(ee,[H])},onLeaveCancelled(H){Q(H),rs(T,[H])}})}function eh(t){if(t==null)return null;if(Ce(t))return[Dr(t.enter),Dr(t.leave)];{const e=Dr(t);return[e,e]}}function Dr(t){return nu(t)}function At(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[xn]||(t[xn]=new Set)).add(e)}function os(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const s=t[xn];s&&(s.delete(e),s.size||(t[xn]=void 0))}function $i(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let th=0;function Pi(t,e,s,n){const r=t._endId=++th,o=()=>{r===t._endId&&n()};if(s!=null)return setTimeout(o,s);const{type:i,timeout:a,propCount:l}=sh(t,e);if(!i)return n();const c=i+"end";let d=0;const h=()=>{t.removeEventListener(c,f),o()},f=p=>{p.target===t&&++d>=l&&h()};setTimeout(()=>{d<l&&h()},a+1),t.addEventListener(c,f)}function sh(t,e){const s=window.getComputedStyle(t),n=g=>(s[g]||"").split(", "),r=n(`${Mt}Delay`),o=n(`${Mt}Duration`),i=Oi(r,o),a=n(`${Xs}Delay`),l=n(`${Xs}Duration`),c=Oi(a,l);let d=null,h=0,f=0;e===Mt?i>0&&(d=Mt,h=i,f=o.length):e===Xs?c>0&&(d=Xs,h=c,f=l.length):(h=Math.max(i,c),d=h>0?i>c?Mt:Xs:null,f=d?d===Mt?o.length:l.length:0);const p=d===Mt&&/\b(transform|all)(,|$)/.test(n(`${Mt}Property`).toString());return{type:d,timeout:h,propCount:f,hasTransform:p}}function Oi(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,n)=>Ri(s)+Ri(t[n])))}function Ri(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Ii(){return document.body.offsetHeight}function nh(t,e,s){const n=t[xn];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const ar=Symbol("_vod"),Zl=Symbol("_vsh"),$s={beforeMount(t,{value:e},{transition:s}){t[ar]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):Zs(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:n}){!e!=!s&&(n?e?(n.beforeEnter(t),Zs(t,!0),n.enter(t)):n.leave(t,()=>{Zs(t,!1)}):Zs(t,e))},beforeUnmount(t,{value:e}){Zs(t,e)}};function Zs(t,e){t.style.display=e?t[ar]:"none",t[Zl]=!e}const rh=Symbol(""),oh=/(^|;)\s*display\s*:/;function ih(t,e,s){const n=t.style,r=Oe(s);let o=!1;if(s&&!r){if(e)if(Oe(e))for(const i of e.split(";")){const a=i.slice(0,i.indexOf(":")).trim();s[a]==null&&Zn(n,a,"")}else for(const i in e)s[i]==null&&Zn(n,i,"");for(const i in s)i==="display"&&(o=!0),Zn(n,i,s[i])}else if(r){if(e!==s){const i=n[rh];i&&(s+=";"+i),n.cssText=s,o=oh.test(s)}}else e&&t.removeAttribute("style");ar in t&&(t[ar]=o?n.display:"",t[Zl]&&(n.display="none"))}const ji=/\s*!important$/;function Zn(t,e,s){if(X(s))s.forEach(n=>Zn(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=ah(t,e);ji.test(s)?t.setProperty(Yt(n),s.replace(ji,""),"important"):t[n]=s}}const Di=["Webkit","Moz","ms"],Lr={};function ah(t,e){const s=Lr[e];if(s)return s;let n=ct(e);if(n!=="filter"&&n in t)return Lr[e]=n;n=hr(n);for(let r=0;r<Di.length;r++){const o=Di[r]+n;if(o in t)return Lr[e]=o}return e}const Li="http://www.w3.org/1999/xlink";function Ni(t,e,s,n,r,o=cu(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(Li,e.slice(6,e.length)):t.setAttributeNS(Li,e,s):s==null||o&&!Ba(s)?t.removeAttribute(e):t.setAttribute(e,o?"":ft(s)?String(s):s)}function Mi(t,e,s,n,r){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?Yl(s):s);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let i=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=Ba(s):s==null&&a==="string"?(s="",i=!0):a==="number"&&(s=0,i=!0)}try{t[e]=s}catch{}i&&t.removeAttribute(r||e)}function zt(t,e,s,n){t.addEventListener(e,s,n)}function lh(t,e,s,n){t.removeEventListener(e,s,n)}const Ui=Symbol("_vei");function ch(t,e,s,n,r=null){const o=t[Ui]||(t[Ui]={}),i=o[e];if(n&&i)i.value=n;else{const[a,l]=uh(e);if(n){const c=o[e]=fh(n,r);zt(t,a,c,l)}else i&&(lh(t,a,i,l),o[e]=void 0)}}const Fi=/(?:Once|Passive|Capture)$/;function uh(t){let e;if(Fi.test(t)){e={};let n;for(;n=t.match(Fi);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Yt(t.slice(2)),e]}let Nr=0;const dh=Promise.resolve(),hh=()=>Nr||(dh.then(()=>Nr=0),Nr=Date.now());function fh(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;pt(ph(n,s.value),e,5,[n])};return s.value=t,s.attached=hh(),s}function ph(t,e){if(X(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const Vi=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,mh=(t,e,s,n,r,o)=>{const i=r==="svg";e==="class"?nh(t,n,i):e==="style"?ih(t,s,n):ur(e)?xo(e)||ch(t,e,s,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):gh(t,e,n,i))?(Mi(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ni(t,e,n,i,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Oe(n))?Mi(t,ct(e),n,o,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),Ni(t,e,n,i))};function gh(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Vi(e)&&oe(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Vi(e)&&Oe(s)?!1:e in t}const Fs=t=>{const e=t.props["onUpdate:modelValue"]||!1;return X(e)?s=>Wn(e,s):e};function vh(t){t.target.composing=!0}function Bi(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Dt=Symbol("_assign"),De={created(t,{modifiers:{lazy:e,trim:s,number:n}},r){t[Dt]=Fs(r);const o=n||r.props&&r.props.type==="number";zt(t,e?"change":"input",i=>{if(i.target.composing)return;let a=t.value;s&&(a=a.trim()),o&&(a=er(a)),t[Dt](a)}),s&&zt(t,"change",()=>{t.value=t.value.trim()}),e||(zt(t,"compositionstart",vh),zt(t,"compositionend",Bi),zt(t,"change",Bi))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:r,number:o}},i){if(t[Dt]=Fs(i),t.composing)return;const a=(o||t.type==="number")&&!/^0\d/.test(t.value)?er(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||r&&t.value.trim()===l)||(t.value=l))}},Vn={deep:!0,created(t,e,s){t[Dt]=Fs(s),zt(t,"change",()=>{const n=t._modelValue,r=En(t),o=t.checked,i=t[Dt];if(X(n)){const a=Ao(n,r),l=a!==-1;if(o&&!l)i(n.concat(r));else if(!o&&l){const c=[...n];c.splice(a,1),i(c)}}else if(Js(n)){const a=new Set(n);o?a.add(r):a.delete(r),i(a)}else i(ec(t,o))})},mounted:Hi,beforeUpdate(t,e,s){t[Dt]=Fs(s),Hi(t,e,s)}};function Hi(t,{value:e,oldValue:s},n){t._modelValue=e;let r;if(X(e))r=Ao(e,n.props.value)>-1;else if(Js(e))r=e.has(n.props.value);else{if(e===s)return;r=On(e,ec(t,!0))}t.checked!==r&&(t.checked=r)}const qi={deep:!0,created(t,{value:e,modifiers:{number:s}},n){const r=Js(e);zt(t,"change",()=>{const o=Array.prototype.filter.call(t.options,i=>i.selected).map(i=>s?er(En(i)):En(i));t[Dt](t.multiple?r?new Set(o):o:o[0]),t._assigning=!0,jt(()=>{t._assigning=!1})}),t[Dt]=Fs(n)},mounted(t,{value:e}){Ji(t,e)},beforeUpdate(t,e,s){t[Dt]=Fs(s)},updated(t,{value:e}){t._assigning||Ji(t,e)}};function Ji(t,e){const s=t.multiple,n=X(e);if(!(s&&!n&&!Js(e))){for(let r=0,o=t.options.length;r<o;r++){const i=t.options[r],a=En(i);if(s)if(n){const l=typeof a;l==="string"||l==="number"?i.selected=e.some(c=>String(c)===String(a)):i.selected=Ao(e,a)>-1}else i.selected=e.has(a);else if(On(En(i),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function En(t){return"_value"in t?t._value:t.value}function ec(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const _h=["ctrl","shift","alt","meta"],yh={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>_h.some(s=>t[`${s}Key`]&&!e.includes(s))},hn=(t,e)=>{const s=t._withMods||(t._withMods={}),n=e.join(".");return s[n]||(s[n]=(r,...o)=>{for(let i=0;i<e.length;i++){const a=yh[e[i]];if(a&&a(r,e))return}return t(r,...o)})},bh={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ho=(t,e)=>{const s=t._withKeys||(t._withKeys={}),n=e.join(".");return s[n]||(s[n]=r=>{if(!("key"in r))return;const o=Yt(r.key);if(e.some(i=>i===o||bh[i]===o))return t(r)})},wh=Ue({patchProp:mh},Gd);let Ki;function kh(){return Ki||(Ki=_d(wh))}const Sh=(...t)=>{const e=kh().createApp(...t),{mount:s}=e;return e.mount=n=>{const r=xh(n);if(!r)return;const o=e._component;!oe(o)&&!o.render&&!o.template&&(o.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const i=s(r,!1,Ch(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),i},e};function Ch(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function xh(t){return Oe(t)?document.querySelector(t):t}const Eh="modulepreload",Th=function(t,e){return new URL(t,e).href},zi={},Vs=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){const i=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(s.map(c=>{if(c=Th(c,n),c in zi)return;zi[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!n)for(let g=i.length-1;g>=0;g--){const y=i[g];if(y.href===c&&(!d||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":Eh,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((g,y)=>{p.addEventListener("load",g),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return r.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},Ah=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Vs(async()=>{const{default:n}=await Promise.resolve().then(()=>zs);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class qo extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class $h extends qo{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ph extends qo{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Oh extends qo{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ao;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ao||(ao={}));var Rh=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(d){try{c(n.next(d))}catch(h){i(h)}}function l(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};class Ih{constructor(e,{headers:s={},customFetch:n,region:r=ao.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=Ah(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return Rh(this,void 0,void 0,function*(){try{const{headers:r,method:o,body:i}=s;let a={},{region:l}=s;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;i&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=i):typeof i=="string"?(a["Content-Type"]="text/plain",c=i):typeof FormData<"u"&&i instanceof FormData?c=i:(a["Content-Type"]="application/json",c=JSON.stringify(i)));const d=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:c}).catch(g=>{throw new $h(g)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Ph(d);if(!d.ok)throw new Oh(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield d.json():f==="application/octet-stream"?p=yield d.blob():f==="text/event-stream"?p=d:f==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(r){return{data:null,error:r}}})}}function jh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Dh(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),s}var Le={},_s={},ys={},bs={},ws={},ks={},Lh=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Bs=Lh();const Nh=Bs.fetch,tc=Bs.fetch.bind(Bs),sc=Bs.Headers,Mh=Bs.Request,Uh=Bs.Response,zs=Object.freeze(Object.defineProperty({__proto__:null,Headers:sc,Request:Mh,Response:Uh,default:tc,fetch:Nh},Symbol.toStringTag,{value:"Module"})),Fh=Dh(zs);var Bn={},Wi;function nc(){if(Wi)return Bn;Wi=1,Object.defineProperty(Bn,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Bn.default=t,Bn}var Gi;function rc(){if(Gi)return ks;Gi=1;var t=ks&&ks.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ks,"__esModule",{value:!0});const e=t(Fh),s=t(nc());class n{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,i){return this.headers=Object.assign({},this.headers),this.headers[o]=i,this}then(o,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,h,f;let p=null,g=null,y=null,E=c.status,C=c.statusText;if(c.ok){if(this.method!=="HEAD"){const T=await c.text();T===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=T:g=JSON.parse(T))}const k=(d=this.headers.Prefer)===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),w=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");k&&w&&w.length>1&&(y=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(p={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,E=406,C="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const k=await c.text();try{p=JSON.parse(k),Array.isArray(p)&&c.status===404&&(g=[],p=null,E=200,C="OK")}catch{c.status===404&&k===""?(E=204,C="No Content"):p={message:k}}if(p&&this.isMaybeSingle&&(!((f=p==null?void 0:p.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,E=200,C="OK"),p&&this.shouldThrowOnError)throw new s.default(p)}return{error:p,data:g,count:y,status:E,statusText:C}});return this.shouldThrowOnError||(l=l.catch(c=>{var d,h,f;return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(h=c==null?void 0:c.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=c==null?void 0:c.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),l.then(o,i)}returns(){return this}overrideTypes(){return this}}return ks.default=n,ks}var Qi;function oc(){if(Qi)return ws;Qi=1;var t=ws&&ws.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ws,"__esModule",{value:!0});const e=t(rc());class s extends e.default{select(r){let o=!1;const i=(r??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(r,{ascending:o=!0,nullsFirst:i,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${r}.${o?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:o,referencedTable:i=o}={}){const a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${r}`),this}range(r,o,{foreignTable:i,referencedTable:a=i}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${r}`),this.url.searchParams.set(c,`${o-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:r=!1,verbose:o=!1,settings:i=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var d;const h=[r?"analyze":null,o?"verbose":null,i?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.Accept)!==null&&d!==void 0?d:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${f}"; options=${h};`,c==="json"?this:this}rollback(){var r;return((r=this.headers.Prefer)!==null&&r!==void 0?r:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return ws.default=s,ws}var Yi;function Jo(){if(Yi)return bs;Yi=1;var t=bs&&bs.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(bs,"__esModule",{value:!0});const e=t(oc());class s extends e.default{eq(r,o){return this.url.searchParams.append(r,`eq.${o}`),this}neq(r,o){return this.url.searchParams.append(r,`neq.${o}`),this}gt(r,o){return this.url.searchParams.append(r,`gt.${o}`),this}gte(r,o){return this.url.searchParams.append(r,`gte.${o}`),this}lt(r,o){return this.url.searchParams.append(r,`lt.${o}`),this}lte(r,o){return this.url.searchParams.append(r,`lte.${o}`),this}like(r,o){return this.url.searchParams.append(r,`like.${o}`),this}likeAllOf(r,o){return this.url.searchParams.append(r,`like(all).{${o.join(",")}}`),this}likeAnyOf(r,o){return this.url.searchParams.append(r,`like(any).{${o.join(",")}}`),this}ilike(r,o){return this.url.searchParams.append(r,`ilike.${o}`),this}ilikeAllOf(r,o){return this.url.searchParams.append(r,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(r,o){return this.url.searchParams.append(r,`ilike(any).{${o.join(",")}}`),this}is(r,o){return this.url.searchParams.append(r,`is.${o}`),this}in(r,o){const i=Array.from(new Set(o)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(r,`in.(${i})`),this}contains(r,o){return typeof o=="string"?this.url.searchParams.append(r,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(r,`cs.{${o.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(o)}`),this}containedBy(r,o){return typeof o=="string"?this.url.searchParams.append(r,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(r,`cd.{${o.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(o)}`),this}rangeGt(r,o){return this.url.searchParams.append(r,`sr.${o}`),this}rangeGte(r,o){return this.url.searchParams.append(r,`nxl.${o}`),this}rangeLt(r,o){return this.url.searchParams.append(r,`sl.${o}`),this}rangeLte(r,o){return this.url.searchParams.append(r,`nxr.${o}`),this}rangeAdjacent(r,o){return this.url.searchParams.append(r,`adj.${o}`),this}overlaps(r,o){return typeof o=="string"?this.url.searchParams.append(r,`ov.${o}`):this.url.searchParams.append(r,`ov.{${o.join(",")}}`),this}textSearch(r,o,{config:i,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=i===void 0?"":`(${i})`;return this.url.searchParams.append(r,`${l}fts${c}.${o}`),this}match(r){return Object.entries(r).forEach(([o,i])=>{this.url.searchParams.append(o,`eq.${i}`)}),this}not(r,o,i){return this.url.searchParams.append(r,`not.${o}.${i}`),this}or(r,{foreignTable:o,referencedTable:i=o}={}){const a=i?`${i}.or`:"or";return this.url.searchParams.append(a,`(${r})`),this}filter(r,o,i){return this.url.searchParams.append(r,`${o}.${i}`),this}}return bs.default=s,bs}var Xi;function ic(){if(Xi)return ys;Xi=1;var t=ys&&ys.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ys,"__esModule",{value:!0});const e=t(Jo());class s{constructor(r,{headers:o={},schema:i,fetch:a}){this.url=r,this.headers=o,this.schema=i,this.fetch=a}select(r,{head:o=!1,count:i}={}){const a=o?"HEAD":"GET";let l=!1;const c=(r??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",c),i&&(this.headers.Prefer=`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(r,{count:o,defaultToNull:i=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),o&&l.push(`count=${o}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(r)){const c=r.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}upsert(r,{onConflict:o,ignoreDuplicates:i=!1,count:a,defaultToNull:l=!0}={}){const c="POST",d=[`resolution=${i?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&d.push(this.headers.Prefer),a&&d.push(`count=${a}`),l||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(r)){const h=r.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}update(r,{count:o}={}){const i="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),o&&a.push(`count=${o}`),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}delete({count:r}={}){const o="DELETE",i=[];return r&&i.push(`count=${r}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return ys.default=s,ys}var en={},tn={},Zi;function Vh(){return Zi||(Zi=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.version=void 0,tn.version="0.0.0-automated"),tn}var ea;function Bh(){if(ea)return en;ea=1,Object.defineProperty(en,"__esModule",{value:!0}),en.DEFAULT_HEADERS=void 0;const t=Vh();return en.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},en}var ta;function Hh(){if(ta)return _s;ta=1;var t=_s&&_s.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(_s,"__esModule",{value:!0});const e=t(ic()),s=t(Jo()),n=Bh();class r{constructor(i,{headers:a={},schema:l,fetch:c}={}){this.url=i,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=c}from(i){const a=new URL(`${this.url}/${i}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new r(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,a={},{head:l=!1,get:c=!1,count:d}={}){let h;const f=new URL(`${this.url}/rpc/${i}`);let p;l||c?(h=l?"HEAD":"GET",Object.entries(a).filter(([y,E])=>E!==void 0).map(([y,E])=>[y,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([y,E])=>{f.searchParams.append(y,E)})):(h="POST",p=a);const g=Object.assign({},this.headers);return d&&(g.Prefer=`count=${d}`),new s.default({method:h,url:f,headers:g,schema:this.schemaName,body:p,fetch:this.fetch,allowEmpty:!1})}}return _s.default=r,_s}var sa;function qh(){if(sa)return Le;sa=1;var t=Le&&Le.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Le,"__esModule",{value:!0}),Le.PostgrestError=Le.PostgrestBuilder=Le.PostgrestTransformBuilder=Le.PostgrestFilterBuilder=Le.PostgrestQueryBuilder=Le.PostgrestClient=void 0;const e=t(Hh());Le.PostgrestClient=e.default;const s=t(ic());Le.PostgrestQueryBuilder=s.default;const n=t(Jo());Le.PostgrestFilterBuilder=n.default;const r=t(oc());Le.PostgrestTransformBuilder=r.default;const o=t(rc());Le.PostgrestBuilder=o.default;const i=t(nc());return Le.PostgrestError=i.default,Le.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:o.default,PostgrestError:i.default},Le}var Jh=qh();const Kh=jh(Jh),{PostgrestClient:zh,PostgrestQueryBuilder:Ok,PostgrestFilterBuilder:Rk,PostgrestTransformBuilder:Ik,PostgrestBuilder:jk,PostgrestError:Dk}=Kh,Wh="2.11.2",Gh={"X-Client-Info":`realtime-js/${Wh}`},Qh="1.0.0",ac=1e4,Yh=1e3;var Us;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Us||(Us={}));var rt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(rt||(rt={}));var dt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(dt||(dt={}));var lo;(function(t){t.websocket="websocket"})(lo||(lo={}));var us;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(us||(us={}));class Xh{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const r=s.getUint8(1),o=s.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(e.slice(i,i+r));i=i+r;const l=n.decode(e.slice(i,i+o));i=i+o;const c=JSON.parse(n.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class lc{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Te;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Te||(Te={}));const na=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((o,i)=>(o[i]=Zh(i,t,e,r),o),{})},Zh=(t,e,s,n)=>{const r=e.find(a=>a.name===t),o=r==null?void 0:r.type,i=s[t];return o&&!n.includes(o)?cc(o,i):co(i)},cc=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return nf(e,s)}switch(t){case Te.bool:return ef(e);case Te.float4:case Te.float8:case Te.int2:case Te.int4:case Te.int8:case Te.numeric:case Te.oid:return tf(e);case Te.json:case Te.jsonb:return sf(e);case Te.timestamp:return rf(e);case Te.abstime:case Te.date:case Te.daterange:case Te.int4range:case Te.int8range:case Te.money:case Te.reltime:case Te.text:case Te.time:case Te.timestamptz:case Te.timetz:case Te.tsrange:case Te.tstzrange:return co(e);default:return co(e)}},co=t=>t,ef=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},tf=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},sf=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},nf=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let o;const i=t.slice(1,s);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>cc(e,a))}return t},rf=t=>typeof t=="string"?t.replace(" ","T"):t,uc=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Mr{constructor(e,s,n={},r=ac){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ra;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ra||(ra={}));class fn{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fn.syncState(this.state,r,o,i),this.pendingDiffs.forEach(l=>{this.state=fn.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},r=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=fn.syncDiff(this.state,r,o,i),a())}),this.onJoin((r,o,i)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:o,newPresences:i})}),this.onLeave((r,o,i)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const o=this.cloneDeep(e),i=this.transformState(s),a={},l={};return this.map(o,(c,d)=>{i[c]||(l[c]=d)}),this.map(i,(c,d)=>{const h=o[c];if(h){const f=d.map(E=>E.presence_ref),p=h.map(E=>E.presence_ref),g=d.filter(E=>p.indexOf(E.presence_ref)<0),y=h.filter(E=>f.indexOf(E.presence_ref)<0);g.length>0&&(a[c]=g),y.length>0&&(l[c]=y)}else a[c]=d}),this.syncDiff(o,{joins:a,leaves:l},n,r)}static syncDiff(e,s,n,r){const{joins:o,leaves:i}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(o,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}n(a,d,l)}),this.map(i,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=c,r(a,c,l),c.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var oa;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(oa||(oa={}));var ia;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ia||(ia={}));var Ot;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ot||(Ot={}));class Ko{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=rt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Mr(this,dt.join,this.params,this.timeout),this.rejoinTimer=new lc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(dt.reply,{},(r,o)=>{this._trigger(this._replyEventName(o),r)}),this.presence=new fn(this),this.broadcastEndpointURL=uc(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:i,private:a}}=this.params;this._onError(d=>e==null?void 0:e(Ot.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Ot.CLOSED));const l={},c={broadcast:o,presence:i,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(Ot.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,g=[];for(let y=0;y<p;y++){const E=f[y],{filter:{event:C,schema:_,table:k,filter:w}}=E,T=d&&d[y];if(T&&T.event===C&&T.schema===_&&T.table===k&&T.filter===w)g.push(Object.assign(Object.assign({},E),{id:T.id}));else{this.unsubscribe(),e==null||e(Ot.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Ot.SUBSCRIBED);return}}).receive("error",d=>{e==null||e(Ot.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ot.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:i}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,a,l;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(dt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const r=new Mr(this,dt.leave,{},e);r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,s,n){const r=new AbortController,o=setTimeout(()=>r.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(o),i}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Mr(this,e,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,o;const i=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=dt;if(n&&[a,l,c,d].indexOf(i)>=0&&n!==this._joinRef())return;let f=this._onMessage(i,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var g,y,E;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((E=(y=p.filter)===null||y===void 0?void 0:y.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===i}).map(p=>p.callback(f,n)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var g,y,E,C,_,k;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const w=p.id,T=(g=p.filter)===null||g===void 0?void 0:g.event;return w&&((y=s.ids)===null||y===void 0?void 0:y.includes(w))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((E=s.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const w=(_=(C=p==null?void 0:p.filter)===null||C===void 0?void 0:C.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return w==="*"||w===((k=s==null?void 0:s.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:y,table:E,commit_timestamp:C,type:_,errors:k}=g;f=Object.assign(Object.assign({},{schema:y,table:E,commit_timestamp:C,eventType:_,new:{},old:{},errors:k}),this._getPayloadRecords(g))}p.callback(f,n)})}_isClosed(){return this.state===rt.closed}_isJoined(){return this.state===rt.joined}_isJoining(){return this.state===rt.joining}_isLeaving(){return this.state===rt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),o={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var o;return!(((o=r.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Ko.isEqual(r.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(dt.close,{},e)}_onError(e){this._on(dt.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=na(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=na(e.columns,e.old_record)),s}}const of=()=>{},af=typeof WebSocket<"u",lf=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cf{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Gh,this.params={},this.timeout=ac,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=of,this.conn=null,this.sendBuffer=[],this.serializer=new Xh,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...a)=>Vs(async()=>{const{default:l}=await Promise.resolve().then(()=>zs);return{default:l}},void 0,import.meta.url).then(({default:l})=>l(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${e}/${lo.websocket}`,this.httpEndpoint=uc(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(o,i)=>i(JSON.stringify(o)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new lc(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(af){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new uf(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Vs(async()=>{const{default:e}=await import("./browser-CC4VY516.js").then(s=>s.b);return{default:e}},[],import.meta.url).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Qh}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Us.connecting:return us.Connecting;case Us.open:return us.Open;case Us.closing:return us.Closing;default:return us.Closed}}isConnected(){return this.connectionState()===us.Open}channel(e,s={config:{}}){const n=new Ko(`realtime:${e}`,s,this);return this.channels.push(n),n}push(e){const{topic:s,event:n,payload:r,ref:o}=e,i=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${n} (${o})`,r),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let n=null;try{n=JSON.parse(atob(s.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=s,this.channels.forEach(r=>{s&&r.updateJoinPayload({access_token:s}),r.joinedOnce&&r._isJoined()&&r._push(dt.access_token,{access_token:s})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Yh,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:r,payload:o,ref:i}=s;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${r} ${i&&"("+i+")"||""}`,o),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(r,o,i)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(dt.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([lf],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class uf{constructor(e,s,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Us.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class zo extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ne(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class df extends zo{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class uo extends zo{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var hf=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(d){try{c(n.next(d))}catch(h){i(h)}}function l(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const dc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Vs(async()=>{const{default:n}=await Promise.resolve().then(()=>zs);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},ff=()=>hf(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vs(()=>Promise.resolve().then(()=>zs),void 0,import.meta.url)).Response:Response}),ho=t=>{if(Array.isArray(t))return t.map(s=>ho(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[r]=ho(n)}),e};var fs=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(d){try{c(n.next(d))}catch(h){i(h)}}function l(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const Ur=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),pf=(t,e,s)=>fs(void 0,void 0,void 0,function*(){const n=yield ff();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(r=>{e(new df(Ur(r),t.status||500))}).catch(r=>{e(new uo(Ur(r),r))}):e(new uo(Ur(t),t))}),mf=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),s))};function jn(t,e,s,n,r,o){return fs(this,void 0,void 0,function*(){return new Promise((i,a)=>{t(s,mf(e,n,r,o)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>pf(l,a,n))})})}function lr(t,e,s,n){return fs(this,void 0,void 0,function*(){return jn(t,"GET",e,s,n)})}function Jt(t,e,s,n,r){return fs(this,void 0,void 0,function*(){return jn(t,"POST",e,n,r,s)})}function gf(t,e,s,n,r){return fs(this,void 0,void 0,function*(){return jn(t,"PUT",e,n,r,s)})}function vf(t,e,s,n){return fs(this,void 0,void 0,function*(){return jn(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function hc(t,e,s,n,r){return fs(this,void 0,void 0,function*(){return jn(t,"DELETE",e,n,r,s)})}var Xe=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(d){try{c(n.next(d))}catch(h){i(h)}}function l(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const _f={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},aa={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class yf{constructor(e,s={},n,r){this.url=e,this.headers=s,this.bucketId=n,this.fetch=dc(r)}uploadOrUpdate(e,s,n,r){return Xe(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},aa),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=n,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const c=this._removeEmptyFolders(s),d=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:o,headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(o){if(Ne(o))return{data:null,error:o};throw o}})}upload(e,s,n){return Xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return Xe(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",s);try{let l;const c=Object.assign({upsert:aa.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),f=yield h.json();return h.ok?{data:{path:o,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Ne(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return Xe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const o=yield Jt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),i=new URL(this.url+o.url),a=i.searchParams.get("token");if(!a)throw new zo("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}update(e,s,n){return Xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return Xe(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}copy(e,s,n){return Xe(this,void 0,void 0,function*(){try{return{data:{path:(yield Jt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return Xe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),o=yield Jt(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return Xe(this,void 0,void 0,function*(){try{const r=yield Jt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}download(e,s){return Xe(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),i=o?`?${o}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield lr(this.fetch,`${this.url}/${r}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ne(a))return{data:null,error:a};throw a}})}info(e){return Xe(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield lr(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:ho(n),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}exists(e){return Xe(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield vf(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ne(n)&&n instanceof uo){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],o=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&r.push(o);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield hc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}list(e,s,n){return Xe(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},_f),s),{prefix:e||""});return{data:yield Jt(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const bf="2.7.1",wf={"X-Client-Info":`storage-js/${bf}`};var Ss=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(d){try{c(n.next(d))}catch(h){i(h)}}function l(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};class kf{constructor(e,s={},n){this.url=e,this.headers=Object.assign(Object.assign({},wf),s),this.fetch=dc(n)}listBuckets(){return Ss(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ne(e))return{data:null,error:e};throw e}})}getBucket(e){return Ss(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Ss(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Ss(this,void 0,void 0,function*(){try{return{data:yield gf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Ss(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Ss(this,void 0,void 0,function*(){try{return{data:yield hc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}}class Sf extends kf{constructor(e,s={},n){super(e,s,n)}from(e){return new yf(this.url,this.headers,e,this.fetch)}}const Cf="2.49.4";let rn="";typeof Deno<"u"?rn="deno":typeof document<"u"?rn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rn="react-native":rn="node";const xf={"X-Client-Info":`supabase-js-${rn}/${Cf}`},Ef={headers:xf},Tf={schema:"public"},Af={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$f={};var Pf=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(d){try{c(n.next(d))}catch(h){i(h)}}function l(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const Of=t=>{let e;return t?e=t:typeof fetch>"u"?e=tc:e=fetch,(...s)=>e(...s)},Rf=()=>typeof Headers>"u"?sc:Headers,If=(t,e,s)=>{const n=Of(s),r=Rf();return(o,i)=>Pf(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new r(i==null?void 0:i.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},i),{headers:c}))})};var jf=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(d){try{c(n.next(d))}catch(h){i(h)}}function l(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};function Df(t){return t.replace(/\/$/,"")}function Lf(t,e){const{db:s,auth:n,realtime:r,global:o}=t,{db:i,auth:a,realtime:l,global:c}=e,d={db:Object.assign(Object.assign({},i),s),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},c),o),accessToken:()=>jf(this,void 0,void 0,function*(){return""})};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}const fc="2.69.1",Ps=30*1e3,fo=3,Fr=fo*Ps,Nf="http://localhost:9999",Mf="supabase.auth.token",Uf={"X-Client-Info":`gotrue-js/${fc}`},po="X-Supabase-Api-Version",pc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ff=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Vf=6e5;class Wo extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function ie(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Bf extends Wo{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function Hf(t){return ie(t)&&t.name==="AuthApiError"}class mc extends Wo{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class ts extends Wo{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class Ft extends ts{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function qf(t){return ie(t)&&t.name==="AuthSessionMissingError"}class Vr extends ts{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hn extends ts{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qn extends ts{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Jf(t){return ie(t)&&t.name==="AuthImplicitGrantRedirectError"}class la extends ts{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mo extends ts{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Br(t){return ie(t)&&t.name==="AuthRetryableFetchError"}class ca extends ts{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class pn extends ts{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ua="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),da=` 	
\r=`.split(""),Kf=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<da.length;e+=1)t[da[e].charCodeAt(0)]=-2;for(let e=0;e<ua.length;e+=1)t[ua[e].charCodeAt(0)]=e;return t})();function gc(t,e,s){const n=Kf[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function ha(t){const e=[],s=i=>{e.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},o=i=>{Gf(i,n,s)};for(let i=0;i<t.length;i+=1)gc(t.charCodeAt(i),r,o);return e.join("")}function zf(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Wf(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}zf(n,e)}}function Gf(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Qf(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)gc(t.charCodeAt(r),s,n);return new Uint8Array(e)}function Yf(t){const e=[];return Wf(t,s=>e.push(s)),new Uint8Array(e)}function Xf(t){return Math.round(Date.now()/1e3)+t}function Zf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const kt=()=>typeof window<"u"&&typeof document<"u",is={tested:!1,writable:!1},mn=()=>{if(!kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(is.tested)return is.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),is.tested=!0,is.writable=!0}catch{is.tested=!0,is.writable=!1}return is.writable};function ep(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,o)=>{e[o]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const vc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Vs(async()=>{const{default:n}=await Promise.resolve().then(()=>zs);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},tp=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",_c=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Jn=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Kn=async(t,e)=>{await t.removeItem(e)};class kr{constructor(){this.promise=new kr.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}kr.promiseConstructor=Promise;function Hr(t){const e=t.split(".");if(e.length!==3)throw new pn("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Ff.test(e[n]))throw new pn("JWT not in base64url format");return{header:JSON.parse(ha(e[0])),payload:JSON.parse(ha(e[1])),signature:Qf(e[2]),raw:{header:e[0],payload:e[1]}}}async function sp(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function np(t,e){return new Promise((n,r)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await t(o);if(!e(o,null,i)){n(i);return}}catch(i){if(!e(o,i)){r(i);return}}})()})}function rp(t){return("0"+t.toString(16)).substr(-2)}function op(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let o=0;o<56;o++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,rp).join("")}async function ip(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(o=>String.fromCharCode(o)).join("")}async function ap(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await ip(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cs(t,e,s=!1){const n=op();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await _c(t,`${e}-code-verifier`,r);const o=await ap(n);return[o,n===o?"plain":"s256"]}const lp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cp(t){const e=t.headers.get(po);if(!e||!e.match(lp))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function up(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function dp(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var hp=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const ls=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fp=[502,503,504];async function fa(t){var e;if(!tp(t))throw new mo(ls(t),0);if(fp.includes(t.status))throw new mo(ls(t),t.status);let s;try{s=await t.json()}catch(o){throw new mc(ls(o),o)}let n;const r=cp(t);if(r&&r.getTime()>=pc["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new ca(ls(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ft}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new ca(ls(s),t.status,s.weak_password.reasons);throw new Bf(ls(s),t.status||500,n)}const pp=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function de(t,e,s,n){var r;const o=Object.assign({},n==null?void 0:n.headers);o[po]||(o[po]=pc["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await mp(t,e,s+a,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function mp(t,e,s,n,r,o){const i=pp(e,n,r,o);let a;try{a=await t(s,Object.assign({},i))}catch(l){throw console.error(l),new mo(ls(l),0)}if(a.ok||await fa(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await fa(l)}}function Vt(t){var e;let s=null;yp(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Xf(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function pa(t){const e=Vt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Wt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function gp(t){return{data:t,error:null}}function vp(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:o}=t,i=hp(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:o},l=Object.assign({},i);return{data:{properties:a,user:l},error:null}}function _p(t){return t}function yp(t){return t.access_token&&t.refresh_token&&t.expires_in}var bp=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};class wp{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=vc(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await de(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await de(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Wt})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=bp(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await de(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:vp,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ie(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await de(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Wt})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,o,i,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await de(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(o=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:""},xform:_p});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(g.split(";")[1].split("=")[1]);c[`${E}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(ie(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await de(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Wt})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await de(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Wt})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){try{return await de(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Wt})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:s,error:n}=await de(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await de(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}}}const kp={getItem:t=>mn()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{mn()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{mn()&&globalThis.localStorage.removeItem(t)}};function ma(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Sp(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xs={debug:!!(globalThis&&mn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Cp extends yc{}async function xp(t,e,s){xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),xs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Cp(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(xs.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Sp();const Ep={url:Nf,storageKey:Mf,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Uf,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ga(t,e,s){return await s()}class Tn{constructor(e){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Tn.nextInstanceID,Tn.nextInstanceID+=1,this.instanceID>0&&kt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Ep),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new wp({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=vc(r.fetch),this.lock=r.lock||ga,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:kt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=xp:this.lock=ga,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:mn()?this.storage=kp:(this.memoryStorage={},this.storage=ma(this.memoryStorage)):(this.memoryStorage={},this.storage=ma(this.memoryStorage)),kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fc}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=ep(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),kt()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:o}=await this._getSessionFromURL(s,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Jf(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ie(s)?{error:s}:{error:new mc("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const o=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Vt}),{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(ie(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var s,n,r;try{let o;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Cs(this.storage,this.storageKey)),o=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},xform:Vt})}else if("phone"in e){const{phone:d,password:h,options:f}=e;o=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Vt})}else throw new Hn("You must provide either an email or phone number and a password");const{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(ie(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let s;if("email"in e){const{email:o,password:i,options:a}=e;s=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:pa})}else if("phone"in e){const{phone:o,password:i,options:a}=e;s=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:pa})}else throw new Hn("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Vr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,r,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await Jn(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:o,error:i}=await de(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Vt});if(await Kn(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Vr}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:r??null}),error:i})}catch(o){if(ie(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:o,nonce:i}=e,a=await de(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Vt}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Vr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,r,o,i;try{if("email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Cs(this.storage,this.storageKey));const{error:h}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new Hn("You must provide either an email or phone number.")}catch(a){if(ie(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var s,n;try{let r,o;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:a}=await de(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:r,xform:Vt});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,c=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(ie(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var s,n,r;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Cs(this.storage,this.storageKey)),await de(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:gp})}catch(o){if(ie(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Ft;const{error:r}=await de(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:o}=e,{error:i}=await de(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:n,type:r,options:o}=e,{data:i,error:a}=await de(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new Hn("You must provide either an email or phone number and a type")}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Jn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Fr:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,d)=>(!i&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:e},error:null}}const{session:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wt}):await this._useSession(async s=>{var n,r,o;const{data:i,error:a}=s;if(a)throw a;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ft}:await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0,xform:Wt})})}catch(s){if(ie(s))return qf(s)&&(await this._removeSession(),await Kn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:o}=n;if(o)throw o;if(!r.session)throw new Ft;const i=r.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Cs(this.storage,this.storageKey));const{data:c,error:d}=await de(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:i.access_token,xform:Wt});if(d)throw d;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ft;const s=Date.now()/1e3;let n=s,r=!0,o=null;const{payload:i}=Hr(e.access_token);if(i.exp&&(n=i.exp,r=n<=s),r){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(ie(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:i,error:a}=s;if(a)throw a;e=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ft;const{session:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!kt())throw new qn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new la("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qn("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new la("No code detected.");const{data:_,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:o,refresh_token:i,expires_in:a,expires_at:l,token_type:c}=e;if(!o||!a||!i||!c)throw new qn("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=Ps&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);const{data:y,error:E}=await this._getUser(o);if(E)throw E;const C={provider_token:n,provider_refresh_token:r,access_token:o,expires_in:h,expires_at:f,refresh_token:i,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:e.type},error:null}}catch(n){if(ie(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Jn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:o}=s;if(o)return{error:o};const i=(n=r.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:a}=await this.admin.signOut(i,e);if(a&&!(Hf(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Kn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=Zf(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:o},error:i}=s;if(i)throw i;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Cs(this.storage,this.storageKey,!0));try{return await de(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(ie(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:r}=await this._useSession(async o=>{var i,a,l,c,d;const{data:h,error:f}=o;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await de(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return kt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ie(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:o,error:i}=s;if(i)throw i;return await de(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await np(async r=>(r>0&&await sp(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await de(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Vt})),(r,o)=>{const i=200*Math.pow(2,r);return o&&Br(o)&&Date.now()+i-n<Ps})}catch(n){if(this._debug(s,"error",n),ie(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),kt()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Jn(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const r=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Fr;if(this._debug(s,`session has${r?"":" not"} expired with margin of ${Fr}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Br(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Ft;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new kr;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new Ft;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(r,"error",o),ie(o)){const i={session:null,error:o};return Br(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await _c(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Kn(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&kt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ps);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/Ps);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Ps}ms, refresh threshold is ${fo} ticks`),r<=fo&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof yc)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await Cs(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});r.push(a.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);r.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:o}=s;return o?{data:null,error:o}:await de(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:o,error:i}=s;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await de(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:o}=s;if(o)return{data:null,error:o};const{data:i,error:a}=await de(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(s){if(ie(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:o}=s;return o?{data:null,error:o}:await de(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ie(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],r=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:r,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:r},error:o}=e;if(o)return{data:null,error:o};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Hr(r.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(i=>i.kid===e);if(n||(n=this.jwks.keys.find(i=>i.kid===e),n&&this.jwks_cached_at+Vf>Date.now()))return n;const{data:r,error:o}=await de(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!r.keys||r.keys.length===0)throw new pn("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),n=r.keys.find(i=>i.kid===e),!n)throw new pn("No matching signing key found in JWKS");return n}async getClaims(e,s={keys:[]}){try{let n=e;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};n=p.session.access_token}const{header:r,payload:o,signature:i,raw:{header:a,payload:l}}=Hr(n);if(up(o.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:o,header:r,signature:i},error:null}}const c=dp(r.alg),d=await this.fetchJwk(r.kid,s),h=await crypto.subtle.importKey("jwk",d,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,i,Yf(`${a}.${l}`)))throw new pn("Invalid JWT signature");return{data:{claims:o,header:r,signature:i},error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}}Tn.nextInstanceID=0;const Tp=Tn;class Ap extends Tp{constructor(e){super(e)}}var $p=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(d){try{c(n.next(d))}catch(h){i(h)}}function l(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};class Pp{constructor(e,s,n){var r,o,i;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=Df(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:Tf,realtime:$f,auth:Object.assign(Object.assign({},Af),{storageKey:l}),global:Ef},d=Lf(n??{},c);this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(o=d.global.headers)!==null&&o!==void 0?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=If(s,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new zh(`${a}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Ih(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Sf(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return $p(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:o,flowType:i,lock:a,debug:l},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ap({url:this.authUrl,headers:Object.assign(Object.assign({},h),c),storageKey:o,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,flowType:i,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new cf(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Op=(t,e,s)=>new Pp(t,e,s),Rp="https://ydobfvxubvzsspzaahqq.supabase.co",Ip="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlkb2Jmdnh1YnZ6c3NwemFhaHFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM0NzQzOTEsImV4cCI6MjA1OTA1MDM5MX0.PQCHUysRQB0No-gHs47nswuprgoyhzdYuVH-7R6Ptik",ce=Op(Rp,Ip);async function jp(){try{const{data:t,error:e}=await ce.from("external_tools").select("*").order("sort_order",{ascending:!0});return e?(console.error("获取外链工具失败:",e),[]):t||[]}catch(t){return console.error("获取外链工具异常:",t),[]}}const Ie=(t,e)=>{const s=t.__vccOpts||t;for(const[n,r]of e)s[n]=r;return s},Dp={name:"Toast",props:{show:{type:Boolean,default:!1},message:{type:String,default:""},duration:{type:Number,default:3e3}},emits:["update:show"],setup(t,{emit:e}){const s=V(!1);return Ze(()=>t.show,n=>{n?(s.value=!0,setTimeout(()=>{s.value=!1,e("update:show",!1)},t.duration)):s.value=!1},{immediate:!0}),{visible:s}}},Lp={class:"toast-message"};function Np(t,e,s,n,r,o){return S(),Lt(Hu,{to:"body"},[n.visible?(S(),x("div",{key:0,class:Se(["toast-container",{"toast-show":n.visible}])},[u("div",Lp,P(s.message),1)],2)):ae("",!0)])}const bc=Ie(Dp,[["render",Np],["__scopeId","data-v-411821ea"]]);class Mp{constructor(){this.show=V(!1),this.message=V(""),this.duration=V(3e3),this.queue=Ks([]),this.isProcessing=!1}showToast(e,s=3e3){this.queue.push({message:e,duration:s}),this.isProcessing||this._processQueue()}_processQueue(){if(this.queue.length===0){this.isProcessing=!1;return}this.isProcessing=!0;const{message:e,duration:s}=this.queue.shift();this.message.value=e,this.duration.value=s,this.show.value=!0,setTimeout(()=>{this.show.value=!1,setTimeout(()=>{this._processQueue()},300)},s)}}const go=new Mp,Up=No({name:"ToastContainer",components:{Toast:bc},setup(){return{toastService:go}}});function Fp(t,e,s,n,r,o){const i=Ge("Toast");return S(),Lt(i,{show:t.toastService.show.value,message:t.toastService.message.value,duration:t.toastService.duration.value,"onUpdate:show":e[0]||(e[0]=a=>t.toastService.show.value=a)},null,8,["show","message","duration"])}const Vp=Ie(Up,[["render",Fp]]),Bp={name:"App",components:{ToastContainer:Vp},data(){return{dropdowns:{tools:!1,resources:!1},mobileDropdowns:{tools:!1,resources:!1},mobileMenuOpen:!1,externalTools:[],loadingExternalTools:!1,externalToolsError:null}},created(){this.fetchExternalTools(),document.addEventListener("click",this.closeDropdowns)},beforeUnmount(){document.removeEventListener("click",this.closeDropdowns)},methods:{toggleDropdown(t){event.stopPropagation(),Object.keys(this.dropdowns).forEach(e=>{e!==t&&(this.dropdowns[e]=!1)}),this.dropdowns[t]=!this.dropdowns[t]},toggleMobileDropdown(t){this.mobileDropdowns[t]=!this.mobileDropdowns[t]},closeDropdowns(t){t.target.closest(".nav-item")||Object.keys(this.dropdowns).forEach(e=>{this.dropdowns[e]=!1})},async fetchExternalTools(){try{this.loadingExternalTools=!0,this.externalToolsError=null,this.externalTools=await jp()}catch(t){console.error("获取外链工具失败:",t),this.externalToolsError="加载失败"}finally{this.loadingExternalTools=!1}}}},Hp={class:"app"},qp={class:"header"},Jp={class:"container header-container"},Kp={class:"logo"},zp={class:"main-nav"},Wp={class:"dropdown-menu"},Gp={class:"dropdown-menu"},Qp={key:0,class:"dropdown-item disabled"},Yp={key:1,class:"dropdown-item disabled"},Xp={key:2,class:"dropdown-item disabled"},Zp=["href"],em={class:"item-icon"},tm={class:"mobile-menu"},sm={class:"container"},nm={class:"mobile-dropdown"},rm={class:"mobile-dropdown-items"},om={class:"mobile-dropdown"},im={class:"mobile-dropdown-items"},am={key:0,class:"mobile-dropdown-item disabled"},lm={key:1,class:"mobile-dropdown-item disabled"},cm={key:2,class:"mobile-dropdown-item disabled"},um=["href"],dm={class:"item-icon"},hm={class:"main-content"},fm={class:"container"},pm={class:"footer"},mm={class:"footer-wrapper"},gm={class:"footer-content"},vm={class:"footer-section"},_m={class:"footer-links"},ym={class:"footer-section"},bm={class:"footer-links"};function wm(t,e,s,n,r,o){const i=Ge("router-link"),a=Ge("router-view"),l=Ge("ToastContainer");return S(),x("div",Hp,[u("header",qp,[u("div",Jp,[u("div",Kp,[W(i,{to:"/"},{default:re(()=>e[15]||(e[15]=[u("span",{class:"logo-icon"},"⚙️",-1),u("span",{class:"logo-text"},"工具集",-1)])),_:1})]),u("nav",zp,[W(i,{to:"/",class:"nav-item"},{default:re(()=>e[16]||(e[16]=[he("首页")])),_:1}),u("div",{class:"nav-item",onClick:e[0]||(e[0]=c=>o.toggleDropdown("tools"))},[e[24]||(e[24]=u("span",null,"工具",-1)),u("span",{class:Se(["dropdown-icon",{"dropdown-open":r.dropdowns.tools}])},"▾",2),ge(u("div",Wp,[W(i,{to:"/tools/excel-formatter",class:"dropdown-item"},{default:re(()=>e[17]||(e[17]=[u("span",{class:"item-icon"},"📊",-1),u("span",null,"Excel格式化",-1)])),_:1}),W(i,{to:"/tools/json-formatter",class:"dropdown-item"},{default:re(()=>e[18]||(e[18]=[u("span",{class:"item-icon"},"{}",-1),u("span",null,"JSON格式化",-1)])),_:1}),W(i,{to:"/tools/text-diff",class:"dropdown-item"},{default:re(()=>e[19]||(e[19]=[u("span",{class:"item-icon"},"⟷",-1),u("span",null,"文本对比",-1)])),_:1}),W(i,{to:"/tools/color-picker",class:"dropdown-item"},{default:re(()=>e[20]||(e[20]=[u("span",{class:"item-icon"},"🎨",-1),u("span",null,"颜色选择器",-1)])),_:1}),W(i,{to:"/tools/video-parser",class:"dropdown-item"},{default:re(()=>e[21]||(e[21]=[u("span",{class:"item-icon"},"🎬",-1),u("span",null,"视频解析",-1)])),_:1}),W(i,{to:"/tools/chat/chat",class:"dropdown-item"},{default:re(()=>e[22]||(e[22]=[u("span",{class:"item-icon"},"💬",-1),u("span",null,"实时聊天室",-1)])),_:1}),W(i,{to:"/tools/stock/stock-recommender",class:"dropdown-item"},{default:re(()=>e[23]||(e[23]=[u("span",{class:"item-icon"},"📈",-1),u("span",null,"股票推荐",-1)])),_:1})],512),[[$s,r.dropdowns.tools]])]),u("div",{class:"nav-item",onClick:e[1]||(e[1]=c=>o.toggleDropdown("resources"))},[e[28]||(e[28]=u("span",null,"资源",-1)),u("span",{class:Se(["dropdown-icon",{"dropdown-open":r.dropdowns.resources}])},"▾",2),ge(u("div",Gp,[r.loadingExternalTools?(S(),x("div",Qp,e[25]||(e[25]=[u("span",null,"加载中...",-1)]))):r.externalToolsError?(S(),x("div",Yp,[u("span",null,P(r.externalToolsError),1)])):r.externalTools.length===0?(S(),x("div",Xp,e[26]||(e[26]=[u("span",null,"暂无外部资源",-1)]))):(S(!0),x(ue,{key:3},Pe(r.externalTools,c=>(S(),x("a",{key:c.id,href:c.url,target:"_blank",class:"dropdown-item external"},[u("span",em,P(c.icon),1),u("span",null,P(c.name),1),e[27]||(e[27]=u("span",{class:"external-indicator"},"↗",-1))],8,Zp))),128))],512),[[$s,r.dropdowns.resources]])]),W(i,{to:"/about",class:"nav-item"},{default:re(()=>e[29]||(e[29]=[he("关于")])),_:1}),W(i,{to:"/fitness-plan",class:"dropdown-item"},{default:re(()=>e[30]||(e[30]=[u("span",{class:"item-icon"},"💪",-1),u("span",null,"健身计划",-1)])),_:1})]),u("button",{class:"mobile-menu-toggle",onClick:e[2]||(e[2]=c=>r.mobileMenuOpen=!r.mobileMenuOpen)},e[31]||(e[31]=[u("span",null,null,-1),u("span",null,null,-1),u("span",null,null,-1)]))])]),ge(u("div",tm,[u("div",sm,[W(i,{to:"/",class:"mobile-nav-item",onClick:e[3]||(e[3]=c=>r.mobileMenuOpen=!1)},{default:re(()=>e[32]||(e[32]=[he("首页")])),_:1}),u("div",nm,[u("div",{class:"mobile-nav-item",onClick:e[4]||(e[4]=c=>o.toggleMobileDropdown("tools"))},[e[33]||(e[33]=u("span",null,"工具",-1)),u("span",{class:Se(["dropdown-icon",{"dropdown-open":r.mobileDropdowns.tools}])},"▾",2)]),ge(u("div",rm,[W(i,{to:"/tools/excel-formatter",class:"mobile-dropdown-item",onClick:e[5]||(e[5]=c=>r.mobileMenuOpen=!1)},{default:re(()=>e[34]||(e[34]=[u("span",{class:"item-icon"},"📊",-1),u("span",null,"Excel格式化",-1)])),_:1}),W(i,{to:"/tools/json-formatter",class:"mobile-dropdown-item",onClick:e[6]||(e[6]=c=>r.mobileMenuOpen=!1)},{default:re(()=>e[35]||(e[35]=[u("span",{class:"item-icon"},"{}",-1),u("span",null,"JSON格式化",-1)])),_:1}),W(i,{to:"/tools/text-diff",class:"mobile-dropdown-item",onClick:e[7]||(e[7]=c=>r.mobileMenuOpen=!1)},{default:re(()=>e[36]||(e[36]=[u("span",{class:"item-icon"},"⟷",-1),u("span",null,"文本对比",-1)])),_:1}),W(i,{to:"/tools/color-picker",class:"mobile-dropdown-item",onClick:e[8]||(e[8]=c=>r.mobileMenuOpen=!1)},{default:re(()=>e[37]||(e[37]=[u("span",{class:"item-icon"},"🎨",-1),u("span",null,"颜色选择器",-1)])),_:1}),W(i,{to:"/tools/video-parser",class:"mobile-dropdown-item",onClick:e[9]||(e[9]=c=>r.mobileMenuOpen=!1)},{default:re(()=>e[38]||(e[38]=[u("span",{class:"item-icon"},"🎬",-1),u("span",null,"视频解析",-1)])),_:1}),W(i,{to:"/tools/chat/chat",class:"mobile-dropdown-item",onClick:e[10]||(e[10]=c=>r.mobileMenuOpen=!1)},{default:re(()=>e[39]||(e[39]=[u("span",{class:"item-icon"},"💬",-1),u("span",null,"实时聊天室",-1)])),_:1}),W(i,{to:"/tools/stock/stock-recommender",class:"mobile-dropdown-item",onClick:e[11]||(e[11]=c=>r.mobileMenuOpen=!1)},{default:re(()=>e[40]||(e[40]=[u("span",{class:"item-icon"},"📈",-1),u("span",null,"股票推荐",-1)])),_:1})],512),[[$s,r.mobileDropdowns.tools]])]),u("div",om,[u("div",{class:"mobile-nav-item",onClick:e[12]||(e[12]=c=>o.toggleMobileDropdown("resources"))},[e[41]||(e[41]=u("span",null,"资源",-1)),u("span",{class:Se(["dropdown-icon",{"dropdown-open":r.mobileDropdowns.resources}])},"▾",2)]),ge(u("div",im,[r.loadingExternalTools?(S(),x("div",am,"加载中...")):r.externalToolsError?(S(),x("div",lm,P(r.externalToolsError),1)):r.externalTools.length===0?(S(),x("div",cm,"暂无外部资源")):(S(!0),x(ue,{key:3},Pe(r.externalTools,c=>(S(),x("a",{key:c.id,href:c.url,target:"_blank",class:"mobile-dropdown-item external",onClick:e[13]||(e[13]=d=>r.mobileMenuOpen=!1)},[u("span",dm,P(c.icon),1),u("span",null,P(c.name),1),e[42]||(e[42]=u("span",{class:"external-indicator"},"↗",-1))],8,um))),128))],512),[[$s,r.mobileDropdowns.resources]])]),W(i,{to:"/about",class:"mobile-nav-item",onClick:e[14]||(e[14]=c=>r.mobileMenuOpen=!1)},{default:re(()=>e[43]||(e[43]=[he("关于")])),_:1}),W(i,{to:"/fitness-plan",class:"dropdown-item"},{default:re(()=>e[44]||(e[44]=[u("span",{class:"item-icon"},"💪",-1),u("span",null,"健身计划",-1)])),_:1})])],512),[[$s,r.mobileMenuOpen]]),u("main",hm,[u("div",fm,[W(a,null,{default:re(({Component:c})=>[W(Xd,{name:"fade",mode:"out-in"},{default:re(()=>[(S(),Lt(nd(c)))]),_:2},1024)]),_:1})])]),u("footer",pm,[e[55]||(e[55]=u("div",{class:"footer-background"},null,-1)),u("div",mm,[u("div",gm,[e[53]||(e[53]=Fo('<div class="footer-section"><h3>工具集</h3><p>为开发者和日常办公提供便捷实用的在线工具</p><div class="social-icons"><a href="#" class="social-icon">📱</a><a href="#" class="social-icon">📧</a><a href="#" class="social-icon">🔗</a></div></div>',1)),u("div",vm,[e[49]||(e[49]=u("h3",null,"热门工具",-1)),u("ul",_m,[u("li",null,[W(i,{to:"/tools/json-formatter"},{default:re(()=>e[45]||(e[45]=[he("JSON格式化")])),_:1})]),u("li",null,[W(i,{to:"/tools/excel-formatter"},{default:re(()=>e[46]||(e[46]=[he("Excel格式化")])),_:1})]),u("li",null,[W(i,{to:"/tools/text-diff"},{default:re(()=>e[47]||(e[47]=[he("文本对比")])),_:1})]),u("li",null,[W(i,{to:"/tools/color-picker"},{default:re(()=>e[48]||(e[48]=[he("颜色选择器")])),_:1})])])]),u("div",ym,[e[52]||(e[52]=u("h3",null,"关于我",-1)),u("ul",bm,[u("li",null,[W(i,{to:"/about"},{default:re(()=>e[50]||(e[50]=[he("关于我")])),_:1})]),e[51]||(e[51]=u("li",null,[u("a",{href:"mailto:qgao233@163.com"},"联系我")],-1))])])]),e[54]||(e[54]=u("div",{class:"footer-bottom"},[u("p",null,"© 2025 工具集 | 所有工具均在浏览器本地运行，保障数据安全")],-1))])]),W(l)])}const km=Ie(Bp,[["render",wm]]);function Sm(){return wc().__VUE_DEVTOOLS_GLOBAL_HOOK__}function wc(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const Cm=typeof Proxy=="function",xm="devtools-plugin:setup",Em="plugin:settings:set";let Es,vo;function Tm(){var t;return Es!==void 0||(typeof window<"u"&&window.performance?(Es=!0,vo=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(Es=!0,vo=globalThis.perf_hooks.performance):Es=!1),Es}function Am(){return Tm()?vo.now():Date.now()}class $m{constructor(e,s){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=s;const n={};if(e.settings)for(const i in e.settings){const a=e.settings[i];n[i]=a.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let o=Object.assign({},n);try{const i=localStorage.getItem(r),a=JSON.parse(i);Object.assign(o,a)}catch{}this.fallbacks={getSettings(){return o},setSettings(i){try{localStorage.setItem(r,JSON.stringify(i))}catch{}o=i},now(){return Am()}},s&&s.on(Em,(i,a)=>{i===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(i,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(i,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const s of this.onQueue)this.target.on[s.method](...s.args);for(const s of this.targetQueue)s.resolve(await this.target[s.method](...s.args))}}function Pm(t,e){const s=t,n=wc(),r=Sm(),o=Cm&&s.enableEarlyProxy;if(r&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))r.emit(xm,t,e);else{const i=o?new $m(s,r):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:s,setupFn:e,proxy:i}),i&&e(i.proxiedTarget)}}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Os=typeof document<"u";function kc(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Om(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&kc(t.default)}const ve=Object.assign;function qr(t,e){const s={};for(const n in e){const r=e[n];s[n]=mt(r)?r.map(t):t(r)}return s}const gn=()=>{},mt=Array.isArray,Sc=/#/g,Rm=/&/g,Im=/\//g,jm=/=/g,Dm=/\?/g,Cc=/\+/g,Lm=/%5B/g,Nm=/%5D/g,xc=/%5E/g,Mm=/%60/g,Ec=/%7B/g,Um=/%7C/g,Tc=/%7D/g,Fm=/%20/g;function Go(t){return encodeURI(""+t).replace(Um,"|").replace(Lm,"[").replace(Nm,"]")}function Vm(t){return Go(t).replace(Ec,"{").replace(Tc,"}").replace(xc,"^")}function _o(t){return Go(t).replace(Cc,"%2B").replace(Fm,"+").replace(Sc,"%23").replace(Rm,"%26").replace(Mm,"`").replace(Ec,"{").replace(Tc,"}").replace(xc,"^")}function Bm(t){return _o(t).replace(jm,"%3D")}function Hm(t){return Go(t).replace(Sc,"%23").replace(Dm,"%3F")}function qm(t){return t==null?"":Hm(t).replace(Im,"%2F")}function An(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Jm=/\/$/,Km=t=>t.replace(Jm,"");function Jr(t,e,s="/"){let n,r={},o="",i="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=e.slice(0,l),o=e.slice(l+1,a>-1?a:e.length),r=t(o)),a>-1&&(n=n||e.slice(0,a),i=e.slice(a,e.length)),n=Qm(n??e,s),{fullPath:n+(o&&"?")+o+i,path:n,query:r,hash:An(i)}}function zm(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function va(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Wm(t,e,s){const n=e.matched.length-1,r=s.matched.length-1;return n>-1&&n===r&&Hs(e.matched[n],s.matched[r])&&Ac(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function Hs(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Ac(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!Gm(t[s],e[s]))return!1;return!0}function Gm(t,e){return mt(t)?_a(t,e):mt(e)?_a(e,t):t===e}function _a(t,e){return mt(e)?t.length===e.length&&t.every((s,n)=>s===e[n]):t.length===1&&t[0]===e}function Qm(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),n=t.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let o=s.length-1,i,a;for(i=0;i<n.length;i++)if(a=n[i],a!==".")if(a==="..")o>1&&o--;else break;return s.slice(0,o).join("/")+"/"+n.slice(i).join("/")}const Ut={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var $n;(function(t){t.pop="pop",t.push="push"})($n||($n={}));var vn;(function(t){t.back="back",t.forward="forward",t.unknown=""})(vn||(vn={}));function Ym(t){if(!t)if(Os){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Km(t)}const Xm=/^[^#]+#/;function Zm(t,e){return t.replace(Xm,"#")+e}function eg(t,e){const s=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-s.left-(e.left||0),top:n.top-s.top-(e.top||0)}}const Sr=()=>({left:window.scrollX,top:window.scrollY});function tg(t){let e;if("el"in t){const s=t.el,n=typeof s=="string"&&s.startsWith("#"),r=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!r)return;e=eg(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function ya(t,e){return(history.state?history.state.position-e:-1)+t}const yo=new Map;function sg(t,e){yo.set(t,e)}function ng(t){const e=yo.get(t);return yo.delete(t),e}let rg=()=>location.protocol+"//"+location.host;function $c(t,e){const{pathname:s,search:n,hash:r}=e,o=t.indexOf("#");if(o>-1){let a=r.includes(t.slice(o))?t.slice(o).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),va(l,"")}return va(s,t)+n+r}function og(t,e,s,n){let r=[],o=[],i=null;const a=({state:f})=>{const p=$c(t,location),g=s.value,y=e.value;let E=0;if(f){if(s.value=p,e.value=f,i&&i===g){i=null;return}E=y?f.position-y.position:0}else n(p);r.forEach(C=>{C(s.value,g,{delta:E,type:$n.pop,direction:E?E>0?vn.forward:vn.back:vn.unknown})})};function l(){i=s.value}function c(f){r.push(f);const p=()=>{const g=r.indexOf(f);g>-1&&r.splice(g,1)};return o.push(p),p}function d(){const{history:f}=window;f.state&&f.replaceState(ve({},f.state,{scroll:Sr()}),"")}function h(){for(const f of o)f();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function ba(t,e,s,n=!1,r=!1){return{back:t,current:e,forward:s,replaced:n,position:window.history.length,scroll:r?Sr():null}}function ig(t){const{history:e,location:s}=window,n={value:$c(t,s)},r={value:e.state};r.value||o(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(l,c,d){const h=t.indexOf("#"),f=h>-1?(s.host&&document.querySelector("base")?t:t.slice(h))+l:rg()+t+l;try{e[d?"replaceState":"pushState"](c,"",f),r.value=c}catch(p){console.error(p),s[d?"replace":"assign"](f)}}function i(l,c){const d=ve({},e.state,ba(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});o(l,d,!0),n.value=l}function a(l,c){const d=ve({},r.value,e.state,{forward:l,scroll:Sr()});o(d.current,d,!0);const h=ve({},ba(n.value,l,null),{position:d.position+1},c);o(l,h,!1),n.value=l}return{location:n,state:r,push:a,replace:i}}function ag(t){t=Ym(t);const e=ig(t),s=og(t,e.state,e.location,e.replace);function n(o,i=!0){i||s.pauseListeners(),history.go(o)}const r=ve({location:"",base:t,go:n,createHref:Zm.bind(null,t)},e,s);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function lg(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),ag(t)}function cg(t){return typeof t=="string"||t&&typeof t=="object"}function Pc(t){return typeof t=="string"||typeof t=="symbol"}const Oc=Symbol("");var wa;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(wa||(wa={}));function qs(t,e){return ve(new Error,{type:t,[Oc]:!0},e)}function $t(t,e){return t instanceof Error&&Oc in t&&(e==null||!!(t.type&e))}const ka="[^/]+?",ug={sensitive:!1,strict:!1,start:!0,end:!0},dg=/[.+*?^${}()[\]/\\]/g;function hg(t,e){const s=ve({},ug,e),n=[];let r=s.start?"^":"";const o=[];for(const c of t){const d=c.length?[]:[90];s.strict&&!c.length&&(r+="/");for(let h=0;h<c.length;h++){const f=c[h];let p=40+(s.sensitive?.25:0);if(f.type===0)h||(r+="/"),r+=f.value.replace(dg,"\\$&"),p+=40;else if(f.type===1){const{value:g,repeatable:y,optional:E,regexp:C}=f;o.push({name:g,repeatable:y,optional:E});const _=C||ka;if(_!==ka){p+=10;try{new RegExp(`(${_})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${g}" (${_}): `+w.message)}}let k=y?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;h||(k=E&&c.length<2?`(?:/${k})`:"/"+k),E&&(k+="?"),r+=k,p+=20,E&&(p+=-8),y&&(p+=-20),_===".*"&&(p+=-50)}d.push(p)}n.push(d)}if(s.strict&&s.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}s.strict||(r+="/?"),s.end?r+="$":s.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const i=new RegExp(r,s.sensitive?"":"i");function a(c){const d=c.match(i),h={};if(!d)return null;for(let f=1;f<d.length;f++){const p=d[f]||"",g=o[f-1];h[g.name]=p&&g.repeatable?p.split("/"):p}return h}function l(c){let d="",h=!1;for(const f of t){(!h||!d.endsWith("/"))&&(d+="/"),h=!1;for(const p of f)if(p.type===0)d+=p.value;else if(p.type===1){const{value:g,repeatable:y,optional:E}=p,C=g in c?c[g]:"";if(mt(C)&&!y)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const _=mt(C)?C.join("/"):C;if(!_)if(E)f.length<2&&(d.endsWith("/")?d=d.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);d+=_}}return d||"/"}return{re:i,score:n,keys:o,parse:a,stringify:l}}function fg(t,e){let s=0;for(;s<t.length&&s<e.length;){const n=e[s]-t[s];if(n)return n;s++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Rc(t,e){let s=0;const n=t.score,r=e.score;for(;s<n.length&&s<r.length;){const o=fg(n[s],r[s]);if(o)return o;s++}if(Math.abs(r.length-n.length)===1){if(Sa(n))return 1;if(Sa(r))return-1}return r.length-n.length}function Sa(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const pg={type:0,value:""},mg=/[a-zA-Z0-9_]/;function gg(t){if(!t)return[[]];if(t==="/")return[[pg]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${s})/"${c}": ${p}`)}let s=0,n=s;const r=[];let o;function i(){o&&r.push(o),o=[]}let a=0,l,c="",d="";function h(){c&&(s===0?o.push({type:0,value:c}):s===1||s===2||s===3?(o.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:l==="/"?(c&&h(),i()):l===":"?(h(),s=1):f();break;case 4:f(),s=n;break;case 1:l==="("?s=2:mg.test(l)?f():(h(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:s=3:d+=l;break;case 3:h(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return s===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),i(),r}function vg(t,e,s){const n=hg(gg(t.path),s),r=ve(n,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function _g(t,e){const s=[],n=new Map;e=Ta({strict:!1,end:!0,sensitive:!1},e);function r(h){return n.get(h)}function o(h,f,p){const g=!p,y=xa(h);y.aliasOf=p&&p.record;const E=Ta(e,h),C=[y];if("alias"in h){const w=typeof h.alias=="string"?[h.alias]:h.alias;for(const T of w)C.push(xa(ve({},y,{components:p?p.record.components:y.components,path:T,aliasOf:p?p.record:y})))}let _,k;for(const w of C){const{path:T}=w;if(f&&T[0]!=="/"){const R=f.record.path,j=R[R.length-1]==="/"?"":"/";w.path=f.record.path+(T&&j+T)}if(_=vg(w,f,E),p?p.alias.push(_):(k=k||_,k!==_&&k.alias.push(_),g&&h.name&&!Ea(_)&&i(h.name)),Ic(_)&&l(_),y.children){const R=y.children;for(let j=0;j<R.length;j++)o(R[j],_,p&&p.children[j])}p=p||_}return k?()=>{i(k)}:gn}function i(h){if(Pc(h)){const f=n.get(h);f&&(n.delete(h),s.splice(s.indexOf(f),1),f.children.forEach(i),f.alias.forEach(i))}else{const f=s.indexOf(h);f>-1&&(s.splice(f,1),h.record.name&&n.delete(h.record.name),h.children.forEach(i),h.alias.forEach(i))}}function a(){return s}function l(h){const f=wg(h,s);s.splice(f,0,h),h.record.name&&!Ea(h)&&n.set(h.record.name,h)}function c(h,f){let p,g={},y,E;if("name"in h&&h.name){if(p=n.get(h.name),!p)throw qs(1,{location:h});E=p.record.name,g=ve(Ca(f.params,p.keys.filter(k=>!k.optional).concat(p.parent?p.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),h.params&&Ca(h.params,p.keys.map(k=>k.name))),y=p.stringify(g)}else if(h.path!=null)y=h.path,p=s.find(k=>k.re.test(y)),p&&(g=p.parse(y),E=p.record.name);else{if(p=f.name?n.get(f.name):s.find(k=>k.re.test(f.path)),!p)throw qs(1,{location:h,currentLocation:f});E=p.record.name,g=ve({},f.params,h.params),y=p.stringify(g)}const C=[];let _=p;for(;_;)C.unshift(_.record),_=_.parent;return{name:E,path:y,params:g,matched:C,meta:bg(C)}}t.forEach(h=>o(h));function d(){s.length=0,n.clear()}return{addRoute:o,resolve:c,removeRoute:i,clearRoutes:d,getRoutes:a,getRecordMatcher:r}}function Ca(t,e){const s={};for(const n of e)n in t&&(s[n]=t[n]);return s}function xa(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:yg(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function yg(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const n in t.components)e[n]=typeof s=="object"?s[n]:s;return e}function Ea(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function bg(t){return t.reduce((e,s)=>ve(e,s.meta),{})}function Ta(t,e){const s={};for(const n in t)s[n]=n in e?e[n]:t[n];return s}function wg(t,e){let s=0,n=e.length;for(;s!==n;){const o=s+n>>1;Rc(t,e[o])<0?n=o:s=o+1}const r=kg(t);return r&&(n=e.lastIndexOf(r,n-1)),n}function kg(t){let e=t;for(;e=e.parent;)if(Ic(e)&&Rc(t,e)===0)return e}function Ic({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Sg(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const o=n[r].replace(Cc," "),i=o.indexOf("="),a=An(i<0?o:o.slice(0,i)),l=i<0?null:An(o.slice(i+1));if(a in e){let c=e[a];mt(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Aa(t){let e="";for(let s in t){const n=t[s];if(s=Bm(s),n==null){n!==void 0&&(e+=(e.length?"&":"")+s);continue}(mt(n)?n.map(o=>o&&_o(o)):[n&&_o(n)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+s,o!=null&&(e+="="+o))})}return e}function Cg(t){const e={};for(const s in t){const n=t[s];n!==void 0&&(e[s]=mt(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return e}const xg=Symbol(""),$a=Symbol(""),Cr=Symbol(""),Qo=Symbol(""),bo=Symbol("");function sn(){let t=[];function e(n){return t.push(n),()=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function Kt(t,e,s,n,r,o=i=>i()){const i=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(qs(4,{from:s,to:e})):f instanceof Error?l(f):cg(f)?l(qs(2,{from:e,to:f})):(i&&n.enterCallbacks[r]===i&&typeof f=="function"&&i.push(f),a())},d=o(()=>t.call(n&&n.instances[r],e,s,c));let h=Promise.resolve(d);t.length<3&&(h=h.then(c)),h.catch(f=>l(f))})}function Kr(t,e,s,n,r=o=>o()){const o=[];for(const i of t)for(const a in i.components){let l=i.components[a];if(!(e!=="beforeRouteEnter"&&!i.instances[a]))if(kc(l)){const d=(l.__vccOpts||l)[e];d&&o.push(Kt(d,s,n,i,a,r))}else{let c=l();o.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${i.path}"`);const h=Om(d)?d.default:d;i.mods[a]=d,i.components[a]=h;const p=(h.__vccOpts||h)[e];return p&&Kt(p,s,n,i,a,r)()}))}}return o}function Pa(t){const e=Qe(Cr),s=Qe(Qo),n=je(()=>{const l=Ds(t.to);return e.resolve(l)}),r=je(()=>{const{matched:l}=n.value,{length:c}=l,d=l[c-1],h=s.matched;if(!d||!h.length)return-1;const f=h.findIndex(Hs.bind(null,d));if(f>-1)return f;const p=Oa(l[c-2]);return c>1&&Oa(d)===p&&h[h.length-1].path!==p?h.findIndex(Hs.bind(null,l[c-2])):f}),o=je(()=>r.value>-1&&Pg(s.params,n.value.params)),i=je(()=>r.value>-1&&r.value===s.matched.length-1&&Ac(s.params,n.value.params));function a(l={}){if($g(l)){const c=e[Ds(t.replace)?"replace":"push"](Ds(t.to)).catch(gn);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:je(()=>n.value.href),isActive:o,isExactActive:i,navigate:a}}function Eg(t){return t.length===1?t[0]:t}const Tg=No({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Pa,setup(t,{slots:e}){const s=Ks(Pa(t)),{options:n}=Qe(Cr),r=je(()=>({[Ra(t.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Ra(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const o=e.default&&Eg(e.default(s));return t.custom?o:Bo("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:r.value},o)}}}),Ag=Tg;function $g(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Pg(t,e){for(const s in e){const n=e[s],r=t[s];if(typeof n=="string"){if(n!==r)return!1}else if(!mt(r)||r.length!==n.length||n.some((o,i)=>o!==r[i]))return!1}return!0}function Oa(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Ra=(t,e,s)=>t??e??s,Og=No({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const n=Qe(bo),r=je(()=>t.route||n.value),o=Qe($a,0),i=je(()=>{let c=Ds(o);const{matched:d}=r.value;let h;for(;(h=d[c])&&!h.components;)c++;return c}),a=je(()=>r.value.matched[i.value]);Qn($a,je(()=>i.value+1)),Qn(xg,a),Qn(bo,r);const l=V();return Ze(()=>[l.value,a.value,t.name],([c,d,h],[f,p,g])=>{d&&(d.instances[h]=c,p&&p!==d&&c&&c===f&&(d.leaveGuards.size||(d.leaveGuards=p.leaveGuards),d.updateGuards.size||(d.updateGuards=p.updateGuards))),c&&d&&(!p||!Hs(d,p)||!f)&&(d.enterCallbacks[h]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=r.value,d=t.name,h=a.value,f=h&&h.components[d];if(!f)return Ia(s.default,{Component:f,route:c});const p=h.props[d],g=p?p===!0?c.params:typeof p=="function"?p(c):p:null,E=Bo(f,ve({},g,e,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(h.instances[d]=null)},ref:l}));return Ia(s.default,{Component:E,route:c})||E}}});function Ia(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const Rg=Og;function Ig(t){const e=_g(t.routes,t),s=t.parseQuery||Sg,n=t.stringifyQuery||Aa,r=t.history,o=sn(),i=sn(),a=sn(),l=Ru(Ut);let c=Ut;Os&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=qr.bind(null,A=>""+A),h=qr.bind(null,qm),f=qr.bind(null,An);function p(A,J){let L,K;return Pc(A)?(L=e.getRecordMatcher(A),K=J):K=A,e.addRoute(K,L)}function g(A){const J=e.getRecordMatcher(A);J&&e.removeRoute(J)}function y(){return e.getRoutes().map(A=>A.record)}function E(A){return!!e.getRecordMatcher(A)}function C(A,J){if(J=ve({},J||l.value),typeof A=="string"){const b=Jr(s,A,J.path),$=e.resolve({path:b.path},J),I=r.createHref(b.fullPath);return ve(b,$,{params:f($.params),hash:An(b.hash),redirectedFrom:void 0,href:I})}let L;if(A.path!=null)L=ve({},A,{path:Jr(s,A.path,J.path).path});else{const b=ve({},A.params);for(const $ in b)b[$]==null&&delete b[$];L=ve({},A,{params:h(b)}),J.params=h(J.params)}const K=e.resolve(L,J),ye=A.hash||"";K.params=d(f(K.params));const m=zm(n,ve({},A,{hash:Vm(ye),path:K.path})),v=r.createHref(m);return ve({fullPath:m,hash:ye,query:n===Aa?Cg(A.query):A.query||{}},K,{redirectedFrom:void 0,href:v})}function _(A){return typeof A=="string"?Jr(s,A,l.value.path):ve({},A)}function k(A,J){if(c!==A)return qs(8,{from:J,to:A})}function w(A){return j(A)}function T(A){return w(ve(_(A),{replace:!0}))}function R(A){const J=A.matched[A.matched.length-1];if(J&&J.redirect){const{redirect:L}=J;let K=typeof L=="function"?L(A):L;return typeof K=="string"&&(K=K.includes("?")||K.includes("#")?K=_(K):{path:K},K.params={}),ve({query:A.query,hash:A.hash,params:K.path!=null?{}:A.params},K)}}function j(A,J){const L=c=C(A),K=l.value,ye=A.state,m=A.force,v=A.replace===!0,b=R(L);if(b)return j(ve(_(b),{state:typeof b=="object"?ve({},ye,b.state):ye,force:m,replace:v}),J||L);const $=L;$.redirectedFrom=J;let I;return!m&&Wm(n,K,L)&&(I=qs(16,{to:$,from:K}),tt(K,K,!0,!1)),(I?Promise.resolve(I):Q($,K)).catch(O=>$t(O)?$t(O,2)?O:vt(O):pe(O,$,K)).then(O=>{if(O){if($t(O,2))return j(ve({replace:v},_(O.to),{state:typeof O.to=="object"?ve({},ye,O.to.state):ye,force:m}),J||$)}else O=H($,K,!0,v,ye);return se($,K,O),O})}function ee(A,J){const L=k(A,J);return L?Promise.reject(L):Promise.resolve()}function U(A){const J=Re.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(A):A()}function Q(A,J){let L;const[K,ye,m]=jg(A,J);L=Kr(K.reverse(),"beforeRouteLeave",A,J);for(const b of K)b.leaveGuards.forEach($=>{L.push(Kt($,A,J))});const v=ee.bind(null,A,J);return L.push(v),$e(L).then(()=>{L=[];for(const b of o.list())L.push(Kt(b,A,J));return L.push(v),$e(L)}).then(()=>{L=Kr(ye,"beforeRouteUpdate",A,J);for(const b of ye)b.updateGuards.forEach($=>{L.push(Kt($,A,J))});return L.push(v),$e(L)}).then(()=>{L=[];for(const b of m)if(b.beforeEnter)if(mt(b.beforeEnter))for(const $ of b.beforeEnter)L.push(Kt($,A,J));else L.push(Kt(b.beforeEnter,A,J));return L.push(v),$e(L)}).then(()=>(A.matched.forEach(b=>b.enterCallbacks={}),L=Kr(m,"beforeRouteEnter",A,J,U),L.push(v),$e(L))).then(()=>{L=[];for(const b of i.list())L.push(Kt(b,A,J));return L.push(v),$e(L)}).catch(b=>$t(b,8)?b:Promise.reject(b))}function se(A,J,L){a.list().forEach(K=>U(()=>K(A,J,L)))}function H(A,J,L,K,ye){const m=k(A,J);if(m)return m;const v=J===Ut,b=Os?history.state:{};L&&(K||v?r.replace(A.fullPath,ve({scroll:v&&b&&b.scroll},ye)):r.push(A.fullPath,ye)),l.value=A,tt(A,J,L,v),vt()}let N;function G(){N||(N=r.listen((A,J,L)=>{if(!Ve.listening)return;const K=C(A),ye=R(K);if(ye){j(ve(ye,{replace:!0,force:!0}),K).catch(gn);return}c=K;const m=l.value;Os&&sg(ya(m.fullPath,L.delta),Sr()),Q(K,m).catch(v=>$t(v,12)?v:$t(v,2)?(j(ve(_(v.to),{force:!0}),K).then(b=>{$t(b,20)&&!L.delta&&L.type===$n.pop&&r.go(-1,!1)}).catch(gn),Promise.reject()):(L.delta&&r.go(-L.delta,!1),pe(v,K,m))).then(v=>{v=v||H(K,m,!1),v&&(L.delta&&!$t(v,8)?r.go(-L.delta,!1):L.type===$n.pop&&$t(v,20)&&r.go(-1,!1)),se(K,m,v)}).catch(gn)}))}let we=sn(),xe=sn(),le;function pe(A,J,L){vt(A);const K=xe.list();return K.length?K.forEach(ye=>ye(A,J,L)):console.error(A),Promise.reject(A)}function ut(){return le&&l.value!==Ut?Promise.resolve():new Promise((A,J)=>{we.add([A,J])})}function vt(A){return le||(le=!A,G(),we.list().forEach(([J,L])=>A?L(A):J()),we.reset()),A}function tt(A,J,L,K){const{scrollBehavior:ye}=t;if(!Os||!ye)return Promise.resolve();const m=!L&&ng(ya(A.fullPath,0))||(K||!L)&&history.state&&history.state.scroll||null;return jt().then(()=>ye(A,J,m)).then(v=>v&&tg(v)).catch(v=>pe(v,A,J))}const q=A=>r.go(A);let Y;const Re=new Set,Ve={currentRoute:l,listening:!0,addRoute:p,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:E,getRoutes:y,resolve:C,options:t,push:w,replace:T,go:q,back:()=>q(-1),forward:()=>q(1),beforeEach:o.add,beforeResolve:i.add,afterEach:a.add,onError:xe.add,isReady:ut,install(A){const J=this;A.component("RouterLink",Ag),A.component("RouterView",Rg),A.config.globalProperties.$router=J,Object.defineProperty(A.config.globalProperties,"$route",{enumerable:!0,get:()=>Ds(l)}),Os&&!Y&&l.value===Ut&&(Y=!0,w(r.location).catch(ye=>{}));const L={};for(const ye in Ut)Object.defineProperty(L,ye,{get:()=>l.value[ye],enumerable:!0});A.provide(Cr,J),A.provide(Qo,ol(L)),A.provide(bo,l);const K=A.unmount;Re.add(A),A.unmount=function(){Re.delete(A),Re.size<1&&(c=Ut,N&&N(),N=null,l.value=Ut,Y=!1,le=!1),K()}}};function $e(A){return A.reduce((J,L)=>J.then(()=>U(L)),Promise.resolve())}return Ve}function jg(t,e){const s=[],n=[],r=[],o=Math.max(e.matched.length,t.matched.length);for(let i=0;i<o;i++){const a=e.matched[i];a&&(t.matched.find(c=>Hs(c,a))?n.push(a):s.push(a));const l=t.matched[i];l&&(e.matched.find(c=>Hs(c,l))||r.push(l))}return[s,n,r]}function jc(){return Qe(Cr)}function Dg(t){return Qe(Qo)}const Lg={name:"Home",data(){return{searchQuery:""}}},Ng={class:"home"},Mg={class:"tools-section"},Ug={class:"tools-grid"},Fg={class:"tools-section"},Vg={class:"tools-grid"},Bg={class:"tools-section"},Hg={class:"tools-grid"},qg={class:"tools-section"},Jg={class:"tools-grid"},Kg={class:"tools-section"},zg={class:"tools-grid"};function Wg(t,e,s,n,r,o){const i=Ge("router-link");return S(),x("div",Ng,[e[12]||(e[12]=u("section",{class:"banner"},[u("div",{class:"banner-background"}),u("div",{class:"banner-content"},[u("h1",null,"在线工具集"),u("p",{class:"subtitle"},"为开发者和日常办公提供便捷实用的在线工具")])],-1)),u("section",Mg,[e[3]||(e[3]=u("div",{class:"section-header"},[u("h2",null,"热门工具"),u("p",null,"精选高效实用的开发工具")],-1)),u("div",Ug,[W(i,{to:"/tools/json-formatter",class:"tool-card"},{default:re(()=>e[0]||(e[0]=[u("div",{class:"tool-icon"},"{}",-1),u("div",{class:"tool-content"},[u("h3",null,"JSON格式化"),u("p",null,"美化、压缩和校验JSON数据")],-1),u("div",{class:"tool-image code-image"},null,-1)])),_:1}),W(i,{to:"/tools/excel-formatter",class:"tool-card"},{default:re(()=>e[1]||(e[1]=[u("div",{class:"tool-icon"},"📊",-1),u("div",{class:"tool-content"},[u("h3",null,"Excel格式化"),u("p",null,"格式化Excel公式，使其更易读易懂")],-1),u("div",{class:"tool-image data-image"},null,-1)])),_:1}),W(i,{to:"/tools/text-diff",class:"tool-card"},{default:re(()=>e[2]||(e[2]=[u("div",{class:"tool-icon"},"⟷",-1),u("div",{class:"tool-content"},[u("h3",null,"文本对比"),u("p",null,"比较两段文本的差异")],-1),u("div",{class:"tool-image text-image"},null,-1)])),_:1})])]),u("section",Fg,[e[5]||(e[5]=u("div",{class:"section-header"},[u("h2",null,"金融工具"),u("p",null,"股票分析与投资辅助工具")],-1)),u("div",Vg,[W(i,{to:"/tools/stock/stock-recommender",class:"tool-card"},{default:re(()=>e[4]||(e[4]=[u("div",{class:"tool-icon"},"📈",-1),u("div",{class:"tool-content"},[u("h3",null,"股票推荐工具"),u("p",null,"基于新闻热点和技术分析的股票推荐")],-1),u("div",{class:"tool-image finance-image"},null,-1)])),_:1})])]),u("section",Bg,[e[7]||(e[7]=u("div",{class:"section-header"},[u("h2",null,"色彩工具"),u("p",null,"帮助设计和开发的色彩相关工具")],-1)),u("div",Hg,[W(i,{to:"/tools/color-picker",class:"tool-card"},{default:re(()=>e[6]||(e[6]=[u("div",{class:"tool-icon"},"🎨",-1),u("div",{class:"tool-content"},[u("h3",null,"颜色选择器"),u("p",null,"颜色选择、转换与生成配色方案")],-1),u("div",{class:"tool-image color-image"},null,-1)])),_:1})])]),u("section",qg,[e[9]||(e[9]=u("div",{class:"section-header"},[u("h2",null,"媒体工具"),u("p",null,"视频与媒体处理相关工具")],-1)),u("div",Jg,[W(i,{to:"/tools/video-parser",class:"tool-card"},{default:re(()=>e[8]||(e[8]=[u("div",{class:"tool-icon"},"🎬",-1),u("div",{class:"tool-content"},[u("h3",null,"视频解析工具"),u("p",null,"多线路解析各大平台视频")],-1),u("div",{class:"tool-image video-image"},null,-1)])),_:1})])]),u("section",Kg,[e[11]||(e[11]=u("div",{class:"section-header"},[u("h2",null,"通信工具"),u("p",null,"实时聊天与通信相关工具")],-1)),u("div",zg,[W(i,{to:"/tools/chat/chat",class:"tool-card"},{default:re(()=>e[10]||(e[10]=[u("div",{class:"tool-icon"},"💬",-1),u("div",{class:"tool-content"},[u("h3",null,"实时聊天室"),u("p",null,"基于Supabase的实时聊天工具")],-1),u("div",{class:"tool-image chat-image"},null,-1)])),_:1})])]),e[13]||(e[13]=u("section",{class:"bottom-image-section"},[u("div",{class:"overlay"}),u("div",{class:"content"},[u("h2",null,"高效工具，简化工作"),u("p",null,"我致力于提供专业、便捷的在线工具，助您提高工作效率")])],-1))])}const Gg=Ie(Lg,[["render",Wg],["__scopeId","data-v-3b8762cd"]]),Qg={name:"About"},Yg={class:"about"};function Xg(t,e,s,n,r,o){return S(),x("div",Yg,e[0]||(e[0]=[Fo('<section class="page-header" data-v-1b99c5d7><div class="header-background" data-v-1b99c5d7></div><div class="header-content" data-v-1b99c5d7><h1 data-v-1b99c5d7>关于我</h1><p class="breadcrumbs" data-v-1b99c5d7>首页 &gt; 关于我</p></div></section><div class="about-content" data-v-1b99c5d7><section class="intro-section" data-v-1b99c5d7><div class="section-content" data-v-1b99c5d7><div class="section-header" data-v-1b99c5d7><h2 data-v-1b99c5d7>项目介绍</h2><div class="section-divider" data-v-1b99c5d7></div></div><div class="intro-grid" data-v-1b99c5d7><div class="intro-text" data-v-1b99c5d7><p data-v-1b99c5d7>在线工具集是一个提供多种实用在线工具的门户网站，旨在为开发者和日常办公提供便捷的工具支持。我致力于打造简洁易用的工具平台，为用户提供高效的在线解决方案。</p><p data-v-1b99c5d7>我的宗旨是简化复杂工作流程，通过专业的在线工具帮助用户提高工作效率，让技术服务于创造。</p></div><div class="intro-image" data-v-1b99c5d7><img src="https://images.unsplash.com/photo-1553877522-43269d4ea984?ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=600&amp;q=80" alt="项目介绍图片" data-v-1b99c5d7></div></div></div></section><section class="tools-section" data-v-1b99c5d7><div class="section-content" data-v-1b99c5d7><div class="section-header" data-v-1b99c5d7><h2 data-v-1b99c5d7>我的工具</h2><div class="section-divider" data-v-1b99c5d7></div></div><div class="tools-list" data-v-1b99c5d7><div class="tool-item" data-v-1b99c5d7><div class="tool-icon" data-v-1b99c5d7>📊</div><div class="tool-details" data-v-1b99c5d7><h3 data-v-1b99c5d7>Excel格式化</h3><p data-v-1b99c5d7>将复杂的Excel公式转换为易读格式，帮助理解和调试公式。支持多种格式化选项，提升公式可读性。</p></div></div><div class="tool-item" data-v-1b99c5d7><div class="tool-icon" data-v-1b99c5d7>{}</div><div class="tool-details" data-v-1b99c5d7><h3 data-v-1b99c5d7>JSON格式化</h3><p data-v-1b99c5d7>美化、压缩和校验JSON数据，使其更易于阅读和编辑。支持语法高亮、结构折叠和错误检测功能。</p></div></div><div class="tool-item" data-v-1b99c5d7><div class="tool-icon" data-v-1b99c5d7>⟷</div><div class="tool-details" data-v-1b99c5d7><h3 data-v-1b99c5d7>文本对比</h3><p data-v-1b99c5d7>比较两段文本的差异，支持逐行对比和高亮显示。可快速识别插入、删除和修改的内容。</p></div></div><div class="tool-item" data-v-1b99c5d7><div class="tool-icon" data-v-1b99c5d7>🎨</div><div class="tool-details" data-v-1b99c5d7><h3 data-v-1b99c5d7>颜色选择器</h3><p data-v-1b99c5d7>便捷的颜色选择工具，支持RGB、HEX、HSL等多种格式转换。提供颜色方案生成，帮助设计和前端开发。</p></div></div><div class="tool-item" data-v-1b99c5d7><div class="tool-icon" data-v-1b99c5d7>🎬</div><div class="tool-details" data-v-1b99c5d7><h3 data-v-1b99c5d7>视频解析工具</h3><p data-v-1b99c5d7>多线路解析各大平台视频，提供流畅的视频播放体验。支持自动切换播放源，解决视频加载问题。</p></div></div></div></div></section><section class="trust-section" data-v-1b99c5d7><div class="trust-background" data-v-1b99c5d7></div><div class="trust-content" data-v-1b99c5d7><h2 data-v-1b99c5d7>为什么选择我</h2><div class="trust-grid" data-v-1b99c5d7><div class="trust-item" data-v-1b99c5d7><div class="trust-icon" data-v-1b99c5d7>🔒</div><h3 data-v-1b99c5d7>安全可靠</h3><p data-v-1b99c5d7>所有工具在浏览器本地运行，确保数据不会外泄</p></div><div class="trust-item" data-v-1b99c5d7><div class="trust-icon" data-v-1b99c5d7>⚡</div><h3 data-v-1b99c5d7>高效便捷</h3><p data-v-1b99c5d7>专注于简化流程，提供快速高效的解决方案</p></div><div class="trust-item" data-v-1b99c5d7><div class="trust-icon" data-v-1b99c5d7>🛠️</div><h3 data-v-1b99c5d7>专业工具</h3><p data-v-1b99c5d7>针对开发者和办公需求，提供专业级工具</p></div></div></div></section><section class="contact-section" data-v-1b99c5d7><div class="section-content" data-v-1b99c5d7><div class="section-header" data-v-1b99c5d7><h2 data-v-1b99c5d7>联系我</h2><div class="section-divider" data-v-1b99c5d7></div></div><p data-v-1b99c5d7>如果您有任何问题、建议或合作意向，欢迎通过以下方式联系我：</p><div class="contact-card" data-v-1b99c5d7><div class="contact-item" data-v-1b99c5d7><div class="contact-icon" data-v-1b99c5d7>📧</div><div class="contact-details" data-v-1b99c5d7><h3 data-v-1b99c5d7>电子邮件</h3><a href="mailto:qgao233@163.com" data-v-1b99c5d7>qgao233@163.com</a></div></div></div></div></section><section class="privacy-section" data-v-1b99c5d7><div class="section-content" data-v-1b99c5d7><div class="section-header" data-v-1b99c5d7><h2 data-v-1b99c5d7>隐私说明</h2><div class="section-divider" data-v-1b99c5d7></div></div><div class="privacy-box" data-v-1b99c5d7><p data-v-1b99c5d7>所有工具均在您的浏览器中本地运行，不会将您的数据传输到服务器。我高度重视用户隐私和数据安全，确保您的信息不会被收集或共享。</p></div></div></section></div>',2)]))}const Zg=Ie(Qg,[["render",Xg],["__scopeId","data-v-1b99c5d7"]]);class wo{constructor(e=null,s=0){this.parent=e,this.tabSize=s,this.data=[]}isSingleNode(){for(let e of this.data)if(typeof e!="string")return!1;return!0}getSingleText(){return this.data.join("")}}function ev(t){t=t.replace(/\n/g,"").replace(/\r/g,""),t=t.replace(/ +/g," ");const e=[];let s=0,n=0;for(;n<t.length;){const r=t[n];if(r==="("&&t[n+1]!==")"||r===",")e.push(t.substring(s,n+1)),s=n=n+1;else if(r===")"&&t[n-1]!=="("){s<n&&(e.push(t.substring(s,n)),s=n);const o=t.indexOf(",",n+1),i=o!==-1?t.indexOf("(",n+1,o):-1,a=o!==-1?t.indexOf(")",n+1,o):-1;o!==-1&&i===-1&&a===-1?(e.push(t.substring(s,o+1)),s=n=o+1):n+1<t.length&&t[n+1]!==")"?(e.push(")"),e.push(t[n+1]),s=n=n+2):(e.push(")"),s=n=n+1)}else if(r==='"'){const o=t.indexOf('"',n+1);n=o!==-1?o+1:n+1}else n+=1}return s<t.length&&e.push(t.substring(s)),e}let Dc=2;function tv(t,e=60,s=3){for(let n=0;n<s;n++){let r=!0;const o=[t];for(;o.length>0;){const i=o.pop(),a={};for(let l=0;l<i.data.length;l++){const c=i.data[l];if(c instanceof wo)if(c.isSingleNode()){const d=c.getSingleText();d.length<e&&(a[l]=d)}else o.push(c)}for(const[l,c]of Object.entries(a))i.data[l]=c;Object.keys(a).length!==0&&(r=!1)}if(r)break}}function*Lc(t){for(let e=0;e<t.data.length;e++){const s=t.data[e];if(typeof s=="string"){const n=e===0||e===t.data.length-1?t.tabSize-1:t.tabSize;yield`${" ".repeat(Dc*Math.max(0,n))}${s}`}else yield*Lc(s)}}function sv(t,e=2,s=!0,n=60,r=3){Dc=e;const o=ev(t);let i=0;const a=new wo;let l=a;for(const d of o)if(d.endsWith("(")){i+=1;const h=new wo(l,i);l.data.push(h),l=h,l.data.push(d)}else d.startsWith(")")?(i-=1,l.data.push(d),l=l.parent):l.data.push(d);s&&tv(a,n,r);const c=[];for(const d of Lc(a))c.push(d);return c.join(`
`)}const nv={name:"ExcelFormatter",setup(){const t=V(""),e=V(""),s=V(!1);return{inputFormula:t,formattedResult:e,showCopyMessage:s,formatFormula:()=>{if(!t.value.trim()){alert("请输入Excel公式");return}try{e.value=sv(t.value)}catch(i){console.error("格式化出错:",i),alert("格式化出错，请检查公式是否正确")}},clearFormula:()=>{t.value="",e.value=""},copyResult:()=>{e.value&&navigator.clipboard.writeText(e.value).then(()=>{s.value=!0,setTimeout(()=>{s.value=!1},3e3)}).catch(i=>{console.error("复制失败:",i),alert("复制失败")})}}}},rv={class:"excel-formatter"},ov={class:"formatter-container"},iv={class:"form-group"},av={class:"actions"},lv={key:0,class:"form-group result-container"},cv={class:"result-header"},uv={class:"copy-actions"},dv={key:0,class:"copy-message"},hv={id:"output-formula",class:"output-area"};function fv(t,e,s,n,r,o){return S(),x("div",rv,[e[10]||(e[10]=u("h2",null,[u("span",{class:"tool-icon"},"📊"),he(" Excel公式格式化工具")],-1)),u("div",ov,[u("div",iv,[e[4]||(e[4]=u("label",{for:"input-formula"},"输入Excel公式：",-1)),ge(u("textarea",{id:"input-formula","onUpdate:modelValue":e[0]||(e[0]=i=>n.inputFormula=i),class:"input-area",placeholder:"请输入需要格式化的Excel公式"},null,512),[[De,n.inputFormula]])]),u("div",av,[u("button",{class:"format-btn",onClick:e[1]||(e[1]=(...i)=>n.formatFormula&&n.formatFormula(...i))},e[5]||(e[5]=[u("span",{class:"btn-icon"},"✨",-1),he("格式化 ")])),u("button",{class:"clear-btn",onClick:e[2]||(e[2]=(...i)=>n.clearFormula&&n.clearFormula(...i))},e[6]||(e[6]=[u("span",{class:"btn-icon"},"🗑️",-1),he("清空 ")]))]),n.formattedResult?(S(),x("div",lv,[u("div",cv,[e[9]||(e[9]=u("label",{for:"output-formula"},"格式化结果：",-1)),u("div",uv,[u("button",{class:"copy-btn",onClick:e[3]||(e[3]=(...i)=>n.copyResult&&n.copyResult(...i))},e[7]||(e[7]=[u("span",{class:"btn-icon"},"📋",-1),he("复制结果 ")])),n.showCopyMessage?(S(),x("div",dv,e[8]||(e[8]=[u("span",{class:"copy-icon"},"✅",-1),he(" 已复制到剪贴板 ")]))):ae("",!0)])]),u("pre",hv,P(n.formattedResult),1)])):ae("",!0)])])}const pv=Ie(nv,[["render",fv],["__scopeId","data-v-50dbdb40"]]);function ps(t){return t.replace(/\r?\n/g,"").trim()}function Nc(t,e=2,s=!1){try{const n=ps(t),r=JSON.parse(n);return JSON.stringify(r,s?Fc:null,e)}catch(n){throw new Error(`JSON解析错误: ${n.message}`)}}function Mc(t,e=!1){try{const s=ps(t),n=JSON.parse(s);return JSON.stringify(n,e?Fc:null,"	")}catch(s){throw new Error(`JSON解析错误: ${s.message}`)}}function Uc(t,e=!1,s=2){let n=ps(t).replace(/\s+/g," "),r="",o=0,i=!1,a=n.split("");const l=e?"	":" ".repeat(s);for(let c=0;c<a.length;c++){const d=a[c];if(d==='"'&&(c===0||a[c-1]!=="\\")){i=!i,r+=d;continue}if(i){r+=d;continue}switch(d){case"{":case"[":r+=d+`
`+l.repeat(++o);break;case"}":case"]":r+=`
`+l.repeat(--o)+d;break;case",":r+=d+`
`+l.repeat(o);break;case":":r+=d+" ";break;default:r+=d}}return r}function mv(t){try{if(!t.trim())return"";try{const r=ps(t),o=JSON.parse(r);return JSON.stringify(o)}catch(r){console.log("解析失败，使用直接压缩方式:",r)}let e="",s=!1,n=!1;for(let r=0;r<t.length;r++){const o=t[r];if(s&&!n&&o==="\\"){n=!0,e+=o;continue}if(n){n=!1,e+=o;continue}if(o==='"'&&!n){s=!s,e+=o;continue}if(s){e+=o;continue}/\s/.test(o)||(e+=o)}return e}catch(e){throw new Error(`JSON压缩错误: ${e.message}`)}}function gv(t){try{const e=ps(t);return JSON.parse(e),{valid:!0,message:"JSON格式有效"}}catch(e){return{valid:!1,message:e.message}}}function Fc(t,e){return e&&typeof e=="object"&&!Array.isArray(e)?Object.keys(e).sort().reduce((s,n)=>(s[n]=e[n],s),{}):e}function vv(t,e={}){const n={...{stringColor:"#0B7500",numberColor:"#1A01CC",booleanColor:"#1A01CC",nullColor:"#1A01CC",keyColor:"#881391",braceColor:"#000000",bracketColor:"#000000",commaColor:"#000000",indentSize:2,useTabs:!1},...e};try{const r=ps(t);let o;return n.useTabs?o=Mc(r,!1):n.customFormat?o=Uc(r,n.useTabs,n.indentSize):o=Nc(r,n.indentSize,!1),o.replace(/"([^"]+)":/g,`<span style="color:${n.keyColor}">"$1"</span>:`).replace(/: "([^"]*)"/g,`: <span style="color:${n.stringColor}">"$1"</span>`).replace(/: ([0-9]+\.?[0-9]*)/g,`: <span style="color:${n.numberColor}">$1</span>`).replace(/: (true|false)/g,`: <span style="color:${n.booleanColor}">$1</span>`).replace(/: (null)/g,`: <span style="color:${n.nullColor}">$1</span>`).replace(/[{}]/g,a=>`<span style="color:${n.braceColor}">${a}</span>`).replace(/[\[\]]/g,a=>`<span style="color:${n.bracketColor}">${a}</span>`).replace(/,/g,`<span style="color:${n.commaColor}">,</span>`)}catch(r){throw new Error(`JSON解析错误: ${r.message}`)}}function _v(t){try{const e=ps(t),s=JSON.parse(e),n={totalKeys:0,depth:0,arraysCount:0,objectsCount:0,stringsCount:0,numbersCount:0,booleansCount:0,nullCount:0,maxArrayLength:0,uniqueKeys:new Set};return ko(s,n,0),{totalKeys:n.totalKeys,uniqueKeys:n.uniqueKeys.size,depth:n.depth,arraysCount:n.arraysCount,objectsCount:n.objectsCount,stringsCount:n.stringsCount,numbersCount:n.numbersCount,booleansCount:n.booleansCount,nullCount:n.nullCount,maxArrayLength:n.maxArrayLength}}catch(e){throw new Error(`JSON解析错误: ${e.message}`)}}function ko(t,e,s){if(e.depth=Math.max(e.depth,s),t===null)e.nullCount++;else if(typeof t=="object")if(Array.isArray(t)){e.arraysCount++,e.maxArrayLength=Math.max(e.maxArrayLength,t.length);for(const n of t)ko(n,e,s+1)}else{e.objectsCount++;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e.totalKeys++,e.uniqueKeys.add(n),ko(t[n],e,s+1))}else typeof t=="string"?e.stringsCount++:typeof t=="number"?e.numbersCount++:typeof t=="boolean"&&e.booleansCount++}const yv={name:"JsonFormatter",setup(){const t=V(""),e=V(""),s=V(""),n=V(""),r=V(!1),o=V(2),i=V(!1),a=V(!0),l=V("default"),c=V(!1),d=V({}),h=V(!1),f=V(!1),p={default:{stringColor:"#0B7500",numberColor:"#1A01CC",booleanColor:"#1A01CC",nullColor:"#1A01CC",keyColor:"#881391",braceColor:"#000000",bracketColor:"#000000",commaColor:"#000000"},dark:{stringColor:"#6A8759",numberColor:"#6897BB",booleanColor:"#CC7832",nullColor:"#CC7832",keyColor:"#9876AA",braceColor:"#FFFFFF",bracketColor:"#FFFFFF",commaColor:"#FFFFFF"},pastel:{stringColor:"#98C379",numberColor:"#D19A66",booleanColor:"#56B6C2",nullColor:"#56B6C2",keyColor:"#E06C75",braceColor:"#ABB2BF",bracketColor:"#ABB2BF",commaColor:"#ABB2BF"}};Ze([e,a,l],()=>{a.value&&e.value&&g()});const g=()=>{try{s.value=vv(e.value,{...p[l.value],indentSize:Number(o.value),useTabs:h.value})}catch(R){console.error("高亮错误:",R),s.value=e.value}},y=R=>{if(!t.value.trim()){T("请输入JSON数据",!0);return}try{let j=t.value;if(j=j.replace(/([{,])\s*([a-zA-Z0-9_$]+)\s*:/g,'$1"$2":'),R==="format")f.value?e.value=Uc(j,h.value,Number(o.value)):h.value?e.value=Mc(j,i.value):e.value=Nc(j,Number(o.value),i.value),T("格式化成功",!1);else if(R==="minify")try{const ee=mv(j);ee&&ee.trim()?(e.value=ee,T("压缩成功：已移除所有空白字符和换行",!1),a.value=!1):(T("压缩结果为空，请检查输入",!0),e.value="")}catch(ee){console.error("压缩出错:",ee),e.value=t.value.replace(/\s+/g,""),T("使用基本压缩方式",!1)}}catch(j){console.error("格式化出错:",j),T(`JSON解析错误: ${j.message}。请确保键名使用双引号，例如 {"a":1}`,!0),e.value=""}},E=()=>{if(!t.value.trim()){T("请输入JSON数据",!0);return}let R=t.value;R=R.replace(/([{,])\s*([a-zA-Z0-9_$]+)\s*:/g,'$1"$2":');const j=gv(R);j.valid?T("验证成功：JSON格式有效",!1):T(`验证失败：${j.message}。请确保键名使用双引号，例如 {"a":1}`,!0)},C=()=>{try{let R=t.value;R=R.replace(/([{,])\s*([a-zA-Z0-9_$]+)\s*:/g,'$1"$2":'),d.value=_v(R),c.value=!0}catch(R){T(`分析失败：${R.message}。请确保键名使用双引号，例如 {"a":1}`,!0)}},_=()=>{c.value=!1},k=()=>{t.value="",e.value="",s.value="",n.value="",c.value=!1},w=()=>{e.value&&navigator.clipboard.writeText(e.value).then(()=>{T("已复制到剪贴板",!1)}).catch(R=>{console.error("复制失败:",R),T("复制失败",!0)})},T=(R,j)=>{n.value=R,r.value=j,setTimeout(()=>{n.value===R&&(n.value="")},3e3)};return{inputJson:t,formattedResult:e,highlightedResult:s,statusMessage:n,isError:r,indentSize:o,sortKeys:i,highlight:a,currentTheme:l,showAnalysis:c,analysis:d,useTabs:h,useManualFormat:f,processJson:y,validateJsonData:E,analyzeJson:C,closeAnalysis:_,clearJson:k,copyResult:w,reHighlight:g}}},bv={class:"json-formatter"},wv={class:"formatter-container"},kv={class:"form-group"},Sv={class:"options-panel"},Cv={class:"indent-option"},xv=["disabled"],Ev={class:"indent-type"},Tv={class:"format-type"},Av={class:"sort-option"},$v={class:"highlight-option"},Pv={class:"actions"},Ov={key:0,class:"form-group result-container"},Rv={class:"result-header"},Iv={key:0,class:"view-options"},jv={class:"color-theme"},Dv={class:"copy-actions"},Lv=["innerHTML"],Nv={key:1,id:"output-json",class:"output-area"},Mv={key:1,class:"analysis-panel"},Uv={class:"analysis-content"},Fv={class:"analysis-item"},Vv={class:"analysis-value"},Bv={class:"analysis-item"},Hv={class:"analysis-value"},qv={class:"analysis-item"},Jv={class:"analysis-value"},Kv={class:"analysis-item"},zv={class:"analysis-value"},Wv={class:"analysis-item"},Gv={class:"analysis-value"},Qv={class:"analysis-item"},Yv={class:"analysis-value"},Xv={class:"analysis-item"},Zv={class:"analysis-value"},e_={class:"analysis-item"},t_={class:"analysis-value"},s_={class:"analysis-item"},n_={class:"analysis-value"},r_={class:"analysis-item"},o_={class:"analysis-value"},i_={class:"status-icon"};function a_(t,e,s,n,r,o){return S(),x("div",bv,[e[44]||(e[44]=u("h2",null,[u("span",{class:"tool-icon"},"{ }"),he(" JSON格式化工具")],-1)),u("div",wv,[u("div",kv,[e[15]||(e[15]=u("label",{for:"input-json"},"输入JSON：",-1)),ge(u("textarea",{id:"input-json","onUpdate:modelValue":e[0]||(e[0]=i=>n.inputJson=i),class:"input-area",placeholder:"请输入需要格式化的JSON数据"},null,512),[[De,n.inputJson]]),e[16]||(e[16]=Fo('<div class="input-tips" data-v-d8e5328e><div class="tip" data-v-d8e5328e><span class="tip-icon" data-v-d8e5328e>💡</span><span class="tip-text" data-v-d8e5328e>标准JSON格式要求所有键名必须用双引号括起来，例如：{&quot;a&quot;:1} 而非 {a:1}</span></div><div class="tip" data-v-d8e5328e><span class="tip-icon" data-v-d8e5328e>🔄</span><span class="tip-text" data-v-d8e5328e>本工具会尝试自动修复一些常见格式错误</span></div></div>',1))]),u("div",Sv,[u("div",Cv,[e[18]||(e[18]=u("label",{for:"indent-size"},"缩进空格数：",-1)),ge(u("select",{id:"indent-size","onUpdate:modelValue":e[1]||(e[1]=i=>n.indentSize=i),disabled:n.useTabs},e[17]||(e[17]=[u("option",{value:"2"},"2",-1),u("option",{value:"4"},"4",-1),u("option",{value:"6"},"6",-1),u("option",{value:"8"},"8",-1)]),8,xv),[[qi,n.indentSize]])]),u("div",Ev,[ge(u("input",{type:"checkbox",id:"use-tabs","onUpdate:modelValue":e[2]||(e[2]=i=>n.useTabs=i)},null,512),[[Vn,n.useTabs]]),e[19]||(e[19]=u("label",{for:"use-tabs"},"使用Tab缩进",-1))]),u("div",Tv,[ge(u("input",{type:"checkbox",id:"use-manual","onUpdate:modelValue":e[3]||(e[3]=i=>n.useManualFormat=i)},null,512),[[Vn,n.useManualFormat]]),e[20]||(e[20]=u("label",{for:"use-manual"},"增强格式化",-1)),e[21]||(e[21]=u("span",{class:"tooltip"},[u("span",{class:"tooltip-icon"},"?"),u("span",{class:"tooltip-text"},"适用于特殊格式或复杂JSON")],-1))]),u("div",Av,[ge(u("input",{type:"checkbox",id:"sort-keys","onUpdate:modelValue":e[4]||(e[4]=i=>n.sortKeys=i)},null,512),[[Vn,n.sortKeys]]),e[22]||(e[22]=u("label",{for:"sort-keys"},"按键名排序",-1))]),u("div",$v,[ge(u("input",{type:"checkbox",id:"highlight","onUpdate:modelValue":e[5]||(e[5]=i=>n.highlight=i)},null,512),[[Vn,n.highlight]]),e[23]||(e[23]=u("label",{for:"highlight"},"语法高亮",-1))])]),u("div",Pv,[u("button",{class:"format-btn",onClick:e[6]||(e[6]=i=>n.processJson("format"))},e[24]||(e[24]=[u("span",{class:"btn-icon"},"✨",-1),he("格式化 ")])),u("button",{class:"minify-btn",onClick:e[7]||(e[7]=i=>n.processJson("minify"))},e[25]||(e[25]=[u("span",{class:"btn-icon"},"📦",-1),he("去除空格和换行 ")])),u("button",{class:"validate-btn",onClick:e[8]||(e[8]=(...i)=>n.validateJsonData&&n.validateJsonData(...i))},e[26]||(e[26]=[u("span",{class:"btn-icon"},"✓",-1),he("验证 ")])),n.formattedResult?(S(),x("button",{key:0,class:"analyze-btn",onClick:e[9]||(e[9]=(...i)=>n.analyzeJson&&n.analyzeJson(...i))},e[27]||(e[27]=[u("span",{class:"btn-icon"},"📊",-1),he("分析结构 ")]))):ae("",!0),u("button",{class:"clear-btn",onClick:e[10]||(e[10]=(...i)=>n.clearJson&&n.clearJson(...i))},e[28]||(e[28]=[u("span",{class:"btn-icon"},"🗑️",-1),he("清空 ")]))]),n.formattedResult?(S(),x("div",Ov,[u("div",Rv,[e[32]||(e[32]=u("label",{for:"output-json"},"结果：",-1)),n.highlight?(S(),x("div",Iv,[u("div",jv,[e[30]||(e[30]=u("label",{for:"theme"},"主题：",-1)),ge(u("select",{id:"theme","onUpdate:modelValue":e[11]||(e[11]=i=>n.currentTheme=i),onChange:e[12]||(e[12]=(...i)=>n.reHighlight&&n.reHighlight(...i))},e[29]||(e[29]=[u("option",{value:"default"},"默认",-1),u("option",{value:"dark"},"暗色",-1),u("option",{value:"pastel"},"柔和",-1)]),544),[[qi,n.currentTheme]])])])):ae("",!0),u("div",Dv,[u("button",{class:"copy-btn",onClick:e[13]||(e[13]=(...i)=>n.copyResult&&n.copyResult(...i))},e[31]||(e[31]=[u("span",{class:"btn-icon"},"📋",-1),he("复制结果 ")]))])]),n.highlight?(S(),x("div",{key:0,class:"output-area highlighted",innerHTML:n.highlightedResult},null,8,Lv)):(S(),x("pre",Nv,P(n.formattedResult),1))])):ae("",!0),n.showAnalysis?(S(),x("div",Mv,[e[43]||(e[43]=u("h3",null,"JSON结构分析",-1)),u("div",Uv,[u("div",Fv,[e[33]||(e[33]=u("span",{class:"analysis-label"},"总键数：",-1)),u("span",Vv,P(n.analysis.totalKeys),1)]),u("div",Bv,[e[34]||(e[34]=u("span",{class:"analysis-label"},"不同键数：",-1)),u("span",Hv,P(n.analysis.uniqueKeys),1)]),u("div",qv,[e[35]||(e[35]=u("span",{class:"analysis-label"},"最大深度：",-1)),u("span",Jv,P(n.analysis.depth),1)]),u("div",Kv,[e[36]||(e[36]=u("span",{class:"analysis-label"},"对象数量：",-1)),u("span",zv,P(n.analysis.objectsCount),1)]),u("div",Wv,[e[37]||(e[37]=u("span",{class:"analysis-label"},"数组数量：",-1)),u("span",Gv,P(n.analysis.arraysCount),1)]),u("div",Qv,[e[38]||(e[38]=u("span",{class:"analysis-label"},"字符串数量：",-1)),u("span",Yv,P(n.analysis.stringsCount),1)]),u("div",Xv,[e[39]||(e[39]=u("span",{class:"analysis-label"},"数字数量：",-1)),u("span",Zv,P(n.analysis.numbersCount),1)]),u("div",e_,[e[40]||(e[40]=u("span",{class:"analysis-label"},"布尔值数量：",-1)),u("span",t_,P(n.analysis.booleansCount),1)]),u("div",s_,[e[41]||(e[41]=u("span",{class:"analysis-label"},"null值数量：",-1)),u("span",n_,P(n.analysis.nullCount),1)]),u("div",r_,[e[42]||(e[42]=u("span",{class:"analysis-label"},"最长数组长度：",-1)),u("span",o_,P(n.analysis.maxArrayLength),1)])]),u("button",{class:"close-analysis-btn",onClick:e[14]||(e[14]=(...i)=>n.closeAnalysis&&n.closeAnalysis(...i))},"关闭分析")])):ae("",!0),n.statusMessage?(S(),x("div",{key:2,class:Se(["status-message",{"status-error":n.isError,"status-success":!n.isError}])},[u("span",i_,P(n.isError?"❌":"✅"),1),he(" "+P(n.statusMessage),1)],2)):ae("",!0)])])}const l_=Ie(yv,[["render",a_],["__scopeId","data-v-d8e5328e"]]);class Vc{constructor(e,s,n){this.I=e,this.J=s,this.Prev=n}isSnake(){return!1}}class c_ extends Vc{constructor(e,s,n){super(e,s,n)}}class ja extends Vc{constructor(e,s,n){super(e,s,n)}isSnake(){return!0}}class u_{equals(e,s){return e===s}}class d_{constructor(e=null){this.equalizer=e||new u_}equals(e,s){return this.equalizer.equals(e,s)}buildPath(e,s){var c,d,h,f;if(!e)throw new Error("原始序列为空");if(!s)throw new Error("修改序列为空");const n=e.length,r=s.length,o=n+r+1,i=1+2*o,a=Math.floor(i/2),l=new Array(i);l[a+1]=new ja(0,-1,null);for(let p=0;p<o;p++)for(let g=-p;g<=p;g+=2){const y=a+g,E=y+1,C=y-1;let _,k;g===-p||g!==p&&((c=l[C])==null?void 0:c.I)<((d=l[E])==null?void 0:d.I)?(_=((h=l[E])==null?void 0:h.I)||0,k=l[E]):(_=((f=l[C])==null?void 0:f.I)+1||1,k=l[C]);let w=_-g;l[C]=null;let T=new c_(_,w,k);for(;_<n&&w<r&&this.equals(e[_],s[w]);)_++,w++;if(_>T.I&&(T=new ja(_,w,T)),l[y]=T,_>=n&&w>=r)return l[y]}throw new Error("无法找到差异路径")}buildDiff(e,s,n){if(!e)throw new Error("路径为空");if(!s)throw new Error("原始序列为空");if(!n)throw new Error("修改序列为空");const r=[],o=[],i=[];let a=1,l=1;const c=[];let d=e;for(;d&&d.Prev;)c.push(d),d=d.Prev;c.reverse();let h=0,f=0;for(let p=0;p<c.length;p++){const g=c[p];if(g.isSnake())for(let y=h;y<g.I;y++){const E=y-(h-f);o.push({type:"unchanged",text:s[y],lineNumber:a++}),i.push({type:"unchanged",text:n[E],lineNumber:l++}),r.push({type:"unchanged",text:s[y]})}else g.I>h&&g.J>f?(o.push({type:"modified",text:s[g.I-1],lineNumber:a++}),i.push({type:"modified",text:n[g.J-1],lineNumber:l++}),r.push({type:"removed",text:s[g.I-1]}),r.push({type:"added",text:n[g.J-1]})):g.I>h?(o.push({type:"removed",text:s[g.I-1],lineNumber:a++}),r.push({type:"removed",text:s[g.I-1]})):g.J>f&&(i.push({type:"added",text:n[g.J-1],lineNumber:l++}),r.push({type:"added",text:n[g.J-1]}));h=g.I,f=g.J}return{result:r,leftLines:o,rightLines:i}}computeDiff(e,s){try{const n=this.buildPath(e,s);return this.buildDiff(n,e,s)}catch(n){throw console.error("对比文本时出错:",n),n}}}const h_={name:"TextDiff",setup(){const t=new d_,e=V(""),s=V(""),n=V({leftLines:[],rightLines:[]}),r=V(null),o=V(null),i=V(null),a=V(null),l=V(null),c=V(null),d=je(()=>n.value.leftLines||[]),h=je(()=>n.value.rightLines||[]),f=()=>{if(!e.value&&!s.value){n.value={leftLines:[],rightLines:[]};return}const _=e.value.split(`
`),k=s.value.split(`
`);try{n.value=t.computeDiff(_,k)}catch(w){console.error("对比文本时出错:",w),alert("对比文本时出错: "+w.message)}},p=()=>{f()},g=()=>{f()},y=()=>{e.value="",s.value="",n.value={leftLines:[],rightLines:[]}},E=_=>{!r.value||!o.value||!l.value||(o.value.scrollTop=_.target.scrollTop,l.value.scrollTop=_.target.scrollTop,i.value&&a.value&&c.value&&(i.value.scrollTop=_.target.scrollTop,a.value.scrollTop=_.target.scrollTop,c.value.scrollTop=_.target.scrollTop))},C=_=>{!i.value||!a.value||!c.value||(a.value.scrollTop=_.target.scrollTop,c.value.scrollTop=_.target.scrollTop,r.value&&o.value&&l.value&&(r.value.scrollTop=_.target.scrollTop,o.value.scrollTop=_.target.scrollTop,l.value.scrollTop=_.target.scrollTop))};return es(()=>{r.value&&r.value.addEventListener("scroll",E),i.value&&i.value.addEventListener("scroll",C)}),{originalText:e,modifiedText:s,diffResult:n,leftLines:d,rightLines:h,compareTexts:f,onOriginalTextChange:p,onModifiedTextChange:g,clearTexts:y,leftTextarea:r,leftHighlights:o,rightTextarea:i,rightHighlights:a,leftLineNumbers:l,rightLineNumbers:c}}},f_={class:"text-diff"},p_={class:"diff-container"},m_={class:"diff-code-container"},g_={class:"diff-code-panel left-panel"},v_={class:"diff-line-numbers",ref:"leftLineNumbers"},__={class:"diff-content"},y_={class:"code-highlights",ref:"leftHighlights"},b_={class:"line-content"},w_={class:"diff-code-panel right-panel"},k_={class:"diff-line-numbers",ref:"rightLineNumbers"},S_={class:"diff-content"},C_={class:"code-highlights",ref:"rightHighlights"},x_={class:"line-content"},E_={class:"actions"};function T_(t,e,s,n,r,o){return S(),x("div",f_,[e[6]||(e[6]=u("h2",null,"文本对比工具",-1)),u("div",p_,[e[5]||(e[5]=u("div",{class:"diff-header"},[u("div",{class:"left-header"},"原始文本"),u("div",{class:"right-header"},"修改后文本")],-1)),u("div",m_,[u("div",g_,[u("div",v_,[(S(!0),x(ue,null,Pe(n.leftLines,(i,a)=>(S(),x("div",{key:"left-num-"+a,class:"line-number"},P(i.lineNumber),1))),128))],512),u("div",__,[ge(u("textarea",{"onUpdate:modelValue":e[0]||(e[0]=i=>n.originalText=i),class:"code-textarea",onInput:e[1]||(e[1]=(...i)=>n.onOriginalTextChange&&n.onOriginalTextChange(...i)),placeholder:"请输入原始文本",ref:"leftTextarea"},null,544),[[De,n.originalText]]),u("div",y_,[(S(!0),x(ue,null,Pe(n.leftLines,(i,a)=>(S(),x("div",{key:"left-"+a,class:Se(["diff-line",{"diff-removed":i.type==="removed","diff-unchanged":i.type==="unchanged"}])},[u("span",b_,P(i.text),1)],2))),128))],512)])]),u("div",w_,[u("div",k_,[(S(!0),x(ue,null,Pe(n.rightLines,(i,a)=>(S(),x("div",{key:"right-num-"+a,class:"line-number"},P(i.lineNumber),1))),128))],512),u("div",S_,[ge(u("textarea",{"onUpdate:modelValue":e[2]||(e[2]=i=>n.modifiedText=i),class:"code-textarea",onInput:e[3]||(e[3]=(...i)=>n.onModifiedTextChange&&n.onModifiedTextChange(...i)),placeholder:"请输入修改后的文本",ref:"rightTextarea"},null,544),[[De,n.modifiedText]]),u("div",C_,[(S(!0),x(ue,null,Pe(n.rightLines,(i,a)=>(S(),x("div",{key:"right-"+a,class:Se(["diff-line",{"diff-added":i.type==="added","diff-unchanged":i.type==="unchanged"}])},[u("span",x_,P(i.text),1)],2))),128))],512)])])]),u("div",E_,[u("button",{class:"clear-btn",onClick:e[4]||(e[4]=(...i)=>n.clearTexts&&n.clearTexts(...i))},"清空")])])])}const A_=Ie(h_,[["render",T_],["__scopeId","data-v-7e859c47"]]),$_={name:"ColorPicker",setup(){const t=V("#2196f3"),e=V("#2196f3"),s=V(""),n=V(""),r=V(""),o=V("analogous"),i=[{label:"类似色",value:"analogous"},{label:"互补色",value:"complementary"},{label:"三元色",value:"triadic"},{label:"单色调",value:"monochromatic"}],a=()=>{e.value=t.value,s.value=c(t.value),n.value=d(t.value)},l=()=>{/^#[0-9A-F]{6}$/i.test(e.value)&&(t.value=e.value,s.value=c(e.value),n.value=d(e.value))},c=C=>{const _=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(C);if(!_)return"";const k=parseInt(_[1],16),w=parseInt(_[2],16),T=parseInt(_[3],16);return`rgb(${k}, ${w}, ${T})`},d=C=>{const _=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(C);if(!_)return"";let k=parseInt(_[1],16)/255,w=parseInt(_[2],16)/255,T=parseInt(_[3],16)/255;const R=Math.max(k,w,T),j=Math.min(k,w,T);let ee,U,Q=(R+j)/2;if(R===j)ee=U=0;else{const se=R-j;switch(U=Q>.5?se/(2-R-j):se/(R+j),R){case k:ee=(w-T)/se+(w<T?6:0);break;case w:ee=(T-k)/se+2;break;case T:ee=(k-w)/se+4;break}ee/=6}return ee=Math.round(ee*360),U=Math.round(U*100),Q=Math.round(Q*100),`hsl(${ee}, ${U}%, ${Q}%)`},h=(C,_)=>{const k=/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/i.exec(d(_));if(!k)return[];const w=parseInt(k[1]),T=parseInt(k[2]),R=parseInt(k[3]),j=[];switch(C){case"analogous":j.push(f(w,T,R)),j.push(f((w+30)%360,T,R)),j.push(f((w+60)%360,T,R)),j.push(f((w-30+360)%360,T,R)),j.push(f((w-60+360)%360,T,R));break;case"complementary":j.push(f(w,T,R)),j.push(f((w+180)%360,T,R)),j.push(f((w+180)%360,T,R-10)),j.push(f((w+180)%360,T,R+10)),j.push(f(w,T,R-10));break;case"triadic":j.push(f(w,T,R)),j.push(f((w+120)%360,T,R)),j.push(f((w+240)%360,T,R)),j.push(f((w+60)%360,T,R)),j.push(f((w+180)%360,T,R));break;case"monochromatic":j.push(f(w,T,R)),j.push(f(w,T,Math.max(0,R-20))),j.push(f(w,T,Math.max(0,R-40))),j.push(f(w,T,Math.min(100,R+20))),j.push(f(w,T,Math.min(100,R+40)));break}return j},f=(C,_,k)=>{C/=360,_/=100,k/=100;let w,T,R;if(_===0)w=T=R=k;else{const ee=(se,H,N)=>(N<0&&(N+=1),N>1&&(N-=1),N<.16666666666666666?se+(H-se)*6*N:N<.5?H:N<.6666666666666666?se+(H-se)*(.6666666666666666-N)*6:se),U=k<.5?k*(1+_):k+_-k*_,Q=2*k-U;w=ee(Q,U,C+1/3),T=ee(Q,U,C),R=ee(Q,U,C-1/3)}const j=ee=>{const U=Math.round(ee*255).toString(16);return U.length===1?"0"+U:U};return`#${j(w)}${j(T)}${j(R)}`},p=C=>{navigator.clipboard.writeText(C).then(()=>{r.value="已复制到剪贴板",setTimeout(()=>{r.value=""},2e3)}).catch(_=>{r.value="复制失败",console.error("复制失败: ",_)})},g=C=>{t.value=C,e.value=C,s.value=c(C),n.value=d(C)},y=C=>{o.value=C},E=je(()=>h(o.value,t.value));return Ze(t,a),es(()=>{a()}),{selectedColor:t,hexValue:e,rgbValue:s,hslValue:n,statusMessage:r,paletteTypes:i,selectedPaletteType:o,colorPalette:E,updateColorValues:a,updateFromHex:l,copyToClipboard:p,selectPaletteColor:g,changePaletteType:y}}},P_={class:"color-picker"},O_={class:"color-picker-container"},R_={class:"picker-section"},I_={class:"form-group"},j_={class:"form-group"},D_={class:"input-with-button"},L_={class:"form-group"},N_={class:"input-with-button"},M_={class:"form-group"},U_={class:"input-with-button"},F_={class:"palette-section"},V_={class:"palette-type"},B_=["onClick"],H_={class:"color-palette"},q_=["onClick"],J_={class:"color-label"},K_={key:0,class:"status-message"};function z_(t,e,s,n,r,o){return S(),x("div",P_,[e[14]||(e[14]=u("h1",null,"颜色选择器",-1)),u("div",O_,[u("div",R_,[u("div",I_,[e[9]||(e[9]=u("label",{for:"color-input"},"选择颜色",-1)),ge(u("input",{type:"color",id:"color-input","onUpdate:modelValue":e[0]||(e[0]=i=>n.selectedColor=i),onInput:e[1]||(e[1]=(...i)=>n.updateColorValues&&n.updateColorValues(...i))},null,544),[[De,n.selectedColor]])]),u("div",{class:"color-preview",style:Et({backgroundColor:n.selectedColor})},null,4),u("div",j_,[e[10]||(e[10]=u("label",{for:"hex-value"},"HEX",-1)),u("div",D_,[ge(u("input",{type:"text",id:"hex-value","onUpdate:modelValue":e[2]||(e[2]=i=>n.hexValue=i),onInput:e[3]||(e[3]=(...i)=>n.updateFromHex&&n.updateFromHex(...i))},null,544),[[De,n.hexValue]]),u("button",{onClick:e[4]||(e[4]=i=>n.copyToClipboard(n.hexValue))},"复制")])]),u("div",L_,[e[11]||(e[11]=u("label",{for:"rgb-value"},"RGB",-1)),u("div",N_,[ge(u("input",{type:"text",id:"rgb-value","onUpdate:modelValue":e[5]||(e[5]=i=>n.rgbValue=i),readonly:""},null,512),[[De,n.rgbValue]]),u("button",{onClick:e[6]||(e[6]=i=>n.copyToClipboard(n.rgbValue))},"复制")])]),u("div",M_,[e[12]||(e[12]=u("label",{for:"hsl-value"},"HSL",-1)),u("div",U_,[ge(u("input",{type:"text",id:"hsl-value","onUpdate:modelValue":e[7]||(e[7]=i=>n.hslValue=i),readonly:""},null,512),[[De,n.hslValue]]),u("button",{onClick:e[8]||(e[8]=i=>n.copyToClipboard(n.hslValue))},"复制")])])]),u("div",F_,[e[13]||(e[13]=u("h2",null,"颜色方案",-1)),u("div",V_,[(S(!0),x(ue,null,Pe(n.paletteTypes,(i,a)=>(S(),x("button",{key:a,class:Se({active:n.selectedPaletteType===i.value}),onClick:l=>n.changePaletteType(i.value)},P(i.label),11,B_))),128))]),u("div",H_,[(S(!0),x(ue,null,Pe(n.colorPalette,(i,a)=>(S(),x("div",{key:a,class:"palette-color",style:Et({backgroundColor:i}),onClick:l=>n.selectPaletteColor(i)},[u("div",J_,P(i),1)],12,q_))),128))])])]),n.statusMessage?(S(),x("div",K_,P(n.statusMessage),1)):ae("",!0)])}const W_=Ie($_,[["render",z_],["__scopeId","data-v-ec0604c7"]]),G_={name:"VideoParser",data(){return{videoUrl:"",isLoading:!1,finalVideoUrl:"",errorMessage:"",currentParserIndex:0,successParsers:[],failedParsers:[],currentSuccessParser:null,showParserInfo:!1,parserUrls:[{name:"纯净1",url:"https://im1907.top/?jx="},{name:"B站1",url:"https://jx.jsonplayer.com/player/?url="},{name:"爱豆",url:"https://jx.aidouer.net/?url="},{name:"听乐",url:"https://jx.dj6u.com/?url="},{name:"YT",url:"https://jx.yangtu.top/?url="},{name:"BL",url:"https://vip.bljiex.com/?v="},{name:"冰豆",url:"https://bd.jx.cn/?url="},{name:"CK",url:"https://www.ckplayer.vip/jiexi/?url="},{name:"弹幕",url:"https://dmjx.m3u8.tv/?url="},{name:"IK9",url:"https://yparse.ik9.cc/index.php?url="},{name:"JX",url:"https://jiexi.site/?url="},{name:"JY",url:"https://jx.playerjy.com/?url="},{name:"解析la",url:"https://api.jiexi.la/?url="},{name:"M3U8",url:"https://jx.m3u8.tv/jiexi/?url="},{name:"PM",url:"https://www.playm3u8.cn/jiexi.php?url="},{name:"盘古",url:"https://www.pangujiexi.cc/jiexi.php?url="},{name:"盘古2",url:"https://www.pangujiexi.com/jiexi/?url="},{name:"剖云",url:"https://www.pouyun.com/?url="},{name:"七哥",url:"https://jx.nnxv.cn/tv.php?url="},{name:"神哥",url:"https://json.ovvo.pro/jx.php?url="},{name:"维多",url:"https://jx.ivito.cn/?url="},{name:"虾米",url:"https://jx.xmflv.com/?url="},{name:"虾米2",url:"https://jx.xmflv.cc/?url="},{name:"夜幕",url:"https://www.yemu.xyz/?url="},{name:"云析",url:"https://jx.yparse.com/index.php?url="},{name:"17云",url:"https://www.1717yun.com/jx/ty.php?url="},{name:"180",url:"https://jx.000180.top/jx/?url="},{name:"2ys",url:"https://gj.fenxiangb.com/player/analysis.php?v="},{name:"8090",url:"https://www.8090g.cn/?url="}],maxConcurrentRequests:3,parsingTimeout:6e3}},methods:{async parseVideo(){if(!(!this.videoUrl||this.isLoading)){this.isLoading=!0,this.finalVideoUrl="",this.errorMessage="",this.currentParserIndex=0,this.successParsers=[],this.failedParsers=[],this.currentSuccessParser=null,this.showParserInfo=!1;try{if(!this.isValidUrl(this.videoUrl))throw new Error("请输入有效的视频链接");const t=this.maxConcurrentRequests;let e=!1;for(let s=0;s<this.parserUrls.length&&!e;s+=t){const r=this.parserUrls.slice(s,s+t).map((o,i)=>{const a=s+i;return this.currentParserIndex=a,this.testParser(o,a).then(l=>(l&&!e&&(e=!0,this.currentSuccessParser=o,this.finalVideoUrl=o.url+this.videoUrl,this.successParsers.push(a)),l)).catch(()=>(this.failedParsers.push(a),!1))});await Promise.all(r)}if(!e)throw new Error("所有解析接口均无法解析该视频，请检查视频链接是否正确或尝试其他视频")}catch(t){this.errorMessage=t.message}finally{this.isLoading=!1}}},testParser(t,e){return new Promise((s,n)=>{setTimeout(()=>{Math.random()>.7?s(!0):n(!1)},1e3+Math.random()*1e3)})},isValidUrl(t){try{return new URL(t),!0}catch{return!1}},copyUrl(){this.finalVideoUrl&&navigator.clipboard.writeText(this.finalVideoUrl).then(()=>{alert("解析地址已复制到剪贴板")}).catch(t=>{console.error("复制失败:",t),alert("复制失败，请手动复制")})},toggleParserInfo(){this.showParserInfo=!this.showParserInfo},manualSelectParser(t,e){this.isLoading||!this.videoUrl||this.currentSuccessParser&&this.currentSuccessParser.name===t.name||(this.failedParsers.includes(e)?confirm(`${t.name} 解析接口之前解析失败，是否仍要尝试使用该接口？`)&&this.useParser(t):this.useParser(t))},useParser(t){this.finalVideoUrl=t.url+this.videoUrl,this.currentSuccessParser=t,this.errorMessage=""}}},Q_={class:"video-parser-container"},Y_={class:"input-container"},X_=["disabled"],Z_={key:0,class:"status-container"},ey={class:"progress-container"},ty={class:"progress-text"},sy={class:"parser-status"},ny={class:"parser-name"},ry={class:"parser-indicator"},oy={key:0,class:"loading-dot"},iy={key:1,class:"success-icon"},ay={key:2,class:"failed-icon"},ly={key:1,class:"player-container"},cy=["src"],uy={class:"player-info"},dy={class:"success-message"},hy={class:"action-buttons"},fy={key:0,class:"parser-info"},py={class:"parser-info-header"},my={class:"parser-info-count"},gy={class:"parser-list"},vy=["onClick"],_y={class:"parser-list-name"},yy={class:"parser-status-tag"},by={key:0,class:"current-tag"},wy={key:1,class:"failed-tag"},ky={key:2,class:"untested-tag"},Sy={key:3,class:"success-tag"},Cy={key:2,class:"error-container"},xy={class:"error-message"};function Ey(t,e,s,n,r,o){return S(),x("div",Q_,[e[9]||(e[9]=u("div",{class:"video-parser-header"},[u("h1",null,"视频解析工具"),u("p",{class:"description"},"输入视频链接，同时使用多个解析接口进行解析，找到最佳播放源"),u("div",{class:"disclaimer"},"仅供学习研究使用，请勿用于任何商业用途。请尊重版权，支持正版。")],-1)),u("div",Y_,[ge(u("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>r.videoUrl=i),placeholder:"请输入需要解析的视频链接(优酷、爱奇艺、腾讯视频等)",onKeyup:e[1]||(e[1]=Ho((...i)=>o.parseVideo&&o.parseVideo(...i),["enter"]))},null,544),[[De,r.videoUrl]]),u("button",{class:"parse-btn",onClick:e[2]||(e[2]=(...i)=>o.parseVideo&&o.parseVideo(...i)),disabled:r.isLoading||!r.videoUrl},P(r.isLoading?"解析中...":"解析"),9,X_)]),r.isLoading?(S(),x("div",Z_,[u("div",ey,[e[5]||(e[5]=u("div",{class:"loader"},null,-1)),u("div",ty," 正在请求解析接口 ("+P(r.currentParserIndex+1)+"/"+P(r.parserUrls.length)+") ",1)]),u("div",sy,[(S(!0),x(ue,null,Pe(r.parserUrls,(i,a)=>(S(),x("div",{key:a,class:Se(["parser-item",{active:r.currentParserIndex===a,success:r.successParsers.includes(a),failed:r.failedParsers.includes(a)}])},[u("span",ny,P(i.name),1),u("span",ry,[r.currentParserIndex===a?(S(),x("span",oy)):r.successParsers.includes(a)?(S(),x("span",iy,"✓")):r.failedParsers.includes(a)?(S(),x("span",ay,"✗")):ae("",!0)])],2))),128))])])):ae("",!0),r.finalVideoUrl?(S(),x("div",ly,[u("iframe",{src:r.finalVideoUrl,frameborder:"0",allowfullscreen:"",class:"video-player"},null,8,cy),u("div",uy,[u("div",dy,[e[6]||(e[6]=u("span",{class:"success-icon"},"✓",-1)),he(" 成功使用 "+P(r.currentSuccessParser.name)+" 接口解析视频 ",1)]),u("div",hy,[u("button",{class:"info-btn",onClick:e[3]||(e[3]=(...i)=>o.toggleParserInfo&&o.toggleParserInfo(...i))},P(r.showParserInfo?"隐藏解析信息":"查看解析信息"),1),u("button",{class:"copy-btn",onClick:e[4]||(e[4]=(...i)=>o.copyUrl&&o.copyUrl(...i))},"复制解析地址")])]),r.showParserInfo?(S(),x("div",fy,[u("div",py,[e[7]||(e[7]=u("span",null,"解析接口信息",-1)),u("span",my,"共 "+P(r.parserUrls.length)+" 个接口",1)]),u("div",gy,[(S(!0),x(ue,null,Pe(r.parserUrls,(i,a)=>(S(),x("div",{key:a,class:Se(["parser-list-item",{"current-parser":r.currentSuccessParser&&r.currentSuccessParser.name===i.name,"failed-parser":r.failedParsers.includes(a),"untested-parser":!r.successParsers.includes(a)&&!r.failedParsers.includes(a)&&!r.isLoading}]),onClick:l=>o.manualSelectParser(i,a)},[u("span",_y,P(i.name),1),u("span",yy,[r.currentSuccessParser&&r.currentSuccessParser.name===i.name?(S(),x("span",by,"当前")):r.failedParsers.includes(a)?(S(),x("span",wy,"失败")):!r.successParsers.includes(a)&&!r.failedParsers.includes(a)&&!r.isLoading?(S(),x("span",ky,"未测试")):r.successParsers.includes(a)?(S(),x("span",Sy,"成功")):ae("",!0)])],10,vy))),128))])])):ae("",!0)])):ae("",!0),r.errorMessage?(S(),x("div",Cy,[u("div",xy,[e[8]||(e[8]=u("span",{class:"error-icon"},"!",-1)),he(" "+P(r.errorMessage),1)])])):ae("",!0),e[10]||(e[10]=u("div",{class:"tips-container"},[u("h3",null,"使用提示"),u("ul",null,[u("li",null,"支持优酷、爱奇艺、腾讯视频、芒果TV、搜狐视频等主流视频网站"),u("li",null,"请直接复制视频页面的完整URL地址"),u("li",null,"系统会自动尝试多个解析接口，直到找到可用的资源"),u("li",null,"如遇到解析失败，可能是视频太新或者版权限制严格")])],-1))])}const Ty=Ie(G_,[["render",Ey],["__scopeId","data-v-bb2ea40b"]]);/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var Bc="store";function Yo(t){return t===void 0&&(t=null),Qe(t!==null?t:Bc)}function Ws(t,e){Object.keys(t).forEach(function(s){return e(t[s],s)})}function Ay(t){return t!==null&&typeof t=="object"}function $y(t){return t&&typeof t.then=="function"}function Py(t,e){return function(){return t(e)}}function Hc(t,e,s){return e.indexOf(t)<0&&(s&&s.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function qc(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var s=t.state;xr(t,s,[],t._modules.root,!0),Xo(t,s,e)}function Xo(t,e,s){var n=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var r=t._wrappedGetters,o={};Ws(r,function(i,a){o[a]=Py(i,t),Object.defineProperty(t.getters,a,{get:function(){return o[a]()},enumerable:!0})}),t._state=Ks({data:e}),t.strict&&Dy(t),n&&s&&t._withCommit(function(){n.data=null})}function xr(t,e,s,n,r){var o=!s.length,i=t._modules.getNamespace(s);if(n.namespaced&&(t._modulesNamespaceMap[i],t._modulesNamespaceMap[i]=n),!o&&!r){var a=Zo(e,s.slice(0,-1)),l=s[s.length-1];t._withCommit(function(){a[l]=n.state})}var c=n.context=Oy(t,i,s);n.forEachMutation(function(d,h){var f=i+h;Ry(t,f,d,c)}),n.forEachAction(function(d,h){var f=d.root?h:i+h,p=d.handler||d;Iy(t,f,p,c)}),n.forEachGetter(function(d,h){var f=i+h;jy(t,f,d,c)}),n.forEachChild(function(d,h){xr(t,e,s.concat(h),d,r)})}function Oy(t,e,s){var n=e==="",r={dispatch:n?t.dispatch:function(o,i,a){var l=cr(o,i,a),c=l.payload,d=l.options,h=l.type;return(!d||!d.root)&&(h=e+h),t.dispatch(h,c)},commit:n?t.commit:function(o,i,a){var l=cr(o,i,a),c=l.payload,d=l.options,h=l.type;(!d||!d.root)&&(h=e+h),t.commit(h,c,d)}};return Object.defineProperties(r,{getters:{get:n?function(){return t.getters}:function(){return Jc(t,e)}},state:{get:function(){return Zo(t.state,s)}}}),r}function Jc(t,e){if(!t._makeLocalGettersCache[e]){var s={},n=e.length;Object.keys(t.getters).forEach(function(r){if(r.slice(0,n)===e){var o=r.slice(n);Object.defineProperty(s,o,{get:function(){return t.getters[r]},enumerable:!0})}}),t._makeLocalGettersCache[e]=s}return t._makeLocalGettersCache[e]}function Ry(t,e,s,n){var r=t._mutations[e]||(t._mutations[e]=[]);r.push(function(i){s.call(t,n.state,i)})}function Iy(t,e,s,n){var r=t._actions[e]||(t._actions[e]=[]);r.push(function(i){var a=s.call(t,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:t.getters,rootState:t.state},i);return $y(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(l){throw t._devtoolHook.emit("vuex:error",l),l}):a})}function jy(t,e,s,n){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(o){return s(n.state,n.getters,o.state,o.getters)})}function Dy(t){Ze(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function Zo(t,e){return e.reduce(function(s,n){return s[n]},t)}function cr(t,e,s){return Ay(t)&&t.type&&(s=e,e=t,t=t.type),{type:t,payload:e,options:s}}var Ly="vuex bindings",Da="vuex:mutations",zr="vuex:actions",Ts="vuex",Ny=0;function My(t,e){Pm({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Ly]},function(s){s.addTimelineLayer({id:Da,label:"Vuex Mutations",color:La}),s.addTimelineLayer({id:zr,label:"Vuex Actions",color:La}),s.addInspector({id:Ts,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),s.on.getInspectorTree(function(n){if(n.app===t&&n.inspectorId===Ts)if(n.filter){var r=[];Gc(r,e._modules.root,n.filter,""),n.rootNodes=r}else n.rootNodes=[Wc(e._modules.root,"")]}),s.on.getInspectorState(function(n){if(n.app===t&&n.inspectorId===Ts){var r=n.nodeId;Jc(e,r),n.state=Vy(Hy(e._modules,r),r==="root"?e.getters:e._makeLocalGettersCache,r)}}),s.on.editInspectorState(function(n){if(n.app===t&&n.inspectorId===Ts){var r=n.nodeId,o=n.path;r!=="root"&&(o=r.split("/").filter(Boolean).concat(o)),e._withCommit(function(){n.set(e._state.data,o,n.state.value)})}}),e.subscribe(function(n,r){var o={};n.payload&&(o.payload=n.payload),o.state=r,s.notifyComponentUpdate(),s.sendInspectorTree(Ts),s.sendInspectorState(Ts),s.addTimelineEvent({layerId:Da,event:{time:Date.now(),title:n.type,data:o}})}),e.subscribeAction({before:function(n,r){var o={};n.payload&&(o.payload=n.payload),n._id=Ny++,n._time=Date.now(),o.state=r,s.addTimelineEvent({layerId:zr,event:{time:n._time,title:n.type,groupId:n._id,subtitle:"start",data:o}})},after:function(n,r){var o={},i=Date.now()-n._time;o.duration={_custom:{type:"duration",display:i+"ms",tooltip:"Action duration",value:i}},n.payload&&(o.payload=n.payload),o.state=r,s.addTimelineEvent({layerId:zr,event:{time:Date.now(),title:n.type,groupId:n._id,subtitle:"end",data:o}})}})})}var La=8702998,Uy=6710886,Fy=16777215,Kc={label:"namespaced",textColor:Fy,backgroundColor:Uy};function zc(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function Wc(t,e){return{id:e||"root",label:zc(e),tags:t.namespaced?[Kc]:[],children:Object.keys(t._children).map(function(s){return Wc(t._children[s],e+s+"/")})}}function Gc(t,e,s,n){n.includes(s)&&t.push({id:n||"root",label:n.endsWith("/")?n.slice(0,n.length-1):n||"Root",tags:e.namespaced?[Kc]:[]}),Object.keys(e._children).forEach(function(r){Gc(t,e._children[r],s,n+r+"/")})}function Vy(t,e,s){e=s==="root"?e:e[s];var n=Object.keys(e),r={state:Object.keys(t.state).map(function(i){return{key:i,editable:!0,value:t.state[i]}})};if(n.length){var o=By(e);r.getters=Object.keys(o).map(function(i){return{key:i.endsWith("/")?zc(i):i,editable:!1,value:So(function(){return o[i]})}})}return r}function By(t){var e={};return Object.keys(t).forEach(function(s){var n=s.split("/");if(n.length>1){var r=e,o=n.pop();n.forEach(function(i){r[i]||(r[i]={_custom:{value:{},display:i,tooltip:"Module",abstract:!0}}),r=r[i]._custom.value}),r[o]=So(function(){return t[s]})}else e[s]=So(function(){return t[s]})}),e}function Hy(t,e){var s=e.split("/").filter(function(n){return n});return s.reduce(function(n,r,o){var i=n[r];if(!i)throw new Error('Missing module "'+r+'" for path "'+e+'".');return o===s.length-1?i:i._children},e==="root"?t:t.root._children)}function So(t){try{return t()}catch(e){return e}}var gt=function(e,s){this.runtime=s,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=(typeof n=="function"?n():n)||{}},Qc={namespaced:{configurable:!0}};Qc.namespaced.get=function(){return!!this._rawModule.namespaced};gt.prototype.addChild=function(e,s){this._children[e]=s};gt.prototype.removeChild=function(e){delete this._children[e]};gt.prototype.getChild=function(e){return this._children[e]};gt.prototype.hasChild=function(e){return e in this._children};gt.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};gt.prototype.forEachChild=function(e){Ws(this._children,e)};gt.prototype.forEachGetter=function(e){this._rawModule.getters&&Ws(this._rawModule.getters,e)};gt.prototype.forEachAction=function(e){this._rawModule.actions&&Ws(this._rawModule.actions,e)};gt.prototype.forEachMutation=function(e){this._rawModule.mutations&&Ws(this._rawModule.mutations,e)};Object.defineProperties(gt.prototype,Qc);var ms=function(e){this.register([],e,!1)};ms.prototype.get=function(e){return e.reduce(function(s,n){return s.getChild(n)},this.root)};ms.prototype.getNamespace=function(e){var s=this.root;return e.reduce(function(n,r){return s=s.getChild(r),n+(s.namespaced?r+"/":"")},"")};ms.prototype.update=function(e){Yc([],this.root,e)};ms.prototype.register=function(e,s,n){var r=this;n===void 0&&(n=!0);var o=new gt(s,n);if(e.length===0)this.root=o;else{var i=this.get(e.slice(0,-1));i.addChild(e[e.length-1],o)}s.modules&&Ws(s.modules,function(a,l){r.register(e.concat(l),a,n)})};ms.prototype.unregister=function(e){var s=this.get(e.slice(0,-1)),n=e[e.length-1],r=s.getChild(n);r&&r.runtime&&s.removeChild(n)};ms.prototype.isRegistered=function(e){var s=this.get(e.slice(0,-1)),n=e[e.length-1];return s?s.hasChild(n):!1};function Yc(t,e,s){if(e.update(s),s.modules)for(var n in s.modules){if(!e.getChild(n))return;Yc(t.concat(n),e.getChild(n),s.modules[n])}}function qy(t){return new et(t)}var et=function(e){var s=this;e===void 0&&(e={});var n=e.plugins;n===void 0&&(n=[]);var r=e.strict;r===void 0&&(r=!1);var o=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ms(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=o;var i=this,a=this,l=a.dispatch,c=a.commit;this.dispatch=function(f,p){return l.call(i,f,p)},this.commit=function(f,p,g){return c.call(i,f,p,g)},this.strict=r;var d=this._modules.root.state;xr(this,d,[],this._modules.root),Xo(this,d),n.forEach(function(h){return h(s)})},ei={state:{configurable:!0}};et.prototype.install=function(e,s){e.provide(s||Bc,this),e.config.globalProperties.$store=this;var n=this._devtools!==void 0?this._devtools:!1;n&&My(e,this)};ei.state.get=function(){return this._state.data};ei.state.set=function(t){};et.prototype.commit=function(e,s,n){var r=this,o=cr(e,s,n),i=o.type,a=o.payload,l={type:i,payload:a},c=this._mutations[i];c&&(this._withCommit(function(){c.forEach(function(h){h(a)})}),this._subscribers.slice().forEach(function(d){return d(l,r.state)}))};et.prototype.dispatch=function(e,s){var n=this,r=cr(e,s),o=r.type,i=r.payload,a={type:o,payload:i},l=this._actions[o];if(l){try{this._actionSubscribers.slice().filter(function(d){return d.before}).forEach(function(d){return d.before(a,n.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(d){return d(i)})):l[0](i);return new Promise(function(d,h){c.then(function(f){try{n._actionSubscribers.filter(function(p){return p.after}).forEach(function(p){return p.after(a,n.state)})}catch{}d(f)},function(f){try{n._actionSubscribers.filter(function(p){return p.error}).forEach(function(p){return p.error(a,n.state,f)})}catch{}h(f)})})}};et.prototype.subscribe=function(e,s){return Hc(e,this._subscribers,s)};et.prototype.subscribeAction=function(e,s){var n=typeof e=="function"?{before:e}:e;return Hc(n,this._actionSubscribers,s)};et.prototype.watch=function(e,s,n){var r=this;return Ze(function(){return e(r.state,r.getters)},s,Object.assign({},n))};et.prototype.replaceState=function(e){var s=this;this._withCommit(function(){s._state.data=e})};et.prototype.registerModule=function(e,s,n){n===void 0&&(n={}),typeof e=="string"&&(e=[e]),this._modules.register(e,s),xr(this,this.state,e,this._modules.get(e),n.preserveState),Xo(this,this.state)};et.prototype.unregisterModule=function(e){var s=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var n=Zo(s.state,e.slice(0,-1));delete n[e[e.length-1]]}),qc(this)};et.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};et.prototype.hotUpdate=function(e){this._modules.update(e),qc(this,!0)};et.prototype._withCommit=function(e){var s=this._committing;this._committing=!0,e(),this._committing=s};Object.defineProperties(et.prototype,ei);const Jy={name:"GoogleIcon",props:{size:{type:[Number,String],default:16},color:{type:String,default:"#FFFFFF"}}},Ky=["width","height"],zy=["fill"],Wy=["fill"],Gy=["fill"],Qy=["fill"];function Yy(t,e,s,n,r,o){return S(),x("svg",{class:"google-icon",width:s.size,height:s.size,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:Et({width:`${s.size}px`,height:`${s.size}px`})},[u("path",{fill:s.color,d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"},null,8,zy),u("path",{fill:s.color,d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"},null,8,Wy),u("path",{fill:s.color,d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"},null,8,Gy),u("path",{fill:s.color,d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"},null,8,Qy)],12,Ky)}const ti=Ie(Jy,[["render",Yy],["__scopeId","data-v-a6e8b751"]]),Xy={install:t=>{t.component("GoogleIcon",ti)}},Zy={name:"ChatTool",components:{GoogleIcon:ti},setup(){const t=jc(),e=Yo(),s=V(null),n=V([]),r=V(""),o=V(null),i=V(null),a=V(!0),l=V(!1),c=V(null),d=V("游客"+Math.floor(Math.random()*1e3)),h=V("anon_"+Date.now().toString());let f=null;const p=Qe("toast"),g=async()=>{const{data:N}=await ce.auth.getSession();console.log("getSession",N),s.value=N.session},y=()=>{const N=["快乐","开心","阳光","微笑","活力","机智","聪明","勇敢","友善","好奇"],G=["小猫","小狗","企鹅","狮子","老虎","熊猫","兔子","松鼠","鹦鹉","海豚"],we=N[Math.floor(Math.random()*N.length)],xe=G[Math.floor(Math.random()*G.length)],le=Math.floor(Math.random()*1e3);return`${we}${xe}${le}`},E=()=>{d.value=y(),p.show(`你的昵称已更改为: ${d.value}`)},C=je(()=>s.value?s.value.user.user_metadata.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(s.value.user.user_metadata.full_name)}&background=random`:`https://ui-avatars.com/api/?name=${encodeURIComponent(d.value)}&background=random`),_=je(()=>s.value?s.value.user.user_metadata.full_name||s.value.user.email:d.value),k=N=>s.value&&N.user_id?N.user_id===s.value.user.id:!s.value&&N.anonymous_id?N.anonymous_id===h.value:!1,w=async()=>{a.value=!0;try{const{data:N,error:G}=await ce.from("messages").select("*").order("created_at",{ascending:!0});if(G){console.error("获取消息失败:",G);return}n.value=N}catch(N){console.error("获取消息出错:",N)}finally{a.value=!1,Q()}},T=async()=>{if(!r.value.trim()||l.value)return;const N=r.value.trim();r.value="",l.value=!0;const G={content:N};s.value?(G.user_id=s.value.user.id,G.username=s.value.user.user_metadata.full_name||s.value.user.email,G.avatar_url=s.value.user.user_metadata.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(G.username)}&background=random`):(G.username=d.value,G.anonymous_id=h.value,G.avatar_url=`https://ui-avatars.com/api/?name=${encodeURIComponent(d.value)}&background=random`);try{const{error:we}=await ce.from("messages").insert([G]);if(we){console.error("发送消息失败:",we),p.show("发送消息失败，请重试"),r.value=N;return}jt(()=>{c.value&&c.value.focus()})}catch(we){console.error("发送消息出错:",we),p.show("发送消息失败，请重试"),r.value=N}finally{l.value=!1}},R=async()=>{e.dispatch("saveAuthSource","/tools/chat/chat");const N=`${window.location.origin}${window.location.pathname}#/auth/callback`;console.log("登录重定向URL:",N);const{error:G}=await ce.auth.signInWithOAuth({provider:"google",options:{redirectTo:N}});G&&(console.error("登录失败:",G),p.show("登录失败，请重试"))},j=async()=>{const{error:N}=await ce.auth.signOut();if(N){console.error("退出登录失败:",N),p.show("退出登录失败，请重试");return}console.log("成功退出登录"),s.value=null,window.location.reload()},ee=N=>{if(!N)return"";const G=new Date(N),we=new Date;if(we-G<24*60*60*1e3&&G.getDate()===we.getDate()&&G.getMonth()===we.getMonth()&&G.getFullYear()===we.getFullYear())return`${G.getHours().toString().padStart(2,"0")}:${G.getMinutes().toString().padStart(2,"0")}`;const le=new Date(we);return le.setDate(le.getDate()-1),G.getDate()===le.getDate()&&G.getMonth()===le.getMonth()&&G.getFullYear()===le.getFullYear()?`昨天 ${G.getHours().toString().padStart(2,"0")}:${G.getMinutes().toString().padStart(2,"0")}`:`${G.getMonth()+1}月${G.getDate()}日 ${G.getHours().toString().padStart(2,"0")}:${G.getMinutes().toString().padStart(2,"0")}`},U=()=>{f=ce.channel("messages-channel").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},N=>{n.value.push(N.new),jt(Q)}).subscribe(N=>{console.log("实时消息订阅状态:",N)})},Q=()=>{jt(()=>{o.value&&(o.value.scrollTop=o.value.scrollHeight)})};Ze(n,()=>{Q()});const se=()=>{t.push("/tools/private-chat")};es(async()=>{if(await g(),await w(),U(),jt(()=>{c.value&&c.value.focus()}),!s.value){const N=localStorage.getItem("anonymousName"),G=localStorage.getItem("anonymousId");N?d.value=N:d.value=y(),G?h.value=G:localStorage.setItem("anonymousId",h.value)}ce.auth.onAuthStateChange((N,G)=>{console.log("认证状态变化:",N,G?"已登录":"未登录"),s.value=G}),document.addEventListener("visibilitychange",H),window.addEventListener("resize",Q)});const H=()=>{document.visibilityState==="visible"&&w()};return Ze(d,N=>{s.value||localStorage.setItem("anonymousName",N)}),Ze(s,N=>{console.log("会话状态变化:",N?"已登录":"未登录")}),_r(()=>{f&&ce.removeChannel(f),document.removeEventListener("visibilitychange",H),window.removeEventListener("resize",Q)}),{session:s,messages:n,newMessage:r,messagesContainer:o,messagesEnd:i,anonymousName:d,userAvatar:C,userName:_,signInWithGoogle:R,signOut:j,sendMessage:T,formatTime:ee,isMyMessage:k,loading:a,sending:l,messageInput:c,goToPrivateChat:se,changeAnonymousName:E}}},eb={class:"chat-container"},tb={class:"chat-navigation"},sb={class:"chat-main"},nb={class:"chat-header"},rb={class:"chat-user-info"},ob=["src"],ib={class:"chat-username"},ab={class:"chat-actions"},lb={class:"messages",ref:"messagesContainer"},cb={key:0,class:"loading-container"},ub={key:1,class:"empty-messages"},db={class:"message-avatar"},hb=["src"],fb={class:"message-content"},pb={class:"message-header"},mb={class:"message-author"},gb={class:"message-time"},vb={class:"message-text"},_b={ref:"messagesEnd",class:"messages-end"},yb={class:"input-area"},bb=["disabled"],wb={key:0},kb={key:1};function Sb(t,e,s,n,r,o){const i=Ge("router-link"),a=Ge("GoogleIcon");return S(),x("div",eb,[e[12]||(e[12]=u("h1",null,"实时聊天工具",-1)),u("div",tb,[W(i,{to:"/tools/chat/chat",class:"nav-link active"},{default:re(()=>e[7]||(e[7]=[he("公共聊天")])),_:1}),W(i,{to:"/tools/chat/private-chat",class:"nav-link"},{default:re(()=>e[8]||(e[8]=[he("私人聊天")])),_:1})]),u("div",sb,[u("div",nb,[u("div",rb,[u("img",{src:n.userAvatar,class:"chat-avatar"},null,8,ob),u("span",ib,P(n.userName),1),n.session?ae("",!0):(S(),x("button",{key:0,onClick:e[0]||(e[0]=(...l)=>n.signInWithGoogle&&n.signInWithGoogle(...l)),class:"chat-login-button"},[W(a,{size:16}),e[9]||(e[9]=he(" Google登录 "))])),n.session?ae("",!0):(S(),x("button",{key:1,onClick:e[1]||(e[1]=(...l)=>n.changeAnonymousName&&n.changeAnonymousName(...l)),class:"chat-random-name-button"},"随机昵称"))]),u("div",ab,[n.session?(S(),x("button",{key:0,onClick:e[2]||(e[2]=(...l)=>n.goToPrivateChat&&n.goToPrivateChat(...l)),class:"chat-action-button"},"创建私聊")):ae("",!0),n.session?(S(),x("button",{key:1,onClick:e[3]||(e[3]=(...l)=>n.signOut&&n.signOut(...l)),class:"chat-logout-button"},"退出登录")):ae("",!0)])]),u("div",lb,[n.loading?(S(),x("div",cb,e[10]||(e[10]=[u("div",{class:"loading-spinner"},null,-1),u("span",null,"加载中...",-1)]))):n.messages.length===0?(S(),x("div",ub,e[11]||(e[11]=[u("p",null,"还没有消息，开始聊天吧！",-1)]))):ae("",!0),(S(!0),x(ue,null,Pe(n.messages,l=>(S(),x("div",{key:l.id,class:Se(["message",n.isMyMessage(l)?"my-message":"other-message"])},[u("div",db,[u("img",{src:l.avatar_url},null,8,hb)]),u("div",fb,[u("div",pb,[u("span",mb,P(l.username),1),u("span",gb,P(n.formatTime(l.created_at)),1)]),u("div",vb,P(l.content),1)])],2))),128)),u("div",_b,null,512)],512),u("div",yb,[ge(u("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>n.newMessage=l),onKeyup:e[5]||(e[5]=Ho((...l)=>n.sendMessage&&n.sendMessage(...l),["enter"])),ref:"messageInput",placeholder:"输入消息...",class:"message-input"},null,544),[[De,n.newMessage]]),u("button",{onClick:e[6]||(e[6]=(...l)=>n.sendMessage&&n.sendMessage(...l)),class:"send-button",disabled:!n.newMessage.trim()||n.sending},[n.sending?(S(),x("span",wb,"发送中...")):(S(),x("span",kb,"发送"))],8,bb)])])])}const Cb=Ie(Zy,[["render",Sb],["__scopeId","data-v-d537c929"]]),xb={name:"PrivateChat",components:{GoogleIcon:ti},setup(){const t=V(null),e=V(!0),s=V(!1),n=V(!1),r=Yo(),o=Qe("toast"),i=V("游客"+Math.floor(Math.random()*1e3)),a=V("anon_"+Date.now().toString()),l=V([]),c=V(null),d=V(null),h=V([]),f=V(""),p=V(null);let g=null,y=null;const E=V(!1),C=V(!1),_=V(""),k=V(""),w=()=>{const q=["快乐","开心","阳光","微笑","活力","机智","聪明","勇敢","友善","好奇"],Y=["小猫","小狗","企鹅","狮子","老虎","熊猫","兔子","松鼠","鹦鹉","海豚"],Re=q[Math.floor(Math.random()*q.length)],Ve=Y[Math.floor(Math.random()*Y.length)],$e=Math.floor(Math.random()*1e3);return`${Re}${Ve}${$e}`},T=()=>{i.value=w(),o.show(`你的昵称已更改为: ${i.value}`)},R=async()=>{const{data:q}=await ce.auth.getSession();t.value=q.session},j=je(()=>t.value?t.value.user.user_metadata.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.value.user.user_metadata.full_name)}&background=random`:`https://ui-avatars.com/api/?name=${encodeURIComponent(i.value)}&background=random`),ee=je(()=>t.value?t.value.user.user_metadata.full_name||t.value.user.email:i.value),U=async()=>{if(t.value){e.value=!0;try{const{data:q,error:Y}=await ce.from("chat_room_members").select("room_id, role").eq("user_id",t.value.user.id);if(Y)throw Y;if(!q||q.length===0){l.value=[],e.value=!1;return}const Re=q.map(L=>L.room_id),{data:Ve,error:$e}=await ce.from("chat_rooms").select("*").in("id",Re);if($e)throw $e;const A=Ve.map(L=>{const K=q.find(ye=>ye.room_id===L.id);return{...L,role:K?K.role:"member"}});A.sort((L,K)=>new Date(K.updated_at)-new Date(L.updated_at));const J=[...A];for(const L of J)try{const{data:K}=await ce.from("private_messages").select("content, created_at").eq("room_id",L.id).order("created_at",{ascending:!1}).limit(1);K&&K.length>0&&(L.last_message=K[0].content,L.last_message_time=K[0].created_at)}catch(K){console.error(`获取聊天室 ${L.id} 的最后一条消息失败:`,K)}l.value=J,c.value&&!J.some(L=>L.id===c.value)&&(c.value=null,d.value=null,h.value=[])}catch(q){console.error("获取聊天室失败:",q)}finally{e.value=!1}}},Q=q=>{c.value=q,d.value=l.value.find(Y=>Y.id===q),se()},se=async()=>{if(c.value){s.value=!0;try{const{data:q,error:Y}=await ce.from("private_messages").select("*").eq("room_id",c.value).order("created_at",{ascending:!0});if(Y)throw Y;h.value=q}catch(q){console.error("获取消息失败:",q)}finally{s.value=!1,le()}}},H=async()=>{if(!(!t.value||!_.value.trim()))try{const{data:q,error:Y}=await ce.from("chat_rooms").insert([{name:_.value.trim(),created_by:t.value.user.id}]).select();if(Y)throw Y;const Re=q[0].id,{error:Ve}=await ce.from("chat_room_members").insert([{room_id:Re,user_id:t.value.user.id,role:"owner"}]);if(Ve)throw Ve;U(),_.value="",E.value=!1,Q(Re)}catch(q){console.error("创建聊天室失败:",q),o.show("创建聊天室失败，请重试")}},N=async()=>{if(!(!t.value||!c.value||!k.value.trim()))try{const{data:q,error:Y}=await ce.from("profiles").select("id").eq("email",k.value.trim());if(Y)throw Y;if(!q||q.length===0){o.show("找不到该用户，请确认邮箱地址");return}const Re=q[0].id,{error:Ve}=await ce.from("chat_room_members").insert([{room_id:c.value,user_id:Re,role:"member"}]);if(Ve){if(Ve.code==="23505"){o.show("该用户已在聊天室中");return}throw Ve}k.value="",C.value=!1,o.show("邀请成功")}catch(q){console.error("邀请用户失败:",q),o.show("邀请用户失败，请重试")}},G=async()=>{if(!t.value||!c.value||!f.value.trim()||n.value)return;const q=f.value.trim();f.value="",n.value=!0;try{const{error:Y}=await ce.from("private_messages").insert([{room_id:c.value,user_id:t.value.user.id,content:q,username:ee.value,avatar_url:j.value}]);if(Y)throw Y;await ce.from("chat_rooms").update({updated_at:new Date().toISOString()}).eq("id",c.value)}catch(Y){console.error("发送消息失败:",Y),o.show("发送消息失败，请重试"),f.value=q}finally{n.value=!1}},we=q=>t.value&&q.user_id===t.value.user.id,xe=q=>{if(!q)return"";const Y=new Date(q),Re=new Date;if(Re-Y<24*60*60*1e3&&Y.getDate()===Re.getDate()&&Y.getMonth()===Re.getMonth()&&Y.getFullYear()===Re.getFullYear())return`${Y.getHours().toString().padStart(2,"0")}:${Y.getMinutes().toString().padStart(2,"0")}`;const $e=new Date(Re);return $e.setDate($e.getDate()-1),Y.getDate()===$e.getDate()&&Y.getMonth()===$e.getMonth()&&Y.getFullYear()===$e.getFullYear()?`昨天 ${Y.getHours().toString().padStart(2,"0")}:${Y.getMinutes().toString().padStart(2,"0")}`:`${Y.getMonth()+1}月${Y.getDate()}日 ${Y.getHours().toString().padStart(2,"0")}:${Y.getMinutes().toString().padStart(2,"0")}`},le=()=>{jt(()=>{p.value&&(p.value.scrollTop=p.value.scrollHeight)})},pe=async()=>{r.dispatch("saveAuthSource","/tools/chat/private-chat");const q=`${window.location.origin}${window.location.pathname}#/auth/callback`,{error:Y}=await ce.auth.signInWithOAuth({provider:"google",options:{redirectTo:q}});Y&&(console.error("登录失败:",Y),o.show("登录失败，请重试"))},ut=async()=>{const{error:q}=await ce.auth.signOut();if(q){console.error("退出登录失败:",q),o.show("退出登录失败，请重试");return}t.value=null,l.value=[],c.value=null,d.value=null,h.value=[]},vt=()=>{!c.value||!t.value||(g&&ce.removeChannel(g),g=ce.channel(`private-room-${c.value}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"private_messages",filter:`room_id=eq.${c.value}`},q=>{h.value.push(q.new),jt(le)}).subscribe(q=>{console.log(`实时消息订阅状态 (房间 ${c.value}):`,q)}))},tt=()=>{t.value&&(y=ce.channel("private-rooms-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_rooms"},()=>{U()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chat_rooms"},()=>{U()}).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_room_members",filter:`user_id=eq.${t.value.user.id}`},()=>{U()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"chat_room_members",filter:`user_id=eq.${t.value.user.id}`},()=>{U()}).subscribe(q=>{console.log("聊天室订阅状态:",q)}))};return Ze(c,q=>{q?vt():g&&(ce.removeChannel(g),g=null)}),es(async()=>{if(await R(),t.value&&(await U(),tt()),!t.value){const q=localStorage.getItem("anonymousName"),Y=localStorage.getItem("anonymousId");q?i.value=q:i.value=w(),Y?a.value=Y:localStorage.setItem("anonymousId",a.value)}ce.auth.onAuthStateChange((q,Y)=>{t.value=Y,Y?(U(),tt()):(l.value=[],c.value=null,d.value=null,h.value=[],g&&(ce.removeChannel(g),g=null),y&&(ce.removeChannel(y),y=null))})}),Ze(i,q=>{t.value||localStorage.setItem("anonymousName",q)}),_r(()=>{g&&ce.removeChannel(g),y&&ce.removeChannel(y)}),{session:t,loading:e,loadingMessages:s,sending:n,chatRooms:l,currentRoomId:c,currentRoom:d,messages:h,newMessage:f,showCreateRoomModal:E,showInviteModal:C,newRoomName:_,inviteEmail:k,userAvatar:j,userName:ee,messagesContainer:p,formatTime:xe,isMyMessage:we,selectRoom:Q,fetchMessages:se,createRoom:H,inviteUser:N,sendMessage:G,signInWithGoogle:pe,signOut:ut,anonymousName:i,anonymousId:a,changeAnonymousName:T}}},Eb={class:"private-chat-container"},Tb={class:"chat-navigation"},Ab={class:"chat-main"},$b={class:"sidebar"},Pb={class:"user-info"},Ob=["src"],Rb={class:"username"},Ib={class:"chat-list"},jb={key:0,class:"loading"},Db={key:1,class:"empty-list"},Lb=["onClick"],Nb={class:"chat-item-info"},Mb={class:"chat-name"},Ub={class:"chat-last-message"},Fb={class:"chat-content"},Vb={key:0,class:"no-room-selected"},Bb={class:"room-header"},Hb={class:"messages",ref:"messagesContainer"},qb={key:0,class:"loading"},Jb={key:1,class:"empty-messages"},Kb={class:"message-avatar"},zb=["src"],Wb={class:"message-content"},Gb={class:"message-header"},Qb={class:"message-author"},Yb={class:"message-time"},Xb={class:"message-text"},Zb={class:"input-area"},ew=["disabled"],tw={key:0},sw={key:1},nw={key:0,class:"modal"},rw={class:"modal-content"},ow={class:"modal-actions"},iw=["disabled"],aw={key:1,class:"modal"},lw={class:"modal-content"},cw={class:"modal-actions"},uw=["disabled"];function dw(t,e,s,n,r,o){var l;const i=Ge("router-link"),a=Ge("GoogleIcon");return S(),x("div",Eb,[e[21]||(e[21]=u("h1",null,"实时聊天工具",-1)),u("div",Tb,[W(i,{to:"/tools/chat/chat",class:"nav-link"},{default:re(()=>e[13]||(e[13]=[he("公共聊天")])),_:1}),W(i,{to:"/tools/chat/private-chat",class:"nav-link active"},{default:re(()=>e[14]||(e[14]=[he("私人聊天")])),_:1})]),u("div",Ab,[u("div",$b,[u("div",Pb,[u("img",{src:n.userAvatar,class:"user-avatar"},null,8,Ob),u("span",Rb,P(n.userName),1),n.session?(S(),x("button",{key:1,onClick:e[1]||(e[1]=(...c)=>n.signOut&&n.signOut(...c)),class:"logout-button"},"退出")):(S(),x("button",{key:0,onClick:e[0]||(e[0]=(...c)=>n.signInWithGoogle&&n.signInWithGoogle(...c)),class:"login-button"},[W(a,{size:14}),e[15]||(e[15]=he(" Google登录 "))]))]),u("div",Ib,[e[16]||(e[16]=u("h3",null,"聊天列表",-1)),n.loading?(S(),x("div",jb,"加载中...")):n.chatRooms.length===0?(S(),x("div",Db," 还没有聊天，创建一个吧！ ")):ae("",!0),(S(!0),x(ue,null,Pe(n.chatRooms,c=>(S(),x("div",{key:c.id,class:Se(["chat-item",n.currentRoomId===c.id?"active":""]),onClick:d=>n.selectRoom(c.id)},[u("div",Nb,[u("span",Mb,P(c.name),1),u("span",Ub,P(c.last_message||"无消息"),1)])],10,Lb))),128))]),u("button",{onClick:e[2]||(e[2]=c=>n.showCreateRoomModal=!0),class:"create-room-btn"},"创建新聊天")]),u("div",Fb,[n.currentRoomId?(S(),x(ue,{key:1},[u("div",Bb,[u("h3",null,P((l=n.currentRoom)==null?void 0:l.name),1),u("button",{onClick:e[3]||(e[3]=c=>n.showInviteModal=!0),class:"invite-btn"},"邀请")]),u("div",Hb,[n.loadingMessages?(S(),x("div",qb,"加载消息中...")):n.messages.length===0?(S(),x("div",Jb,e[18]||(e[18]=[u("p",null,"还没有消息，开始聊天吧！",-1)]))):ae("",!0),(S(!0),x(ue,null,Pe(n.messages,c=>(S(),x("div",{key:c.id,class:Se(["message",n.isMyMessage(c)?"my-message":"other-message"])},[u("div",Kb,[u("img",{src:c.avatar_url,alt:"avatar"},null,8,zb)]),u("div",Wb,[u("div",Gb,[u("span",Qb,P(c.username),1),u("span",Yb,P(n.formatTime(c.created_at)),1)]),u("div",Xb,P(c.content),1)])],2))),128))],512),u("div",Zb,[ge(u("input",{"onUpdate:modelValue":e[4]||(e[4]=c=>n.newMessage=c),onKeyup:e[5]||(e[5]=Ho((...c)=>n.sendMessage&&n.sendMessage(...c),["enter"])),placeholder:"输入消息...",class:"message-input"},null,544),[[De,n.newMessage]]),u("button",{onClick:e[6]||(e[6]=(...c)=>n.sendMessage&&n.sendMessage(...c)),class:"send-button",disabled:!n.newMessage.trim()||n.sending},[n.sending?(S(),x("span",tw,"发送中...")):(S(),x("span",sw,"发送"))],8,ew)])],64)):(S(),x("div",Vb,e[17]||(e[17]=[u("p",null,"请选择一个聊天或创建新的聊天",-1)])))])]),n.showCreateRoomModal?(S(),x("div",nw,[u("div",rw,[e[19]||(e[19]=u("h3",null,"创建新聊天",-1)),ge(u("input",{"onUpdate:modelValue":e[7]||(e[7]=c=>n.newRoomName=c),placeholder:"聊天名称",class:"modal-input"},null,512),[[De,n.newRoomName]]),u("div",ow,[u("button",{onClick:e[8]||(e[8]=c=>n.showCreateRoomModal=!1),class:"cancel-btn"},"取消"),u("button",{onClick:e[9]||(e[9]=(...c)=>n.createRoom&&n.createRoom(...c)),disabled:!n.newRoomName.trim(),class:"confirm-btn"},"创建",8,iw)])])])):ae("",!0),n.showInviteModal?(S(),x("div",aw,[u("div",lw,[e[20]||(e[20]=u("h3",null,"邀请用户",-1)),ge(u("input",{"onUpdate:modelValue":e[10]||(e[10]=c=>n.inviteEmail=c),placeholder:"用户邮箱",class:"modal-input"},null,512),[[De,n.inviteEmail]]),u("div",cw,[u("button",{onClick:e[11]||(e[11]=c=>n.showInviteModal=!1),class:"cancel-btn"},"取消"),u("button",{onClick:e[12]||(e[12]=(...c)=>n.inviteUser&&n.inviteUser(...c)),disabled:!n.inviteEmail.trim(),class:"confirm-btn"},"邀请",8,uw)])])])):ae("",!0)])}const hw=Ie(xb,[["render",dw],["__scopeId","data-v-f2591f95"]]),fw={class:"dialog-content"},pw={__name:"DraggableDialog",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:"对话框"},initialWidth:{type:Number,default:400},initialHeight:{type:Number,default:300},minWidth:{type:Number,default:200},minHeight:{type:Number,default:150},closeOnOverlayClick:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(t){const e=t,s=V(null),n=V({x:0,y:0}),r=V({width:e.initialWidth,height:e.initialHeight}),o=je(()=>({transform:`translate(${n.value.x}px, ${n.value.y}px)`,width:`${r.value.width}px`,height:`${r.value.height}px`}));let i=!1,a=0,l=0,c=0,d=0;const h=w=>{i=!0,a=w.clientX,l=w.clientY,c=n.value.x,d=n.value.y,document.addEventListener("mousemove",f),document.addEventListener("mouseup",p)},f=w=>{if(!i)return;const T=w.clientX-a,R=w.clientY-l;n.value={x:c+T,y:d+R}},p=()=>{i=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",p)};let g=!1,y=0,E=0;const C=w=>{g=!0,a=w.clientX,l=w.clientY,y=r.value.width,E=r.value.height,document.addEventListener("mousemove",_),document.addEventListener("mouseup",k)},_=w=>{if(!g)return;const T=w.clientX-a,R=w.clientY-l;r.value={width:Math.max(e.minWidth,y+T),height:Math.max(e.minHeight,E+R)}},k=()=>{g=!1,document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",k)};return(w,T)=>t.modelValue?(S(),x("div",{key:0,class:"dialog-overlay",onMousedown:T[1]||(T[1]=hn(R=>t.closeOnOverlayClick&&w.$emit("update:modelValue",!1),["self"]))},[u("div",{ref_key:"dialogRef",ref:s,class:"dialog",style:Et(o.value)},[u("div",{class:"dialog-header",onMousedown:h},[pi(w.$slots,"header",{},()=>[u("h3",null,P(t.title),1)]),u("button",{class:"close-button",onClick:T[0]||(T[0]=hn(R=>w.$emit("update:modelValue",!1),["stop"]))}," × ")],32),u("div",fw,[pi(w.$slots,"default",{},void 0)]),u("div",{class:"resize-handle",onMousedown:hn(C,["stop"])},null,32)],4)],32)):ae("",!0)}},Er=Ie(pw,[["__scopeId","data-v-1de10ed6"]]);async function mw(t,e){try{const s=new Map(t.map(i=>[i.id,i])),n=e.map(i=>{const a=s.get(i.newsId);return{news_context:JSON.stringify(a)||null,recommendations:JSON.stringify(i),created_at:new Date().toISOString()}});if(n.length===0)throw new Error("没有有效的推荐记录可保存");const{data:r,error:o}=await ce.from("stock_recommendations").insert(n).select();if(o)throw console.error("保存股票推荐记录失败:",o),o;return r}catch(s){throw console.error("保存股票推荐记录异常:",s),s}}async function gw(){try{const{data:t,error:e}=await ce.from("stock_recommendations").select("*").order("created_at",{ascending:!1});return e?(console.error("获取历史推荐记录失败:",e),[]):t||[]}catch(t){return console.error("获取历史推荐记录异常:",t),[]}}const vw={class:"history-content"},_w=["disabled"],yw={key:0,class:"loading"},bw={key:1,class:"history-table"},ww={class:"news-cell"},kw=["onClick"],Sw={class:"news-title"},Cw={class:"expand-icon"},xw={class:"news-details"},Ew={class:"news-meta"},Tw={class:"news-source"},Aw={class:"news-time"},$w={class:"news-summary"},Pw=["href"],Ow={key:2,class:"no-history"},Rw={__name:"StockHistoryDialog",setup(t,{expose:e}){const s=V(!1),n=V(!1),r=V([]),o=V({}),i=je(()=>{const h=[];return r.value.forEach(f=>{h.push({created_at:f.created_at,recommendation:JSON.parse(f.recommendations),news_context:JSON.parse(f.news_context)})}),h}),a=h=>h>=80?"high":h>=60?"medium":"low",l=async()=>{n.value=!0;try{const h=await gw();r.value=h||[]}catch(h){console.error("获取推荐历史异常:",h)}finally{n.value=!1}},c=h=>new Date(h).toLocaleString("zh-CN"),d=h=>{o.value[h]=!o.value[h]};return e({show:()=>{s.value=!0,l()}}),(h,f)=>(S(),Lt(Er,{modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=p=>s.value=p),title:"股票推荐历史记录","initial-width":1200,"initial-height":600,"min-width":1e3,"min-height":400},{default:re(()=>[u("div",vw,[u("button",{onClick:l,disabled:n.value,class:"refresh-button"},P(n.value?"加载中...":"刷新历史记录"),9,_w),n.value?(S(),x("div",yw,f[2]||(f[2]=[u("p",null,"加载历史记录中...",-1)]))):r.value.length>0?(S(),x("div",bw,[u("table",null,[f[3]||(f[3]=u("thead",null,[u("tr",null,[u("th",null,"时间"),u("th",null,"股票代码"),u("th",null,"股票名称"),u("th",null,"市场"),u("th",null,"置信度"),u("th",null,"推荐理由"),u("th",null,"相关新闻")])],-1)),u("tbody",null,[(S(!0),x(ue,null,Pe(i.value,(p,g)=>(S(),x("tr",{key:g},[u("td",null,P(c(p.created_at)),1),u("td",null,P(p.recommendation.stockCode),1),u("td",null,P(p.recommendation.stockName),1),u("td",null,P(p.recommendation.market),1),u("td",null,[u("span",{class:Se(["confidence-badge",a(p.recommendation.confidence)])},P(p.recommendation.confidence)+"% ",3)]),u("td",null,P(p.recommendation.reason),1),u("td",ww,[u("div",{class:Se(["news-item",{expanded:o.value[g]}])},[u("div",{class:"news-header",onClick:y=>d(g)},[u("div",Sw,P(p.news_context.title),1),u("span",Cw,P(o.value[g]?"▼":"▶"),1)],8,kw),ge(u("div",xw,[u("div",Ew,[u("span",Tw,P(p.news_context.source),1),u("span",Aw,P(c(p.news_context.publishedAt)),1)]),u("div",$w,P(p.news_context.summary),1),u("a",{href:p.news_context.url,target:"_blank",class:"news-link",onClick:f[0]||(f[0]=hn(()=>{},["stop"]))}," 查看原文 ",8,Pw)],512),[[$s,o.value[g]]])],2)])]))),128))])])])):(S(),x("div",Ow,f[4]||(f[4]=[u("p",null,"暂无推荐历史记录",-1)])))])]),_:1},8,["modelValue"]))}},Iw=Ie(Rw,[["__scopeId","data-v-6eeb1cae"]]);function gs(){return Math.random().toString(36).substr(2,9)}const jw={name:"NewsDialog",components:{DraggableDialog:Er},props:{newsData:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["retry","add-news","delete-news"],data(){return{isVisible:!1,isAddingNews:!1,newsForm:{title:"",summary:"",url:"",source:""}}},computed:{isFormValid(){const{title:t,url:e}=this.newsForm;return t.trim()&&e.trim()}},methods:{show(){this.isVisible=!0},hide(){this.isVisible=!1,this.isAddingNews=!1,this.resetForm()},formatTime(t){return t?new Date(t).toLocaleString():""},showAddNewsForm(){this.isAddingNews=!0},cancelAddNews(){this.isAddingNews=!1,this.resetForm()},submitAddNews(){if(!this.isFormValid)return;const t={id:gs(),...this.newsForm,summary:this.newsForm.summary.trim()||this.newsForm.title,source:this.newsForm.source.trim()||"用户添加",publishedAt:new Date().toISOString()};this.$emit("add-news",t),this.isAddingNews=!1,this.resetForm()},handleDelete(t){this.$emit("delete-news",t)},resetForm(){this.newsForm={title:"",summary:"",url:"",source:""}}}},Dw={class:"news-dialog"},Lw={class:"dialog-header"},Nw={key:0,class:"news-list"},Mw={key:0,class:"loading-state"},Uw={key:1,class:"error-state"},Fw={class:"news-header"},Vw={class:"news-title"},Bw=["onClick"],Hw={class:"news-summary"},qw={class:"news-meta"},Jw={class:"news-source"},Kw={class:"news-time"},zw=["href"],Ww={key:1,class:"add-news-form"},Gw={class:"form-item"},Qw={class:"form-item"},Yw={class:"form-item"},Xw={class:"form-item"},Zw={class:"form-actions"},e0=["disabled"];function t0(t,e,s,n,r,o){const i=Ge("DraggableDialog");return S(),Lt(i,{modelValue:r.isVisible,"onUpdate:modelValue":e[8]||(e[8]=a=>r.isVisible=a),title:"新闻列表","close-on-overlay-click":!0,"initial-width":800,"initial-height":600},{default:re(()=>[u("div",Dw,[u("div",Lw,[u("button",{class:"add-news-button",onClick:e[0]||(e[0]=(...a)=>o.showAddNewsForm&&o.showAddNewsForm(...a))}," + 添加新闻 ")]),r.isAddingNews?(S(),x("div",Ww,[e[14]||(e[14]=u("h3",null,"添加新闻",-1)),u("div",Gw,[e[10]||(e[10]=u("label",null,[he(" 新闻标题 "),u("span",{class:"required"},"*")],-1)),ge(u("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>r.newsForm.title=a),type:"text",placeholder:"请输入新闻标题"},null,512),[[De,r.newsForm.title]])]),u("div",Qw,[e[11]||(e[11]=u("label",null,"新闻摘要",-1)),ge(u("textarea",{"onUpdate:modelValue":e[3]||(e[3]=a=>r.newsForm.summary=a),placeholder:"请输入新闻摘要（选填）",rows:"4"},null,512),[[De,r.newsForm.summary]])]),u("div",Yw,[e[12]||(e[12]=u("label",null,[he(" 新闻链接 "),u("span",{class:"required"},"*")],-1)),ge(u("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>r.newsForm.url=a),type:"text",placeholder:"请输入新闻链接"},null,512),[[De,r.newsForm.url]])]),u("div",Xw,[e[13]||(e[13]=u("label",null,"新闻来源",-1)),ge(u("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>r.newsForm.source=a),type:"text",placeholder:"请输入新闻来源（选填）"},null,512),[[De,r.newsForm.source]])]),u("div",Zw,[u("button",{onClick:e[6]||(e[6]=(...a)=>o.cancelAddNews&&o.cancelAddNews(...a)),class:"cancel-button"}," 取消 "),u("button",{onClick:e[7]||(e[7]=(...a)=>o.submitAddNews&&o.submitAddNews(...a)),disabled:!o.isFormValid,class:"submit-button"}," 确认添加 ",8,e0)])])):(S(),x("div",Nw,[s.loading?(S(),x("div",Mw,e[9]||(e[9]=[u("p",null,"加载中...",-1)]))):s.error?(S(),x("div",Uw,[u("p",null,P(s.error),1),u("button",{onClick:e[1]||(e[1]=a=>t.$emit("retry")),class:"retry-button"},"重试")])):(S(!0),x(ue,{key:2},Pe(s.newsData,(a,l)=>(S(),x("div",{key:l,class:"news-item"},[u("div",Fw,[u("h3",Vw,P(a.title),1),u("button",{class:"delete-button",onClick:c=>o.handleDelete(l)}," 删除 ",8,Bw)]),u("p",Hw,P(a.summary),1),u("div",qw,[u("span",Jw,"来源："+P(a.source),1),u("span",Kw,P(o.formatTime(a.publishedAt)),1)]),u("a",{href:a.url,target:"_blank",class:"news-link"}," 查看原文 ",8,zw)]))),128))]))])]),_:1},8,["modelValue"])}const s0=Ie(jw,[["render",t0],["__scopeId","data-v-abab1dff"]]),zn=["https://api.allorigins.win/get?url=","https://cors-anywhere.herokuapp.com/","https://api.codetabs.com/v1/proxy?quest=","https://cors-proxy.htmldriven.com/?url=","https://crossorigin.me/"];async function Gs(t,e,s){let n=null;const r=Date.now();for(let i=0;i<zn.length;i++){const a=Date.now(),l=zn[i];try{s({type:"info",message:`${e}: 正在尝试第 ${i+1}/${zn.length} 个代理服务...`});const c=await fetch(l+encodeURIComponent(t));if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const d=await c.json(),h=((Date.now()-a)/1e3).toFixed(2);return s({type:"success",message:`${e}: 第 ${i+1} 个代理服务请求成功，耗时 ${h} 秒`}),l.includes("allorigins")?d.contents:d}catch(c){n=c;const d=((Date.now()-a)/1e3).toFixed(2);s({type:"error",message:`${e}: 第 ${i+1} 个代理服务失败 - ${c.message}，耗时 ${d} 秒`}),i<zn.length-1&&s({type:"info",message:`${e}: 准备切换到下一个代理服务...`});continue}}const o=((Date.now()-r)/1e3).toFixed(2);throw s({type:"error",message:`${e}: 所有代理服务均失败，总耗时 ${o} 秒`}),n||new Error("所有代理服务均失败")}async function n0(t=()=>{}){try{const e=Date.now(),s=[{name:"Google财经",fetch:()=>r0(t)},{name:"Bing财经",fetch:()=>o0(t)},{name:"百度财经",fetch:()=>i0(t)},{name:"新浪财经",fetch:()=>a0(t)},{name:"东方财富网",fetch:()=>l0(t)},{name:"腾讯财经",fetch:()=>c0(t)}];t({type:"info",message:`开始从 ${s.map(c=>c.name).join("、")} 获取新闻数据`});const n=await Promise.allSettled(s.map(async({name:c,fetch:d})=>{const h=Date.now();try{t({type:"info",message:`开始获取 ${c} 新闻...`});const f=await d(),p=((Date.now()-h)/1e3).toFixed(2);return!f||f.length===0?(t({type:"error",message:`${c}: 失败 - 未获取到任何新闻，耗时 ${p} 秒`}),[]):(t({type:"success",message:`${c}: 成功 - 获取到 ${f.length} 条新闻，耗时 ${p} 秒`}),f)}catch(f){const p=((Date.now()-h)/1e3).toFixed(2);return t({type:"error",message:`${c}: 失败 - ${f.message}，耗时 ${p} 秒`}),[]}})),r=n.reduce((c,d)=>d.status==="fulfilled"?[...c,...d.value]:c,[]),o=u0(r),i=((Date.now()-e)/1e3).toFixed(2),a=n.reduce((c,d)=>d.status==="fulfilled"&&d.value.length>0?c+1:c,0),l=s.length-a;return t({type:"success",message:`新闻爬取完成：
- ${a} 个来源成功，${l} 个来源失败
- 共获取到 ${o.length} 条有效新闻（去重后）
- 总耗时 ${i} 秒`}),o}catch(e){const s=((Date.now()-startTime)/1e3).toFixed(2);throw t({type:"error",message:`新闻爬取失败: ${e.message}，总耗时 ${s} 秒`}),new Error("获取热点新闻失败: "+e.message)}}async function r0(t){try{const s=await Gs("https://news.google.com/rss/search?q=finance+stocks+market&hl=zh-CN&gl=CN&ceid=CN:zh-Hans","Google财经",t),o=new DOMParser().parseFromString(s,"text/xml").querySelectorAll("item"),i=[];return o.forEach((a,l)=>{var c,d,h,f;if(l<5){const p=((c=a.querySelector("title"))==null?void 0:c.textContent)||"",g=((d=a.querySelector("link"))==null?void 0:d.textContent)||"",y=((h=a.querySelector("pubDate"))==null?void 0:h.textContent)||"",E=((f=a.querySelector("description"))==null?void 0:f.textContent)||"";i.push({id:gs(),title:p,summary:E.substring(0,150)+"...",url:g,source:"Google财经",publishedAt:new Date(y).toISOString()})}}),i}catch(e){throw new Error(`获取Google新闻失败: ${e.message}`)}}async function o0(t){try{const s=await Gs("https://www.bing.com/news/search?q=stock+market+finance&format=rss","Bing财经",t),o=new DOMParser().parseFromString(s,"text/xml").querySelectorAll("item"),i=[];return o.forEach((a,l)=>{var c,d,h,f;if(l<5){const p=((c=a.querySelector("title"))==null?void 0:c.textContent)||"",g=((d=a.querySelector("link"))==null?void 0:d.textContent)||"",y=((h=a.querySelector("pubDate"))==null?void 0:h.textContent)||"",E=((f=a.querySelector("description"))==null?void 0:f.textContent)||"";i.push({id:gs(),title:p,summary:E.replace(/<[^>]*>/g,"").substring(0,150)+"...",url:g,source:"Bing财经",publishedAt:new Date(y).toISOString()})}}),i}catch(e){throw new Error(`获取Bing新闻失败: ${e.message}`)}}async function i0(t){var e,s,n;try{const o=await Gs("https://baijiahao.baidu.com/s?id=1683323836058966723","百度财经",t),a=new DOMParser().parseFromString(o,"text/html"),l=[],c=a.querySelectorAll(".article-list .article-item");for(let d=0;d<c.length&&d<5;d++){const h=c[d],f=h.querySelector(".article-title"),p=((e=f==null?void 0:f.textContent)==null?void 0:e.trim())||"",g="https://baijiahao.baidu.com"+((f==null?void 0:f.getAttribute("href"))||""),y=((n=(s=h.querySelector(".article-summary"))==null?void 0:s.textContent)==null?void 0:n.trim())||"";l.push({id:gs(),title:p,summary:y.substring(0,150)+"...",url:g,source:"百度财经",publishedAt:new Date().toISOString()})}return l}catch(r){throw new Error(`获取百度新闻失败: ${r.message}`)}}async function a0(t){var e;try{const n=await Gs("https://finance.sina.com.cn/stock/","新浪财经",t),o=new DOMParser().parseFromString(n,"text/html"),i=[],a=o.querySelectorAll(".news-list li");for(let l=0;l<a.length&&l<5;l++){const d=a[l].querySelector("a"),h=((e=d==null?void 0:d.textContent)==null?void 0:e.trim())||"",f=(d==null?void 0:d.getAttribute("href"))||"";i.push({id:gs(),title:h,summary:"新浪财经热点新闻",url:f,source:"新浪财经",publishedAt:new Date().toISOString()})}return i}catch(s){throw new Error(`获取新浪财经新闻失败: ${s.message}`)}}async function l0(t){var e;try{const n=await Gs("https://finance.eastmoney.com/a/cgnjj.html","东方财富网",t),o=new DOMParser().parseFromString(n,"text/html"),i=[],a=o.querySelectorAll(".articleList .title");for(let l=0;l<a.length&&l<5;l++){const d=a[l].querySelector("a"),h=((e=d==null?void 0:d.textContent)==null?void 0:e.trim())||"",f=(d==null?void 0:d.getAttribute("href"))||"";i.push({id:gs(),title:h,summary:"东方财富网热点新闻",url:f,source:"东方财富网",publishedAt:new Date().toISOString()})}return i}catch(s){throw new Error(`获取东方财富网新闻失败: ${s.message}`)}}async function c0(t){var e;try{const n=await Gs("https://finance.qq.com/stock/","腾讯财经",t),o=new DOMParser().parseFromString(n,"text/html"),i=[],a=o.querySelectorAll(".list li");for(let l=0;l<a.length&&l<5;l++){const d=a[l].querySelector("a"),h=((e=d==null?void 0:d.textContent)==null?void 0:e.trim())||"",f=(d==null?void 0:d.getAttribute("href"))||"";i.push({id:gs(),title:h,summary:"腾讯财经热点新闻",url:f,source:"腾讯财经",publishedAt:new Date().toISOString()})}return i}catch(s){throw new Error(`获取腾讯财经新闻失败: ${s.message}`)}}function u0(t){const e=new Map;for(const s of t){const n=s.title.toLowerCase().trim();e.has(n)||e.set(n,s)}return Array.from(e.values()).sort((s,n)=>new Date(n.publishedAt)-new Date(s.publishedAt))}const d0={name:"AIRecommendDialog",components:{DraggableDialog:Er},props:{modelValue:{type:Boolean,required:!0},recommendations:{type:Array,default:()=>[]},newsData:{type:Array,default:()=>[]},error:{type:String,default:null}},emits:["update:modelValue","submit","delete"],data(){return{isAddingRecommend:!1,userInput:"",inputError:"",showCopySuccess:!1,copySuccessTimer:null}},computed:{promptTemplate(){return`请分析以下新闻，找出可能相关的股票：

当前新闻列表：
${this.formatNewsForPrompt()}

请根据以上新闻：
1. 分析每条新闻提到的公司和行业
2. 找出相关的股票代码（优先A股，同时可以包含港股和美股）
3. 给出推荐理由
4. 使用以下JSON格式返回结果，可以返回单个对象或对象数组：

[
  {
    "stockCode": "股票代码",
    "stockName": "股票名称",
    "market": "市场（A股/港股/美股）",
    "reason": "推荐理由（包含对公司优势和相关新闻分析的详细说明）",
    "relatedNews": ["相关新闻标题1", "相关新闻标题2"],
    "confidence": 推荐置信度(0-100)
  },
  // 可以返回多个推荐...
]

注意事项：
1. 每个推荐都需要包含完整的字段信息
2. confidence 值范围为0-100
3. 确保返回格式为标准JSON，可以被JSON.parse()直接解析
4. 可以返回单个对象或对象数组，但格式必须正确`},formattedNews(){return!this.newsData||this.newsData.length===0?"暂无新闻数据":this.newsData.map((t,e)=>`${e+1}. ${t.title}
          来源：${t.source}
          摘要：${t.summary}`).join(`

`)}},methods:{formatNewsForPrompt(){return this.formattedNews},getConfidenceClass(t){return t>=80?"high":t>=60?"medium":"low"},showAddRecommendForm(){this.isAddingRecommend=!0},cancelAddRecommend(){this.isAddingRecommend=!1,this.userInput="",this.inputError=""},async copyPrompt(){try{await navigator.clipboard.writeText(this.promptTemplate),this.showCopySuccess=!0,this.copySuccessTimer&&clearTimeout(this.copySuccessTimer),this.copySuccessTimer=setTimeout(()=>{this.showCopySuccess=!1},2e3)}catch(t){console.error("复制失败:",t)}},handleSubmit(){this.inputError="";try{let t=JSON.parse(this.userInput);Array.isArray(t)||(t=[t]);const e=["stockCode","stockName","market","reason","relatedNews","confidence"];for(const s of t){const n=e.filter(r=>!(r in s));if(n.length>0){this.inputError=`推荐对象缺少必要字段: ${n.join(", ")}`;return}if(s.confidence<0||s.confidence>100){this.inputError="置信度必须在0-100之间";return}}this.$emit("submit",t),this.userInput="",this.inputError="",this.isAddingRecommend=!1}catch{this.inputError="输入格式不正确，请确保是有效的JSON格式"}},handleDelete(t){this.$emit("delete",t)}},beforeUnmount(){this.copySuccessTimer&&clearTimeout(this.copySuccessTimer)}},h0={class:"news-dialog"},f0={class:"dialog-header"},p0={key:0,class:"news-list"},m0={key:0,class:"error-state"},g0={class:"stock-info"},v0={class:"stock-info-left"},_0={class:"stock-name"},y0={class:"stock-code"},b0={class:"stock-market"},w0={class:"stock-info-right"},k0=["onClick"],S0={class:"recommendation-reason"},C0={class:"related-news"},x0={key:1,class:"add-news-form"},E0={class:"prompt-info"},T0={class:"prompt-template"},A0={class:"copy-button-wrapper"},$0={key:0,class:"copy-success"},P0={class:"form-item"},O0={key:0,class:"error-message"},R0={class:"form-actions"},I0=["disabled"];function j0(t,e,s,n,r,o){const i=Ge("DraggableDialog");return S(),Lt(i,{"model-value":s.modelValue,"onUpdate:modelValue":e[5]||(e[5]=a=>t.$emit("update:modelValue",a)),title:"AI股票推荐","close-on-overlay-click":!0,"initial-width":800,"initial-height":600},{default:re(()=>[u("div",h0,[u("div",f0,[u("button",{class:"add-news-button",onClick:e[0]||(e[0]=(...a)=>o.showAddRecommendForm&&o.showAddRecommendForm(...a))}," + 添加推荐 ")]),r.isAddingRecommend?(S(),x("div",x0,[e[10]||(e[10]=u("h3",null,"添加AI推荐",-1)),u("div",E0,[e[7]||(e[7]=u("p",null,"您可以使用以下提示词在第三方AI助手中获取更多推荐：",-1)),u("div",T0,P(o.promptTemplate),1),u("div",A0,[u("button",{class:"copy-button",onClick:e[1]||(e[1]=(...a)=>o.copyPrompt&&o.copyPrompt(...a))}," 复制提示词 "),r.showCopySuccess?(S(),x("span",$0," ✓ 复制成功 ")):ae("",!0)])]),u("div",P0,[e[8]||(e[8]=u("label",null,"将第三方AI助手的回答粘贴到下面：",-1)),e[9]||(e[9]=u("div",{class:"input-example"},[u("p",null,"支持单个推荐对象或多个推荐对象的数组，例如："),u("pre",{class:"example-code"},`// 单个推荐对象
{
  "stockCode": "000001",
  "stockName": "平安银行",
  "market": "A股",
  "reason": "金融科技转型成效显著",
  "relatedNews": ["相关新闻标题1", "相关新闻标题2"],
  "confidence": 85
}

// 或多个推荐对象的数组
[
  {
    "stockCode": "000001",
    "stockName": "平安银行",
    "market": "A股",
    "reason": "金融科技转型成效显著",
    "relatedNews": ["相关新闻标题1"],
    "confidence": 85
  },
  {
    "stockCode": "600036",
    "stockName": "招商银行",
    "market": "A股",
    "reason": "零售银行业务优势明显",
    "relatedNews": ["相关新闻标题2"],
    "confidence": 90
  }
]`)],-1)),ge(u("textarea",{"onUpdate:modelValue":e[2]||(e[2]=a=>r.userInput=a),placeholder:"请粘贴AI助手的JSON格式回答...",rows:"6"},null,512),[[De,r.userInput]]),r.inputError?(S(),x("div",O0,P(r.inputError),1)):ae("",!0)]),u("div",R0,[u("button",{onClick:e[3]||(e[3]=(...a)=>o.cancelAddRecommend&&o.cancelAddRecommend(...a)),class:"cancel-button"}," 取消 "),u("button",{onClick:e[4]||(e[4]=(...a)=>o.handleSubmit&&o.handleSubmit(...a)),disabled:!r.userInput.trim(),class:"submit-button"}," 确认添加 ",8,I0)])])):(S(),x("div",p0,[s.error?(S(),x("div",m0,[u("p",null,P(s.error),1)])):(S(!0),x(ue,{key:1},Pe(s.recommendations,(a,l)=>(S(),x("div",{key:l,class:"news-item"},[u("div",g0,[u("div",v0,[u("span",_0,P(a.stockName),1),u("span",y0,"("+P(a.stockCode)+")",1),u("span",b0,P(a.market),1)]),u("div",w0,[u("button",{class:"delete-button",onClick:c=>o.handleDelete(l)}," 删除 ",8,k0),u("span",{class:Se(["confidence-badge",o.getConfidenceClass(a.confidence)])}," 置信度: "+P(a.confidence)+"% ",3)])]),u("div",S0,P(a.reason),1),u("div",C0,[e[6]||(e[6]=u("strong",null,"相关新闻：",-1)),u("ul",null,[(S(!0),x(ue,null,Pe(a.relatedNews,(c,d)=>(S(),x("li",{key:d},P(c),1))),128))])])]))),128))]))])]),_:1},8,["model-value"])}const D0=Ie(d0,[["render",j0],["__scopeId","data-v-81d427db"]]),L0={name:"StockRecommender",components:{StockHistoryDialog:Iw,NewsDialog:s0,DraggableDialog:Er,AIRecommendDialog:D0},data(){return{currentProgress:0,progressSteps:[{label:"爬取热点新闻",status:"pending",icon:"🔍",onClick:null},{label:"AI分析推荐",status:"pending",icon:"🤖",onClick:null},{label:"保存分析结果",status:"pending",icon:"💾",onClick:null}],isProcessing:!1,isCompleted:!1,hasError:!1,executionLogs:[],currentUserAction:null,newsData:null,isLoadingNews:!1,newsError:null,currentStepIndex:-1,isAIRecommendDialogVisible:!1,aiRecommendations:null,isProcessingAI:!1,aiError:null,userAIInput:""}},computed:{canSubmitUserAction(){return this.currentUserAction&&this.currentUserAction.value&&this.currentUserAction.value.trim().length>0},isButtonDisabled(){return this.currentStepIndex>=0?!this.progressSteps[this.currentStepIndex].completed:!1},getButtonText(){if(this.isCompleted)return"流程已完成";if(this.currentStepIndex>=0){const t=this.progressSteps[this.currentStepIndex];return t&&t.completed?"下一步":"执行中..."}return"开始执行"},showAddNewsHint(){return this.currentStepIndex===0&&this.progressSteps[0].completed&&!this.isProcessing},showAIRecommendHint(){return this.currentStepIndex===1&&this.progressSteps[1].completed&&!this.isProcessing}},methods:{async handleButtonClick(){if(!(this.isProcessing||this.isButtonDisabled))if(this.currentStepIndex===-1)this.isProcessing=!0,this.resetProgress(),this.currentStepIndex=0,await this.executeStep(0),this.isProcessing=!1;else{const t=this.currentStepIndex+1;t<this.progressSteps.length&&(this.isProcessing=!0,this.currentStepIndex=t,await this.executeStep(t),this.isProcessing=!1)}},resetProgress(){this.currentProgress=0,this.isCompleted=!1,this.hasError=!1,this.executionLogs=[],this.currentStepIndex=-1,this.newsData=null,this.isLoadingNews=!1,this.newsError=null,this.aiRecommendations=null,this.isProcessingAI=!1,this.aiError=null,this.userAIInput="",this.progressSteps=this.progressSteps.map(t=>({...t,completed:!1,current:!1,error:!1,onClick:null})),this.addLog("重新开始执行流程","info")},addLog(t,e="info"){const s=new Date().toLocaleTimeString();this.executionLogs.push({time:s,content:t,type:e}),this.$nextTick(()=>{this.$refs.logContainer&&(this.$refs.logContainer.scrollTop=this.$refs.logContainer.scrollHeight)})},updateProgress(t,e="current"){const s=this.progressSteps.length;this.progressSteps=this.progressSteps.map((n,r)=>({...n,current:r===t&&e==="current",completed:r<t||r===t&&e==="completed",error:r===t&&e==="error"})),this.currentProgress=(t+(e==="completed"?1:.5))/s*100},async executeStep(t){this.updateProgress(t,"current"),this.addLog(`开始执行第${t+1}步: ${this.progressSteps[t].label}`);try{let e=!1;switch(t){case 0:e=await this.executeNewsStep();break;case 1:e=await this.executeAIStep();break;case 2:e=await this.executeSaveStep();break}return e?(this.updateProgress(t,"completed"),t===this.progressSteps.length-1&&(this.isCompleted=!0,this.isProcessing=!1,this.addLog("🎉 所有步骤已完成！","success")),!0):(this.updateProgress(t,"error"),this.hasError=!0,!1)}catch(e){return console.error(`步骤${t+1}执行失败:`,e),this.addLog(`步骤执行失败: ${e.message}`,"error"),this.updateProgress(t,"error"),this.hasError=!0,!1}},async executeNewsStep(){this.addLog("开始爬取热点新闻..."),this.isLoadingNews=!0,this.newsError=null;try{const t=await n0(e=>{this.addLog(e.message,e.type)});return!t||t.length===0?(this.addLog("自动获取新闻失败，您可以手动添加新闻继续","info"),this.newsData=[],this.progressSteps[0].onClick=()=>{this.$refs.newsDialog.show()},this.addLog('💡 提示：点击"添加新闻"按钮来手动添加新闻',"info"),!0):(this.newsData=t,this.progressSteps[0].onClick=()=>{this.$refs.newsDialog.show()},!0)}catch(t){return this.newsError=t.message,this.addLog(`自动获取新闻失败: ${t.message}，您可以手动添加新闻继续`,"error"),this.newsData=[],this.progressSteps[0].onClick=()=>{this.$refs.newsDialog.show()},this.addLog('💡 提示：点击"添加新闻"按钮来手动添加新闻',"info"),!0}finally{this.isLoadingNews=!1}},async executeAIStep(){this.addLog("开始AI分析新闻相关股票..."),this.isProcessingAI=!0,this.aiError=null;try{if(!this.newsData||this.newsData.length===0)throw this.addLog("没有可分析的新闻数据，请先添加新闻","error"),new Error("没有可分析的新闻数据");this.addLog("正在搜索相关股票信息...");const t=await this.searchStocksByNews();return!t||t.length===0?(this.addLog("自动分析未找到相关股票，您可以手动添加推荐继续","info"),this.aiRecommendations=[],this.progressSteps[1].onClick=()=>{this.showAIRecommendDialog()},this.addLog('💡 提示：点击"添加推荐"按钮来手动添加股票推荐',"info"),!0):(this.aiRecommendations=t,this.addLog(`AI分析完成，找到 ${t.length} 只相关股票`),this.addLog("💡 提示：您可以通过第三方AI助手添加更多股票推荐","info"),this.progressSteps[1].onClick=()=>{this.showAIRecommendDialog()},!0)}catch(t){return this.aiError=t.message,t.message==="没有可分析的新闻数据"?!1:(this.addLog(`AI分析失败: ${t.message}，您可以手动添加推荐继续`,"error"),this.aiRecommendations=[],this.progressSteps[1].onClick=()=>{this.showAIRecommendDialog()},this.addLog('💡 提示：点击"添加推荐"按钮来手动添加股票推荐',"info"),!0)}finally{this.isProcessingAI=!1}},async searchStocksByNews(){const t=[];for(const e of this.newsData)t.push({stockCode:"000001",stockName:"平安银行",market:"A股",reason:`与新闻"${e.title}"相关，涉及金融科技领域`,relatedNews:[e.title],confidence:85,newsId:e.id}),t.push({stockCode:"300750",stockName:"宁德时代",market:"A股",reason:`与新闻"${e.title}"相关，新能源电池龙头企业`,relatedNews:[e.title],confidence:90,newsId:e.id});return t},showAIRecommendDialog(){this.isAIRecommendDialogVisible=!0},handleAddAIRecommendation(t){Array.isArray(t)||(t=[t]),this.aiRecommendations=[...this.aiRecommendations||[],...t],this.addLog(`用户添加了 ${t.length} 条AI推荐`,"success")},async submitUserAction(){},showHistory(){this.$refs.historyDialog.show()},showAddNewsDialog(){this.$refs.newsDialog.show()},handleAddNews(t){this.newsData=[t,...this.newsData||[]],this.addLog(`手动添加新闻: ${t.title}`,"success")},handleDeleteNews(t){const e=this.newsData[t];this.newsData=this.newsData.filter((s,n)=>n!==t),this.addLog(`删除新闻: ${e.title}`,"info")},handleDeleteRecommendation(t){const e=this.aiRecommendations[t];this.aiRecommendations=this.aiRecommendations.filter((s,n)=>n!==t),this.addLog(`删除推荐: ${e.stockName}(${e.stockCode})`,"info")},async executeSaveStep(){this.addLog("开始保存分析结果...");try{if(!this.newsData||!this.aiRecommendations)throw this.addLog("没有可保存的数据，请确保已完成新闻获取和AI推荐步骤","error"),new Error("没有可保存的数据");if(this.addLog("正在保存到数据库..."),await mw(this.newsData,this.aiRecommendations))return this.addLog("数据保存成功！","success"),this.progressSteps[2].onClick=()=>{this.showHistory()},!0;throw new Error("保存失败")}catch(t){return this.addLog(`保存失败: ${t.message}`,"error"),!1}},handleRestart(){this.resetProgress(),this.handleButtonClick()}}},N0={class:"stock-recommender"},M0={class:"progress-section"},U0={class:"progress-header"},F0={class:"button-group"},V0=["disabled"],B0={key:0,class:"add-news-hint"},H0={class:"hint-content"},q0={key:1,class:"add-news-hint"},J0={class:"hint-content"},K0={class:"progress-bar"},z0={class:"progress-steps"},W0=["onClick"],G0={class:"step-icon"},Q0={class:"step-label"},Y0={class:"detail-section"},X0={class:"detail-log",ref:"logContainer"},Z0={class:"log-time"},e1={class:"log-content"},t1={key:0,class:"user-action-panel"},s1={class:"action-description"},n1={class:"action-input"},r1=["placeholder"],o1=["disabled"],i1={class:"fixed-history-button"};function a1(t,e,s,n,r,o){const i=Ge("StockHistoryDialog"),a=Ge("NewsDialog"),l=Ge("AIRecommendDialog");return S(),x("div",N0,[e[13]||(e[13]=u("h2",{class:"main-title"},"股票推荐工具",-1)),u("div",M0,[u("div",U0,[e[8]||(e[8]=u("h3",null,"执行进度",-1)),u("div",F0,[r.isCompleted?(S(),x("button",{key:0,onClick:e[0]||(e[0]=(...c)=>o.handleRestart&&o.handleRestart(...c)),class:"restart-button"}," 重新开始 ")):ae("",!0),r.isCompleted?ae("",!0):(S(),x("button",{key:1,onClick:e[1]||(e[1]=(...c)=>o.handleButtonClick&&o.handleButtonClick(...c)),disabled:r.isProcessing||o.isButtonDisabled,class:"start-button"},P(o.getButtonText),9,V0))])]),o.showAddNewsHint?(S(),x("div",B0,[u("div",H0,[e[9]||(e[9]=u("span",null,"🔔 您可以在进行AI推荐之前添加自己关注的新闻",-1)),u("button",{onClick:e[2]||(e[2]=(...c)=>o.showAddNewsDialog&&o.showAddNewsDialog(...c)),class:"add-news-button"}," 添加新闻 ")])])):ae("",!0),o.showAIRecommendHint?(S(),x("div",q0,[u("div",J0,[e[10]||(e[10]=u("span",null,"🤖 您可以通过第三方AI助手添加更多股票推荐",-1)),u("button",{onClick:e[3]||(e[3]=(...c)=>o.showAIRecommendDialog&&o.showAIRecommendDialog(...c)),class:"add-news-button"}," 添加推荐 ")])])):ae("",!0),u("div",K0,[u("div",{class:Se(["progress",{"progress-error":r.hasError}]),style:Et({width:`${r.currentProgress}%`})},null,6)]),u("div",z0,[(S(!0),x(ue,null,Pe(r.progressSteps,(c,d)=>(S(),x("div",{key:d,class:Se(["step",{completed:c.completed,current:c.current,error:c.error}]),onClick:h=>c.completed&&c.onClick&&c.onClick()},[u("div",G0,P(c.icon),1),u("div",Q0,P(c.label),1)],10,W0))),128))])]),u("div",Y0,[e[11]||(e[11]=u("div",{class:"detail-header"},[u("h3",null,"执行详情")],-1)),u("div",X0,[(S(!0),x(ue,null,Pe(r.executionLogs,(c,d)=>(S(),x("div",{key:d,class:Se(["log-item",c.type])},[u("span",Z0,P(c.time),1),u("span",e1,P(c.content),1)],2))),128))],512),r.currentUserAction?(S(),x("div",t1,[u("div",s1,P(r.currentUserAction.description),1),u("div",n1,[r.currentUserAction.type==="input"?ge((S(),x("textarea",{key:0,"onUpdate:modelValue":e[4]||(e[4]=c=>r.currentUserAction.value=c),placeholder:r.currentUserAction.placeholder,rows:"4"},null,8,r1)),[[De,r.currentUserAction.value]]):ae("",!0),u("button",{onClick:e[5]||(e[5]=(...c)=>o.submitUserAction&&o.submitUserAction(...c)),disabled:!o.canSubmitUserAction},P(r.currentUserAction.buttonText),9,o1)])])):ae("",!0)]),u("div",i1,[u("button",{onClick:e[6]||(e[6]=(...c)=>o.showHistory&&o.showHistory(...c)),class:"history-button"},e[12]||(e[12]=[u("span",{class:"history-icon"},"📋",-1),u("span",{class:"history-text"},"查看历史",-1)]))]),W(i,{ref:"historyDialog"},null,512),W(a,{ref:"newsDialog","news-data":r.newsData||[],loading:r.isLoadingNews,error:r.newsError,onAddNews:o.handleAddNews,onDeleteNews:o.handleDeleteNews},null,8,["news-data","loading","error","onAddNews","onDeleteNews"]),W(l,{modelValue:r.isAIRecommendDialogVisible,"onUpdate:modelValue":e[7]||(e[7]=c=>r.isAIRecommendDialogVisible=c),recommendations:r.aiRecommendations,"news-data":r.newsData,error:r.aiError,onSubmit:o.handleAddAIRecommendation,onDelete:o.handleDeleteRecommendation},null,8,["modelValue","recommendations","news-data","error","onSubmit","onDelete"])])}const l1=Ie(L0,[["render",a1],["__scopeId","data-v-81cfedce"]]),c1={name:"AuthCallback",setup(){const t=jc(),e=Dg(),s=Yo();return es(async()=>{console.log("认证回调页面加载，哈希参数:",e.hash);const n=e.hash;if(n.startsWith("#access_token=")){const r=new URLSearchParams(n.substring(1)),o=r.get("access_token"),i=r.get("refresh_token");if(o&&i){const{data:l,error:c}=await ce.auth.setSession({access_token:o,refresh_token:i});c?console.error("设置会话失败:",c):console.log("成功设置会话")}const a=s.getters.getAuthRedirectPath;console.log("登录成功，重定向到:",a),t.replace({path:a,replace:!0})}else console.log("未找到授权码，可能是直接访问回调页面"),t.push("/")}),{}}},u1={class:"auth-callback"};function d1(t,e,s,n,r,o){return S(),x("div",u1,e[0]||(e[0]=[u("h2",null,"认证中...",-1),u("p",null,"请稍候，正在完成登录流程",-1)]))}const h1=Ie(c1,[["render",d1],["__scopeId","data-v-17b0b889"]]),f1=async()=>{const{data:t,error:e}=await ce.from("fitness_goals").select("*").eq("status","active").order("created_at",{ascending:!1}).limit(1).single();if(e)throw e;return t},Na=async t=>{const{data:e,error:s}=await ce.from("fitness_activities").select(`
      week_number,
      activity_date,
      is_completed
    `).eq("goal_id",t).order("week_number",{ascending:!0}).order("activity_date",{ascending:!0});if(s)throw s;const n=e.reduce((r,o)=>(r[o.week_number]||(r[o.week_number]={weekNumber:o.week_number,startDate:o.activity_date,activities:[]}),r[o.week_number].activities.push(o),r),{});return Object.values(n)},p1=async t=>{const{data:e}=await ce.from("fitness_goals").select("start_date").eq("id",t).single();if(!e)return 1;const s=new Date(e.start_date),r=Math.abs(new Date-s),o=Math.ceil(r/(1e3*60*60*24*7));return Math.min(o,16)},m1=async(t,e)=>{const{data:s,error:n}=await ce.from("fitness_activities").select("*").eq("goal_id",t).eq("week_number",e).order("activity_date",{ascending:!0}).order("entry_type",{ascending:!0}).order("display_order",{ascending:!0});if(n)throw n;const r=s.reduce((o,i)=>{const a=`${i.activity_date}_${i.entry_type}_${i.meal_type||i.exercise_name}`;return o[a]||(o[a]=i),o},{});return Object.values(r)},g1=async(t,e)=>{const{data:s,error:n}=await ce.from("fitness_activities").update({is_completed:e,updated_at:new Date().toISOString()}).eq("id",t).select();if(n)throw n;return s[0]},v1={class:"week-plan-carousel"},_1={class:"week-indicator"},y1={class:"week-title"},b1={class:"week-date"},w1={class:"carousel-controls"},k1=["disabled"],S1=["disabled"],C1={class:"week-calendar"},x1={class:"calendar-body"},E1={class:"day-header"},T1={class:"date"},A1={class:"weekday"},$1={class:"status"},P1={key:0,class:"day-content meals"},O1={class:"activity-header"},R1={class:"meal-type"},I1={class:"calories"},j1={class:"description"},D1={key:1,class:"day-content exercises"},L1={class:"activity-header"},N1={class:"exercise-name"},M1={class:"category"},U1={class:"exercise-details"},F1={key:0},V1={key:1},B1={key:2},H1={key:3},q1={__name:"WeekPlanCarousel",props:{visible:Boolean,weekData:Object,currentDisplayWeek:Number,totalWeeks:Number},emits:["update:visible","prev-week","next-week","activity-updated"],setup(t,{emit:e}){const s=e,n=()=>{s("update:visible",!1)},r=()=>{s("prev-week")},o=()=>{s("next-week")},i=["周日","周一","周二","周三","周四","周五","周六"],a=p=>{if(!p)return"";const[g,y,E]=p.split("-").map(Number);return new Date(g,y-1,E).toLocaleDateString("zh-CN")},l=p=>{const[g,y,E]=p.split("-").map(Number),C=new Date(g,y-1,E);return i[C.getDay()]},c=p=>{const[g,y,E]=p.split("-").map(Number);return new Date(g,y-1,E).getDate()},d=p=>p.filter(g=>g.entry_type==="饮食"),h=p=>p.filter(g=>g.entry_type==="锻炼"),f=async(p,g)=>{try{await g1(p,g),s("activity-updated")}catch(y){console.error("更新活动状态失败:",y)}};return(p,g)=>{const y=Ge("el-checkbox");return S(),x("div",v1,[t.visible?(S(),x("div",{key:0,class:"carousel-overlay",onClick:n},[u("div",{class:"carousel-content",onClick:g[0]||(g[0]=hn(()=>{},["stop"]))},[u("div",_1,[u("span",y1,"第 "+P(t.currentDisplayWeek)+" 周",1),u("span",b1,P(a(t.weekData.startDate)),1)]),u("div",w1,[u("button",{class:"control-btn prev",onClick:r,disabled:t.currentDisplayWeek<=1},g[1]||(g[1]=[u("span",{class:"icon"},"←",-1),u("span",{class:"text"},"上一周",-1)]),8,k1),u("button",{class:"control-btn next",onClick:o,disabled:t.currentDisplayWeek>=t.totalWeeks},g[2]||(g[2]=[u("span",{class:"text"},"下一周",-1),u("span",{class:"icon"},"→",-1)]),8,S1)]),u("div",C1,[u("div",x1,[(S(!0),x(ue,null,Pe(t.weekData.activities,(E,C)=>(S(),x("div",{key:C,class:Se(["calendar-cell day",{completed:E.is_completed}])},[u("div",E1,[u("span",T1,P(c(E.activity_date)),1),u("span",A1,P(l(E.activity_date)),1),u("span",$1,P(E.is_completed?"已完成":"进行中"),1)]),d(E.activities).length?(S(),x("div",P1,[g[4]||(g[4]=u("h4",null,"饮食计划",-1)),(S(!0),x(ue,null,Pe(d(E.activities),_=>(S(),x("div",{key:_.id,class:Se(["activity-item",{completed:_.is_completed}])},[u("div",O1,[u("span",R1,P(_.meal_type),1),u("span",I1,P(_.meal_calories)+"卡",1)]),u("p",j1,P(_.meal_description),1),W(y,{modelValue:_.is_completed,"onUpdate:modelValue":k=>_.is_completed=k,onChange:k=>f(_.id,k)},{default:re(()=>g[3]||(g[3]=[he(" 完成 ")])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])],2))),128))])):ae("",!0),h(E.activities).length?(S(),x("div",D1,[g[6]||(g[6]=u("h4",null,"锻炼计划",-1)),(S(!0),x(ue,null,Pe(h(E.activities),_=>(S(),x("div",{key:_.id,class:Se(["activity-item",{completed:_.is_completed}])},[u("div",L1,[u("span",N1,P(_.exercise_name),1),u("span",M1,P(_.exercise_category),1)]),u("div",U1,[_.exercise_duration_minutes?(S(),x("span",F1," ⏱️ "+P(_.exercise_duration_minutes)+"分钟 ",1)):ae("",!0),_.exercise_sets?(S(),x("span",V1," 🔄 "+P(_.exercise_sets)+"组 x "+P(_.exercise_reps),1)):ae("",!0),_.exercise_weight_kg?(S(),x("span",B1," ⚖️ "+P(_.exercise_weight_kg)+"kg ",1)):ae("",!0),_.exercise_distance_km?(S(),x("span",H1," 📏 "+P(_.exercise_distance_km)+"km ",1)):ae("",!0)]),W(y,{modelValue:_.is_completed,"onUpdate:modelValue":k=>_.is_completed=k,onChange:k=>f(_.id,k)},{default:re(()=>g[5]||(g[5]=[he(" 完成 ")])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])],2))),128))])):ae("",!0)],2))),128))])])])])):ae("",!0)])}}},J1=Ie(q1,[["__scopeId","data-v-848c5079"]]),K1={class:"fitness-plan"},z1={class:"page-header"},W1={class:"header-content"},G1={class:"subtitle"},Q1={class:"goal-info"},Y1={class:"info-item"},X1={class:"info-content"},Z1={class:"value"},ek={class:"info-item"},tk={class:"info-content"},sk={class:"value"},nk={class:"info-item"},rk={class:"info-content"},ok={class:"value"},ik={class:"plan-progress"},ak={class:"progress-info"},lk={class:"current-week"},ck={class:"start-date"},uk={class:"progress-bar"},dk={class:"main-content"},hk={class:"weeks-container"},fk=["onClick"],pk={class:"week-card-content"},mk={class:"week-header"},gk={class:"week-date"},vk={class:"week-progress"},_k={class:"progress-bar"},yk={class:"progress-text"},bk={class:"week-summary"},wk={class:"summary-item"},kk={class:"count"},Sk={class:"summary-item"},Ck={class:"count"},xk={__name:"FitnessPlan",setup(t){const e=Qe("toast"),s=V({}),n=V(1),r=V([]),o=V(null),i=V(null),a=V(!1),l=C=>new Date(C).toLocaleDateString("zh-CN"),c=C=>{if(!C||C.length===0)return 0;let _=0,k=0;return C.forEach(w=>{w.activities&&(_+=w.activities.length,k+=w.activities.filter(T=>T.is_completed).length)}),_===0?0:Math.round(k/_*100)},d=C=>C?C.reduce((_,k)=>k.activities?_+k.activities.filter(w=>w.entry_type==="锻炼").length:_,0):0,h=C=>C?C.reduce((_,k)=>k.activities?_+k.activities.filter(w=>w.entry_type==="饮食").length:_,0):0,f=async C=>{var _;o.value=C;try{const w=(await m1(s.value.id,C)).reduce((R,j)=>(R[j.activity_date]||(R[j.activity_date]={activity_date:j.activity_date,is_completed:!1,activities:[]}),R[j.activity_date].activities.push(j),j.is_completed&&(R[j.activity_date].is_completed=!0),R),{}),T=Object.values(w).sort((R,j)=>new Date(R.activity_date)-new Date(j.activity_date));i.value={startDate:(_=r.value.find(R=>R.weekNumber===C))==null?void 0:_.startDate,activities:T},a.value=!0}catch(k){e.show("获取周计划失败"),console.error(k)}},p=async()=>{o.value>1&&await f(o.value-1)},g=async()=>{o.value<s.value.total_weeks&&await f(o.value+1)},y=async()=>{r.value=await Na(s.value.id),o.value&&await f(o.value)},E=async()=>{try{const[C,_]=await Promise.all([f1(),p1()]);s.value=C,n.value=_,r.value=await Na(C.id)}catch(C){e.show("获取计划数据失败"),console.error(C)}};return es(()=>{E()}),(C,_)=>(S(),x("div",K1,[_[12]||(_[12]=u("div",{class:"page-background"},null,-1)),u("div",z1,[u("div",W1,[u("h1",null,[_[1]||(_[1]=u("span",{class:"icon"},"💪",-1)),he(" "+P(s.value.goal_name),1)]),u("p",G1,P(s.value.goal_description),1),u("div",Q1,[u("div",Y1,[_[3]||(_[3]=u("div",{class:"info-icon"},"⚖️",-1)),u("div",X1,[_[2]||(_[2]=u("span",{class:"label"},"起始体重",-1)),u("span",Z1,P(s.value.start_weight)+"斤",1)])]),u("div",ek,[_[5]||(_[5]=u("div",{class:"info-icon"},"🎯",-1)),u("div",tk,[_[4]||(_[4]=u("span",{class:"label"},"目标体重",-1)),u("span",sk,P(s.value.target_weight)+"斤",1)])]),u("div",nk,[_[7]||(_[7]=u("div",{class:"info-icon"},"📈",-1)),u("div",rk,[_[6]||(_[6]=u("span",{class:"label"},"每周目标",-1)),u("span",ok,"-"+P(s.value.weekly_goal)+"斤",1)])])]),u("div",ik,[u("div",ak,[u("span",lk,"第 "+P(n.value)+" 周 / 共 "+P(s.value.total_weeks)+" 周",1),u("span",ck,"开始日期: "+P(l(s.value.start_date)),1)]),u("div",uk,[u("div",{style:Et({width:`${n.value/s.value.total_weeks*100}%`}),class:"progress-fill"},null,4)])])])]),u("div",dk,[u("div",hk,[(S(!0),x(ue,null,Pe(r.value,k=>(S(),x("div",{key:k.weekNumber,class:Se(["week-card",{"current-week":k.weekNumber===n.value,completed:c(k.activities)===100}]),onClick:w=>f(k.weekNumber)},[u("div",pk,[u("div",mk,[u("h3",null,"第 "+P(k.weekNumber)+" 周",1),u("span",gk,P(l(k.startDate)),1)]),u("div",vk,[u("div",_k,[u("div",{style:Et({width:`${c(k.activities)}%`}),class:"progress-fill"},null,4)]),u("span",yk," 完成度: "+P(c(k.activities))+"% ",1)]),u("div",bk,[u("div",wk,[_[8]||(_[8]=u("span",{class:"icon"},"🏃‍♂️",-1)),u("span",kk,P(d(k.activities)),1),_[9]||(_[9]=u("span",{class:"label"},"个运动项目",-1))]),u("div",Sk,[_[10]||(_[10]=u("span",{class:"icon"},"🥗",-1)),u("span",Ck,P(h(k.activities)),1),_[11]||(_[11]=u("span",{class:"label"},"餐营养计划",-1))])])])],10,fk))),128))])]),W(J1,{visible:a.value,"onUpdate:visible":_[0]||(_[0]=k=>a.value=k),weekData:i.value,currentDisplayWeek:o.value,totalWeeks:s.value.total_weeks,onPrevWeek:p,onNextWeek:g,onActivityUpdated:y},null,8,["visible","weekData","currentDisplayWeek","totalWeeks"])]))}},Ek=Ie(xk,[["__scopeId","data-v-31cdedd6"]]),Tk=[{path:"/",name:"Home",component:Gg},{path:"/about",name:"About",component:Zg},{path:"/tools/excel-formatter",name:"ExcelFormatter",component:pv},{path:"/tools/json-formatter",name:"JsonFormatter",component:l_},{path:"/tools/text-diff",name:"TextDiff",component:A_},{path:"/tools/color-picker",name:"ColorPicker",component:W_},{path:"/tools/video-parser",name:"VideoParser",component:Ty},{path:"/tools/chat/chat",name:"Chat",component:Cb},{path:"/tools/chat/private-chat",name:"PrivateChat",component:hw},{path:"/tools/stock/stock-recommender",name:"StockRecommender",component:l1},{path:"/auth/callback",name:"AuthCallback",component:h1},{path:"/fitness-plan",name:"FitnessPlan",component:Ek}],Ak=Ig({history:lg("./"),routes:Tk}),$k={install:t=>{t.component("Toast",bc),t.config.globalProperties.$toast={show:(e,s=3e3)=>{go.showToast(e,s)}},t.provide("toast",{show:(e,s=3e3)=>{go.showToast(e,s)}})}},Pk=qy({state:{authRedirectPath:"/tools/chat"},mutations:{setAuthRedirectPath(t,e){t.authRedirectPath=e}},actions:{saveAuthSource({commit:t},e){t("setAuthRedirectPath",e)}},getters:{getAuthRedirectPath:t=>t.authRedirectPath}}),Dn=Sh(km);Dn.use(Ak);Dn.use($k);Dn.use(Xy);Dn.use(Pk);Dn.mount("#app");export{jh as g};
